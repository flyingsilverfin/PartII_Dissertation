<html>
<head>
<meta http-equiv='content-type' content='text/html; charset=utf8'>
<style>
<!--
body {width:auto;padding:5;margin:5;}
.error {font-weight:bold;color:#f00;font-style:italic; border: solid 1px red;}
.word,.hword,.oword,.altwd {border-left: 1px solid #CDF; border-bottom: 1px solid #CDF;}
.word {color: #009}
.hword {color: #009; font-weight: 700;}
.oword {color: #009; font-style: italic;}
.altwd {color: #00c; font-style: oblique;}
.cmd {color: #c00;}
.exclcmd {color: #f99;}
.option {color: #cc0;}
.optparm {color: #c90;}
.envir, .document {color: #900; font-weight:bold;}
.math {color: #6c0;}
.mathgroup {color: #090;}
.exclmath {color: #9f6;}
.mathcmd {color: #6c0;}
.ignore {color: #999;}
.exclenv {color:#c66;}
.tc {color: #999; font-weight:bold;}
.comment {color: #999; font-style: italic;}
.state {color: #990; font-size: 70%;}
.cumsum {color: #999; font-size: 80%;}
.fileinc {color: #696; font-weight:bold;}
.warning {color: #c00; font-weight: 700;}

div.filegroup, div.parse, div.stylehelp, div.count, div.sumcount, div.error {
   border: solid 1px #999; margin: 4pt 0pt; padding: 4pt;
}
div.stylehelp {font-size: 80%; background: #fffff0; margin-bottom: 16pt;}
div.filegroup {background: #dfd; margin-bottom: 16pt;}
div.count {background: #ffe;}
div.sumcount {background: #cec;}
div.error {background: #fcc;}
.parse {font-size: 80%; background: #f8fff8; border-bottom:none;}

ul.count {list-style-type: none; margin: 4pt 0pt; padding: 0pt;}
.count li.header {font-weight: bold; font-style: italic;}
.subcount li.header {font-weight: normal; font-style: italic;}
.subcount li {margin-left: 16pt; font-size: 80%;}
.fielddesc {font-style: italic;}
.nb {color: #900;}

table.stat {border:2px solid #339; margin:0 0 8pt 0; background:#666; border-collapse:collapse;}
table.stat tr {border:1px solid #CCC;}
table.stat th, table.stat td {padding:1pt 4pt;}
table.stat col {padding:4pt;}
table.stat thead {background: #CCF;}
table.stat tbody {border:1px solid #333;}
table.stat tbody.sumstat {background:#FFC;}
table.stat tbody.langstat {background:#FEE;}
table.stat tbody.wordstat {background:#EEF;}
table.stat tbody.macrostat {background:#EFE;}
table.stat .sum {font-weight:bold; font-style:italic;}
-->
</style>
</head>

<body>

<h1>LaTeX word count</h1>
<div class="stylehelp"><p><h2>Format/colour codes of verbose output:</h2>

<span class='error'>ERROR</span>&nbsp;&nbsp;....&nbsp;&nbsp;TeXcount error message<br>
<span class='word'>Text which is counted</span>&nbsp;&nbsp;....&nbsp;&nbsp;counted as text words<br>
<span class='hword'>Header and title text</span>&nbsp;&nbsp;....&nbsp;&nbsp;counted as header words<br>
<span class='oword'>Caption text and footnotes</span>&nbsp;&nbsp;....&nbsp;&nbsp;counted as caption words<br>
<span class='altwd'>Words in user specified counters</span>&nbsp;&nbsp;....&nbsp;&nbsp;counted in separate counters<br>
<span class='ignore'>Ignored text or code</span>&nbsp;&nbsp;....&nbsp;&nbsp;excluded or ignored<br>
<span class='document'>\documentclass</span>&nbsp;&nbsp;....&nbsp;&nbsp;document start, beginning of preamble<br>
<span class='cmd'>\macro</span>&nbsp;&nbsp;....&nbsp;&nbsp;macro not counted, but parameters may be<br>
<span class='exclcmd'>\macro</span>&nbsp;&nbsp;....&nbsp;&nbsp;macro in excluded region<br>
<span class='option'>[Macro options]</span>&nbsp;&nbsp;....&nbsp;&nbsp;not counted<br>
<span class='optparm'>[Optional parameter]</span>&nbsp;&nbsp;....&nbsp;&nbsp;content parsed and styled as counted<br>
<span class='envir'>\begin{name}&nbsp; \end{name}</span>&nbsp;&nbsp;....&nbsp;&nbsp;environment<br>
<span class='exclenv'>\begin{name}&nbsp; \end{name}</span>&nbsp;&nbsp;....&nbsp;&nbsp;environment in excluded region<br>
<span class='mathgroup'>$&nbsp; $</span>&nbsp;&nbsp;....&nbsp;&nbsp;counted as one equation<br>
<span class='exclmath'>$&nbsp; $</span>&nbsp;&nbsp;....&nbsp;&nbsp;equation in excluded region<br>
<span class='math'>2+2=4</span>&nbsp;&nbsp;....&nbsp;&nbsp;maths (inside $...$ etc.)<br>
<span class='mathcmd'>$\macro$</span>&nbsp;&nbsp;....&nbsp;&nbsp;macros inside maths<br>
<span class='comment'>% Comments</span>&nbsp;&nbsp;....&nbsp;&nbsp;not counted<br>
<span class='tc'>%TC:TeXcount instructions</span>&nbsp;&nbsp;....&nbsp;&nbsp;not counted<br>
<span class='fileinc'>File to include</span>&nbsp;&nbsp;....&nbsp;&nbsp;not counted but file may be counted later<br>
</p></div>


<div class='filegroup'>
<h2>File: diss.tex</h2>
<div class='parse'><p>
<span class='document'>\documentclass</span><span class='option'>[12pt,a4paper,twoside,openright]</span><span class='document'>{report}</span><br>
<br>
<br>
<span class='document'>\usepackage</span><span class='option'>[pdfborder={0 0 0}]</span><span class='document'>{hyperref}</span>&nbsp; &nbsp; <span class='comment'>% turns references into hyperlinks</span><br>
<span class='document'>\usepackage</span><span class='option'>[margin=25mm]</span><span class='document'>{geometry}</span>&nbsp; <span class='comment'>% adjusts page layout</span><br>
<span class='document'>\usepackage</span><span class='document'>{graphicx}</span>&nbsp; <span class='comment'>% allows inclusion of PDF, PNG and JPG images</span><br>
<span class='document'>\usepackage</span><span class='document'>{verbatim}</span><br>
<span class='document'>\usepackage</span><span class='document'>{docmute}</span>&nbsp;  <span class='comment'>% only needed to allow inclusion of proposal.tex</span><br>
<span class='document'>\usepackage</span><span class='document'>{url}</span><br>
<span class='document'>\usepackage</span><span class='option'>[parfill]</span><span class='document'>{parskip}</span><br>
<span class='document'>\usepackage</span><span class='document'>{booktabs}</span><br>
<span class='document'>\usepackage</span><span class='document'>{fixltx2e}</span><br>
<span class='document'>\usepackage</span><span class='document'>{amsmath}</span><br>
<span class='document'>\usepackage</span><span class='document'>{amsthm}</span><br>
<span class='document'>\usepackage</span><span class='document'>{listings}</span><br>
<span class='document'>\usepackage</span><span class='document'>{array}</span><br>
<span class='document'>\usepackage</span><span class='option'>[font={it},justification={centering}]</span><span class='document'>{caption}</span><br>
<span class='document'>\usepackage</span><span class='document'>{float}</span><br>
<span class='document'>\usepackage</span><span class='document'>{framed}</span><br>
<br>
<br>
<span class='document'>\usepackage</span><span class='document'>{fancyvrb,newverbs,xcolor}</span><br>
<br>
<br>
<span class='document'>\usepackage</span><span class='option'>[UKenglish]</span><span class='document'>{babel}</span><span class='comment'>% Recommended</span><br>
<span class='document'>\usepackage</span><span class='option'>[bibstyle=numeric,citestyle=numeric,backend=biber,natbib=true]</span><span class='document'>{biblatex}</span><br>
<br>
<span class='exclcmd'>\addbibresource</span><span class='ignore'>{</span><span class='ignore'>refs.bib</span><span class='ignore'>}</span><span class='comment'>% Syntax for version &gt;= 1.2</span><br>
<br>
<br>
<span class='exclcmd'>\raggedbottom</span>                           <span class='comment'>% try to avoid widows and orphans</span><br>
<span class='exclcmd'>\sloppy</span><br>
<span class='exclcmd'>\clubpenalty</span><span class='ignore'>1000</span><span class='comment'>%</span><br>
<span class='exclcmd'>\widowpenalty</span><span class='ignore'>1000</span><span class='comment'>%</span><br>
<br>
<span class='cmd'>\renewcommand</span><span class='ignore'>{</span><span class='ignore'>\baselinestretch</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>1.1</span><span class='ignore'>}</span>    <span class='comment'>% adjust line spacing to make</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class='comment'>% more readable</span><br>
<br>
<br>
&nbsp; <br>
<span class='exclcmd'>\lstdefinelanguage</span><span class='ignore'>{</span><span class='ignore'>Typescript</span><span class='ignore'>}</span><span class='ignore'>{</span><br>
	<span class='ignore'>keywords</span><span class='ignore'>=</span><span class='ignore'>{</span><span class='ignore'>break</span><span class='ignore'>,</span> <span class='ignore'>case</span><span class='ignore'>,</span> <span class='ignore'>catch</span><span class='ignore'>,</span> <span class='ignore'>continue</span><span class='ignore'>,</span> <span class='ignore'>debugger</span><span class='ignore'>,</span> <span class='ignore'>default</span><span class='ignore'>,</span> <span class='ignore'>delete</span><span class='ignore'>,</span> <span class='ignore'>do</span><span class='ignore'>,</span> <span class='ignore'>else</span><span class='ignore'>,</span> <span class='ignore'>finally</span><span class='ignore'>,</span> <span class='ignore'>for</span><span class='ignore'>,</span> <span class='ignore'>function</span><span class='ignore'>,</span> <span class='ignore'>if</span><span class='ignore'>,</span> <span class='ignore'>in</span><span class='ignore'>,</span> <span class='ignore'>instanceof</span><span class='ignore'>,</span> <span class='ignore'>new</span><span class='ignore'>,</span> <span class='ignore'>return</span><span class='ignore'>,</span> <span class='ignore'>switch</span><span class='ignore'>,</span> <span class='ignore'>this</span><span class='ignore'>,</span> <span class='ignore'>throw</span><span class='ignore'>,</span> <span class='ignore'>try</span><span class='ignore'>,</span> <span class='ignore'>typeof</span><span class='ignore'>,</span> <span class='ignore'>var</span><span class='ignore'>,</span> <span class='ignore'>void</span><span class='ignore'>,</span> <span class='ignore'>while</span><span class='ignore'>,</span> <span class='ignore'>with</span><span class='ignore'>}</span><span class='ignore'>,</span><br>
	<span class='ignore'>keywordstyle</span><span class='ignore'>=</span><span class='exclcmd'>\color</span><span class='ignore'>{</span><span class='ignore'>blue</span><span class='ignore'>}</span><span class='exclcmd'>\bfseries</span><span class='ignore'>,</span><br>
	<span class='ignore'>ndkeywords</span><span class='ignore'>=</span><span class='ignore'>{</span><span class='ignore'>interface</span><span class='ignore'>,</span> <span class='ignore'>class</span><span class='ignore'>,</span> <span class='ignore'>extends</span><span class='ignore'>,</span> <span class='ignore'>export</span><span class='ignore'>,</span> <span class='ignore'>void</span><span class='ignore'>,</span> <span class='ignore'>number</span><span class='ignore'>,</span> <span class='ignore'>boolean</span><span class='ignore'>,</span> <span class='ignore'>throw</span><span class='ignore'>,</span> <span class='ignore'>implements</span><span class='ignore'>,</span> <span class='ignore'>import</span><span class='ignore'>,</span> <span class='ignore'>this</span><span class='ignore'>}</span><span class='ignore'>,</span><br>
	<span class='ignore'>ndkeywordstyle</span><span class='ignore'>=</span><span class='exclcmd'>\color</span><span class='ignore'>{</span><span class='ignore'>orange</span><span class='ignore'>}</span><span class='exclcmd'>\bfseries</span><span class='ignore'>,</span><br>
	<span class='ignore'>identifierstyle</span><span class='ignore'>=</span><span class='exclcmd'>\color</span><span class='ignore'>{</span><span class='ignore'>black</span><span class='ignore'>}</span><span class='ignore'>,</span><br>
	<span class='ignore'>sensitive</span><span class='ignore'>=</span><span class='ignore'>false</span><span class='ignore'>,</span><br>
	<span class='ignore'>comment</span><span class='ignore'>=</span><span class='ignore'>[</span><span class='ignore'>l</span><span class='ignore'>]</span><span class='ignore'>{</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'>}</span><span class='ignore'>,</span><br>
	<span class='ignore'>morecomment</span><span class='ignore'>=</span><span class='ignore'>[</span><span class='ignore'>s</span><span class='ignore'>]</span><span class='ignore'>{</span><span class='ignore'>/</span><span class='ignore'>*</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>*</span><span class='ignore'>/</span><span class='ignore'>}</span><span class='ignore'>,</span><br>
	<span class='ignore'>commentstyle</span><span class='ignore'>=</span><span class='exclcmd'>\color</span><span class='ignore'>{</span><span class='ignore'>purple</span><span class='ignore'>}</span><span class='exclcmd'>\ttfamily</span><span class='ignore'>,</span><br>
	<span class='ignore'>stringstyle</span><span class='ignore'>=</span><span class='exclcmd'>\color</span><span class='ignore'>{</span><span class='ignore'>red</span><span class='ignore'>}</span><span class='exclcmd'>\ttfamily</span><span class='ignore'>,</span><br>
	<span class='ignore'>morestring</span><span class='ignore'>=</span><span class='ignore'>[</span><span class='ignore'>b</span><span class='ignore'>]</span><span class='ignore'>'</span><span class='ignore'>,</span><br>
	<span class='ignore'>morestring</span><span class='ignore'>=</span><span class='ignore'>[</span><span class='ignore'>b</span><span class='ignore'>]</span><span class='ignore'>"</span><br>
<span class='ignore'>}</span><br>
<br>
<span class='exclcmd'>\lstset</span><span class='ignore'>{</span><br>
	<span class='ignore'>language</span><span class='ignore'>=</span><span class='ignore'>Typescript</span><span class='ignore'>,</span><br>
	<span class='ignore'>backgroundcolor</span><span class='ignore'>=</span><span class='exclcmd'>\color</span><span class='ignore'>{</span><span class='ignore'>cverbbg</span><span class='ignore'>}</span><span class='ignore'>,</span><br>
	<span class='ignore'>extendedchars</span><span class='ignore'>=</span><span class='ignore'>true</span><span class='ignore'>,</span><br>
	<span class='ignore'>basicstyle</span><span class='ignore'>=</span><span class='exclcmd'>\footnotesize</span><span class='exclcmd'>\ttfamily</span><span class='ignore'>,</span><br>
	<span class='ignore'>showstringspaces</span><span class='ignore'>=</span><span class='ignore'>false</span><span class='ignore'>,</span><br>
	<span class='ignore'>showspaces</span><span class='ignore'>=</span><span class='ignore'>false</span><span class='ignore'>,</span><br>
	<span class='ignore'>numbers</span><span class='ignore'>=</span><span class='ignore'>left</span><span class='ignore'>,</span><br>
	<span class='ignore'>numberstyle</span><span class='ignore'>=</span><span class='exclcmd'>\footnotesize</span><span class='ignore'>,</span><br>
	<span class='ignore'>numbersep</span><span class='ignore'>=</span><span class='ignore'>9pt</span><span class='ignore'>,</span><br>
	<span class='ignore'>tabsize</span><span class='ignore'>=</span><span class='ignore'>2</span><span class='ignore'>,</span><br>
	<span class='ignore'>breaklines</span><span class='ignore'>=</span><span class='ignore'>true</span><span class='ignore'>,</span><br>
	<span class='ignore'>showtabs</span><span class='ignore'>=</span><span class='ignore'>false</span><span class='ignore'>,</span><br>
	<span class='ignore'>captionpos</span><span class='ignore'>=</span><span class='ignore'>b</span><br>
<span class='ignore'>}</span><br>
<br>
<br>
<span class='exclcmd'>\definecolor</span><span class='ignore'>{</span><span class='ignore'>cverbbg</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>gray</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0.85</span><span class='ignore'>}</span><br>
<span class='cmd'>\newenvironment</span><span class='ignore'>{</span><span class='ignore'>cverbatim</span><span class='ignore'>}</span><br>
 <span class='ignore'>{</span><span class='ignore'>\SaveVerbatim</span><span class='ignore'>{</span><span class='ignore'>cverb</span><span class='ignore'>}</span><span class='ignore'>}</span><br>
 <span class='ignore'>{</span><span class='ignore'>\endSaveVerbatim</span><br>
&nbsp; <span class='ignore'>\flushleft</span><span class='ignore'>\fboxrule</span><span class='ignore'>=</span><span class='ignore'>0pt</span><span class='ignore'>\fboxsep</span><span class='ignore'>=</span><span class='ignore'>.</span><span class='ignore'>5em</span><br>
&nbsp; <span class='ignore'>\colorbox</span><span class='ignore'>{</span><span class='ignore'>cverbbg</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>\BUseVerbatim</span><span class='ignore'>{</span><span class='ignore'>cverb</span><span class='ignore'>}</span><span class='ignore'>}</span><span class='comment'>%</span><br>
&nbsp; <span class='ignore'>\endflushleft</span><br>
<span class='ignore'>}</span><br>
<span class='cmd'>\newenvironment</span><span class='ignore'>{</span><span class='ignore'>lcverbatim</span><span class='ignore'>}</span><br>
 <span class='ignore'>{</span><span class='ignore'>\SaveVerbatim</span><span class='ignore'>{</span><span class='ignore'>cverb</span><span class='ignore'>}</span><span class='ignore'>}</span><br>
 <span class='ignore'>{</span><span class='ignore'>\endSaveVerbatim</span><br>
&nbsp; <span class='ignore'>\flushleft</span><span class='ignore'>\fboxrule</span><span class='ignore'>=</span><span class='ignore'>0pt</span><span class='ignore'>\fboxsep</span><span class='ignore'>=</span><span class='ignore'>.</span><span class='ignore'>5em</span><br>
&nbsp; <span class='ignore'>\colorbox</span><span class='ignore'>{</span><span class='ignore'>cverbbg</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='comment'>%</span><br>
&nbsp; &nbsp; <span class='ignore'>\makebox</span><span class='ignore'>[</span><span class='ignore'>\dimexpr</span><span class='ignore'>\linewidth</span><span class='ignore'>-</span><span class='ignore'>2</span><span class='ignore'>\fboxsep</span><span class='ignore'>]</span><span class='ignore'>[</span><span class='ignore'>l</span><span class='ignore'>]</span><span class='ignore'>{</span><span class='ignore'>\BUseVerbatim</span><span class='ignore'>{</span><span class='ignore'>cverb</span><span class='ignore'>}</span><span class='ignore'>}</span><span class='comment'>%</span><br>
&nbsp; <span class='ignore'>}</span><br>
&nbsp; <span class='ignore'>\endflushleft</span><br>
<span class='ignore'>}</span><br>
<span class='cmd'>\newcommand</span><span class='ignore'>{</span><span class='ignore'>\ctexttt</span><span class='ignore'>}</span><span class='option'>[1]</span><span class='ignore'>{</span><span class='ignore'>\colorbox</span><span class='ignore'>{</span><span class='ignore'>cverbbg</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>\texttt</span><span class='ignore'>{</span><span class='ignore'>#</span><span class='ignore'>1</span><span class='ignore'>}</span><span class='ignore'>}</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\newverbcommand</span><span class='ignore'>{</span><span class='exclcmd'>\cverb</span><span class='ignore'>}</span><br>
&nbsp; <span class='ignore'>{</span><span class='exclcmd'>\setbox</span><span class='exclcmd'>\verbbox</span><span class='exclcmd'>\hbox</span><span class='exclcmd'>\bgroup</span><span class='ignore'>}</span><br>
&nbsp; <span class='ignore'>{</span><span class='exclcmd'>\egroup</span><span class='exclcmd'>\colorbox</span><span class='ignore'>{</span><span class='ignore'>cverbbg</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\box</span><span class='exclcmd'>\verbbox</span><span class='ignore'>}</span><span class='ignore'>}</span><br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
<span class='envir'>\begin</span><span class='envir'>{document}</span><br>
<br>
<br>
<br>
<br>
<span class='comment'>%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span><br>
<span class='comment'>% Title</span><br>
<br>
<br>
<span class='cmd'>\pagestyle</span><span class='ignore'>{</span><span class='ignore'>empty</span><span class='ignore'>}</span><br>
<br>
<span class='cmd'>\rightline</span><span class='ignore'>{</span><span class='cmd'>\LARGE</span> <span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Joshua</span> <span class='word'>Send</span><span class='ignore'>}</span><span class='ignore'>}</span><br>
<br>
<span class='cmd'>\vspace</span><span class='option'>*</span><span class='ignore'>{</span><span class='ignore'>60mm</span><span class='ignore'>}</span><br>
<span class='envir'>\begin</span><span class='envir'>{center}</span><br>
<span class='cmd'>\Huge</span><br>
<span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Conflict</span> <span class='word'>Free</span> <span class='word'>Document</span> <span class='word'>Editing</span> <span class='word'>with</span> <span class='word'>Different</span> <span class='word'>Technologies</span><span class='ignore'>}</span> <span class='cmd'>\\</span><span class='option'>[5mm]</span><br>
<span class='word'>Computer</span> <span class='word'>Science</span> <span class='word'>Tripos</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>Part</span> <span class='word'>II</span> <span class='cmd'>\\</span><span class='option'>[5mm]</span><br>
<span class='word'>Trinity</span> <span class='word'>Hall</span> <span class='cmd'>\\</span><span class='option'>[5mm]</span><br>
<span class='cmd'>\today</span>  <span class='comment'>% today's date</span><br>
<span class='envir'>\end</span><span class='envir'>{center}</span><br>
<br>
<span class='comment'>%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span><br>
<span class='comment'>% Proforma, table of contents and list of figures</span><br>
<br>
<span class='cmd'>\pagestyle</span><span class='ignore'>{</span><span class='ignore'>plain</span><span class='ignore'>}</span><br>
<br>
<span class='cmd'>\chapter</span><span class='option'>*</span><span class='ignore'>{</span><span class='hword'>Proforma</span><span class='ignore'>}</span><br>
<br>
<span class='ignore'>{</span><span class='cmd'>\large</span><br>
<span class='envir'>\begin</span><span class='envir'>{tabular}</span><span class='ignore'>{</span><span class='ignore'>ll</span><span class='ignore'>}</span><br>
<span class='ignore'>Name</span><span class='ignore'>:</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class='ignore'>&amp;</span> <span class='exclcmd'>\bf</span> <span class='ignore'>Joshua</span> <span class='ignore'>Send</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class='exclcmd'>\\</span><br>
<span class='ignore'>College</span><span class='ignore'>:</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='ignore'>&amp;</span> <span class='exclcmd'>\bf</span> <span class='ignore'>Trinity</span> <span class='ignore'>Hall</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class='exclcmd'>\\</span><br>
<span class='ignore'>Project</span> <span class='ignore'>Title</span><span class='ignore'>:</span>&nbsp; &nbsp; &nbsp; <span class='ignore'>&amp;</span> <span class='exclcmd'>\bf</span> <span class='ignore'>Conflict</span> <span class='ignore'>Free</span> <span class='ignore'>Document</span> <span class='ignore'>Editing</span> <span class='ignore'>with</span> <span class='ignore'>Different</span> <span class='ignore'>Technologies</span> <span class='exclcmd'>\\</span><br>
<span class='ignore'>Examination</span><span class='ignore'>:</span>&nbsp; &nbsp; &nbsp; &nbsp; <span class='ignore'>&amp;</span> <span class='exclcmd'>\bf</span> <span class='ignore'>Computer</span> <span class='ignore'>Science</span> <span class='ignore'>Tripos</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='ignore'>Part</span> <span class='ignore'>II</span><span class='ignore'>,</span> <span class='ignore'>June</span> <span class='ignore'>2017</span>&nbsp; <span class='exclcmd'>\\</span><br>
<span class='ignore'>Word</span> <span class='ignore'>Count</span><span class='ignore'>:</span>&nbsp; &nbsp; &nbsp; &nbsp;  <span class='ignore'>&amp;</span> <span class='exclcmd'>\bf</span> <span class='ignore'>1587</span><span class='exclcmd'>\footnotemark</span><span class='option'>[1]</span>			<span class='exclcmd'>\\</span><br>
<span class='ignore'>Project</span> <span class='ignore'>Originator</span><span class='ignore'>:</span> <span class='ignore'>&amp;</span> <span class='ignore'>Joshua</span> <span class='ignore'>Send</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='exclcmd'>\\</span><br>
<span class='ignore'>Supervisor</span><span class='ignore'>:</span>&nbsp; &nbsp; &nbsp; &nbsp;  <span class='ignore'>&amp;</span> <span class='ignore'>Stephan</span> <span class='ignore'>Kollmann</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='exclcmd'>\\</span> <br>
<span class='envir'>\end</span><span class='envir'>{tabular}</span><br>
<span class='ignore'>}</span><br>
<span class='cmd'>\footnotetext</span><span class='option'>[1]</span><span class='ignore'>{</span><span class='oword'>This</span> <span class='oword'>word</span> <span class='oword'>count</span> <span class='oword'>was</span> <span class='oword'>computed</span><br>
<span class='oword'>by</span> <span class='cmd'>\texttt</span><span class='ignore'>{</span><span class='oword'>detex</span> <span class='oword'>diss.tex</span> <span class='ignore'>|</span> <span class='oword'>tr</span> <span class='ignore'>-</span><span class='oword'>cd</span> <span class='ignore'>'</span><span class='oword'>0-9A-Za-z</span> <span class='mathgroup'>$</span><span class='mathcmd'>\tt</span><span class='mathcmd'>\backslash</span><span class='mathgroup'>$</span><span class='oword'>n</span><span class='ignore'>'</span> <span class='ignore'>|</span> <span class='oword'>wc</span> <span class='ignore'>-</span><span class='oword'>w</span><span class='ignore'>}</span><br>
<span class='ignore'>}</span><br>
<span class='cmd'>\stepcounter</span><span class='ignore'>{</span><span class='ignore'>footnote</span><span class='ignore'>}</span><br>
<br>
<br>
<span class='cmd'>\section</span><span class='option'>*</span><span class='ignore'>{</span><span class='hword'>Original</span> <span class='hword'>Aims</span> <span class='hword'>of</span> <span class='hword'>the</span> <span class='hword'>Project</span><span class='ignore'>}</span><br>
<br>
<br>
<span class='word'>TODO</span><span class='cmd'>\footnote</span><span class='ignore'>{</span><span class='oword'>A</span> <span class='oword'>normal</span> <span class='oword'>footnote</span> <span class='oword'>without</span> <span class='oword'>the</span><br>
<span class='oword'>complication</span> <span class='oword'>of</span> <span class='oword'>being</span> <span class='oword'>in</span> <span class='oword'>a</span> <span class='oword'>table</span><span class='ignore'>.</span><span class='ignore'>}</span> <br>
<br>
<br>
<span class='cmd'>\section</span><span class='option'>*</span><span class='ignore'>{</span><span class='hword'>Work</span> <span class='hword'>Completed</span><span class='ignore'>}</span><br>
<br>
<span class='word'>TODO</span><br>
<br>
<span class='cmd'>\section</span><span class='option'>*</span><span class='ignore'>{</span><span class='hword'>Special</span> <span class='hword'>Difficulties</span><span class='ignore'>}</span><br>
<br>
<span class='word'>TODO</span><br>
 <br>
<span class='cmd'>\newpage</span><br>
<span class='cmd'>\section</span><span class='option'>*</span><span class='ignore'>{</span><span class='hword'>Declaration</span><span class='ignore'>}</span><br>
<br>
<span class='word'>I</span><span class='ignore'>,</span> <span class='word'>Joshua</span> <span class='word'>Send</span> <span class='word'>of</span> <span class='word'>Trinity</span> <span class='word'>Hall</span><span class='ignore'>,</span> <span class='word'>being</span> <span class='word'>a</span> <span class='word'>candidate</span> <span class='word'>for</span> <span class='word'>Part</span> <span class='word'>II</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>Computer</span><br>
<span class='word'>Science</span> <span class='word'>Tripos</span> <span class='ignore'>[</span><span class='word'>or</span> <span class='word'>the</span> <span class='word'>Diploma</span> <span class='word'>in</span> <span class='word'>Computer</span> <span class='word'>Science</span><span class='ignore'>]</span><span class='ignore'>,</span> <span class='word'>hereby</span> <span class='word'>declare</span><br>
<span class='word'>that</span> <span class='word'>this</span> <span class='word'>dissertation</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>work</span> <span class='word'>described</span> <span class='word'>in</span> <span class='word'>it</span> <span class='word'>are</span> <span class='word'>my</span> <span class='word'>own</span> <span class='word'>work</span><span class='ignore'>,</span><br>
<span class='word'>unaided</span> <span class='word'>except</span> <span class='word'>as</span> <span class='word'>may</span> <span class='word'>be</span> <span class='word'>specified</span> <span class='word'>below</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>dissertation</span><br>
<span class='word'>does</span> <span class='word'>not</span> <span class='word'>contain</span> <span class='word'>material</span> <span class='word'>that</span> <span class='word'>has</span> <span class='word'>already</span> <span class='word'>been</span> <span class='word'>used</span> <span class='word'>to</span> <span class='word'>any</span> <span class='word'>substantial</span><br>
<span class='word'>extent</span> <span class='word'>for</span> <span class='word'>a</span> <span class='word'>comparable</span> <span class='word'>purpose</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\bigskip</span><br>
<span class='cmd'>\leftline</span><span class='ignore'>{</span><span class='word'>Signed</span> <span class='word'>TODO</span> <span class='ignore'>[</span><span class='word'>signature</span><span class='ignore'>]</span><span class='ignore'>}</span><br>
<br>
<span class='cmd'>\medskip</span><br>
<span class='cmd'>\leftline</span><span class='ignore'>{</span><span class='word'>Date</span> <span class='word'>TODO</span> <span class='ignore'>[</span><span class='word'>date</span><span class='ignore'>]</span><span class='ignore'>}</span><br>
<br>
<span class='cmd'>\tableofcontents</span><br>
<br>
<span class='cmd'>\listoffigures</span><br>
<br>
<span class='cmd'>\newpage</span><br>
<span class='cmd'>\section</span><span class='option'>*</span><span class='ignore'>{</span><span class='hword'>Acknowledgements</span><span class='ignore'>}</span><br>
<br>
<span class='word'>TODO</span><br>
<br>
<span class='comment'>%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span><br>
<span class='comment'>% now for the chapters</span><br>
<br>
<span class='cmd'>\pagestyle</span><span class='ignore'>{</span><span class='ignore'>headings</span><span class='ignore'>}</span><br>
<br>
<span class='cmd'>\chapter</span><span class='ignore'>{</span><span class='hword'>Introduction</span><span class='ignore'>}</span><br>
<br>
<span class='word'>Real</span> <span class='word'>time</span> <span class='word'>interaction</span> <span class='word'>between</span> <span class='word'>users</span> <span class='word'>is</span> <span class='word'>becoming</span> <span class='word'>an</span> <span class='word'>increasingly</span> <span class='word'>important</span> <span class='word'>feature</span> <span class='word'>to</span> <span class='word'>many</span> <span class='word'>applications</span><span class='ignore'>,</span> <span class='word'>from</span> <span class='word'>word</span> <span class='word'>processing</span> <span class='word'>to</span> <span class='word'>CAD</span> <span class='word'>to</span> <span class='word'>social</span> <span class='word'>networking</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>dissertation</span> <span class='word'>examines</span> <span class='word'>trade</span> <span class='word'>offs</span> <span class='word'>that</span> <span class='word'>should</span> <span class='word'>be</span> <span class='word'>considered</span> <span class='word'>when</span> <span class='word'>applying</span> <span class='word'>the</span> <span class='word'>prevailing</span> <span class='word'>technologies</span> <span class='word'>that</span> <span class='word'>enable</span> <span class='word'>concurrent</span> <span class='word'>use</span> <span class='word'>of</span> <span class='word'>data</span> <span class='word'>in</span> <span class='word'>applications</span><span class='ignore'>.</span> <span class='word'>More</span> <span class='word'>specifically</span><span class='ignore'>,</span> <span class='word'>this</span> <span class='word'>project</span> <span class='word'>implements</span> <span class='word'>and</span> <span class='word'>analyzes</span> <span class='word'>a</span> <span class='word'>concurrent</span> <span class='word'>text</span> <span class='word'>editor</span> <span class='word'>based</span> <span class='word'>on</span> <span class='word'>Convergent</span> <span class='word'>Replicated</span> <span class='word'>Data</span> <span class='word'>Types</span> <span class='ignore'>(</span><span class='word'>also</span> <span class='word'>known</span> <span class='word'>as</span> <span class='word'>Conflict-free</span> <span class='word'>Replicated</span> <span class='word'>Data</span> <span class='word'>Types</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>CRDT</span> <span class='word'>in</span> <span class='word'>short</span><span class='ignore'>,</span> <span class='word'>in</span> <span class='word'>comparison</span> <span class='word'>to</span> <span class='word'>an</span> <span class='word'>existing</span> <span class='word'>editor</span> <span class='word'>exploiting</span> <span class='word'>Operational</span> <span class='word'>Transformations</span> <span class='ignore'>(</span><span class='word'>OT</span><span class='ignore'>)</span> <span class='word'>as</span> <span class='word'>its</span> <span class='word'>core</span> <span class='word'>technology</span><span class='ignore'>.</span><br>
<br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Motivation</span><span class='ignore'>}</span><br>
<br>
<span class='word'>Realtime</span> <span class='word'>collaborative</span> <span class='word'>editing</span> <span class='word'>was</span> <span class='word'>first</span> <span class='word'>motivated</span> <span class='word'>by</span> <span class='word'>a</span> <span class='word'>demonstration</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>Mother</span> <span class='word'>of</span> <span class='word'>All</span> <span class='word'>Demos</span> <span class='word'>by</span> <span class='word'>Douglas</span> <span class='word'>Engelbart</span> <span class='word'>in</span> <span class='word'>1968</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>MotherDemo</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>From</span> <span class='word'>that</span> <span class='word'>time</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>took</span> <span class='word'>several</span> <span class='word'>decades</span> <span class='word'>for</span> <span class='word'>implementations</span> <span class='word'>of</span> <span class='word'>such</span> <span class='word'>editing</span> <span class='word'>systems</span> <span class='word'>to</span> <span class='word'>appear</span><span class='ignore'>.</span> <span class='word'>Early</span> <span class='word'>products</span> <span class='word'>were</span> <span class='word'>released</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>1990's</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>1989</span> <span class='word'>paper</span> <span class='word'>by</span> <span class='word'>Gibbs</span> <span class='word'>and</span> <span class='word'>Ellis</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>Ellis1989</span><span class='ignore'>}</span> <span class='word'>marked</span> <span class='word'>the</span> <span class='word'>beginning</span> <span class='word'>of</span> <span class='word'>extended</span> <span class='word'>research</span> <span class='word'>into</span> <span class='word'>operational</span> <span class='word'>transformations</span><span class='ignore'>.</span> <span class='word'>Due</span> <span class='word'>to</span> <span class='word'>almost</span> <span class='word'>20</span> <span class='word'>years</span> <span class='word'>of</span> <span class='word'>research</span><span class='ignore'>,</span> <span class='word'>OT</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>relatively</span> <span class='word'>developed</span> <span class='word'>field</span> <span class='word'>and</span> <span class='word'>has</span> <span class='word'>been</span> <span class='word'>applied</span> <span class='word'>to</span> <span class='word'>products</span> <span class='word'>that</span> <span class='word'>are</span> <span class='word'>commonly</span> <span class='word'>used</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>most</span> <span class='word'>familiar</span> <span class='word'>of</span> <span class='word'>these</span> <span class='word'>is</span> <span class='word'>likely</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>Google</span> <span class='word'>Docs</span><span class='cmd'>\footnote</span><span class='ignore'>{</span><span class='oword'>https</span><span class='ignore'>:</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='oword'>docs.google.com</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>seems</span> <span class='word'>to</span> <span class='word'>behave</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>predictable</span> <span class='word'>and</span> <span class='word'>well</span> <span class='word'>understood</span> <span class='word'>way</span><span class='ignore'>.</span> <span class='word'>One</span> <span class='word'>reason</span> <span class='word'>Google</span> <span class='word'>Docs</span> <span class='word'>is</span> <span class='word'>so</span> <span class='word'>widely</span> <span class='word'>used</span> <span class='word'>might</span> <span class='word'>be</span> <span class='word'>that</span> <span class='word'>it</span> <span class='word'>follows</span> <span class='word'>users</span><span class='ignore'>'</span> <span class='word'>expectations</span> <span class='word'>for</span> <span class='word'>how</span> <span class='word'>a</span> <span class='word'>concurrent</span><span class='ignore'>,</span> <span class='word'>multi-user</span> <span class='word'>document</span> <span class='word'>editor</span> <span class='word'>should</span> <span class='word'>work</span><span class='ignore'>.</span> <span class='word'>Importantly</span><span class='ignore'>,</span> <span class='word'>this</span> <span class='word'>includes</span> <span class='word'>lock-free</span> <span class='word'>editing</span> <span class='word'>and</span> <span class='word'>independence</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>fast</span> <span class='word'>connection</span><span class='ignore'>,</span> <span class='word'>no</span> <span class='word'>loss</span> <span class='word'>of</span> <span class='word'>data</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>guarantee</span> <span class='word'>that</span> <span class='word'>everyone</span> <span class='word'>ends</span> <span class='word'>up</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>document</span> <span class='word'>when</span> <span class='word'>changes</span> <span class='word'>are</span> <span class='word'>complete</span><span class='ignore'>.</span> <span class='word'>These</span> <span class='word'>are</span> <span class='word'>in</span> <span class='word'>fact</span> <span class='word'>the</span> <span class='word'>goals</span> <span class='word'>around</span> <span class='word'>which</span> <span class='word'>OT</span> <span class='word'>and</span> <span class='word'>CRDTs</span> <span class='word'>have</span> <span class='word'>developed</span><span class='ignore'>.</span><br>
<br>
<span class='word'>The</span> <span class='word'>convergence</span><span class='ignore'>,</span> <span class='word'>or</span> <span class='word'>consistency</span><span class='ignore'>,</span> <span class='word'>property</span> <span class='word'>above</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>hardest</span> <span class='word'>to</span> <span class='word'>provide</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>easy</span> <span class='word'>to</span> <span class='word'>create</span> <span class='word'>a</span> <span class='word'>system</span> <span class='word'>where</span> <span class='word'>the</span> <span class='word'>last</span> <span class='word'>writer</span> <span class='word'>wins</span><span class='ignore'>,</span> <span class='word'>but</span> <span class='word'>data</span> <span class='word'>is</span> <span class='word'>lost</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>process</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>a</span> <span class='word'>distributed</span> <span class='word'>system</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>a</span> <span class='word'>shared</span> <span class='word'>text</span> <span class='word'>editor</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>CAP</span> <span class='word'>theorem</span> <span class='word'>tells</span> <span class='word'>us</span> <span class='word'>we</span> <span class='word'>cannot</span> <span class='word'>guarantee</span> <span class='word'>all</span> <span class='word'>three</span> <span class='word'>of</span> <span class='word'>consistency</span><span class='ignore'>,</span> <span class='word'>availability</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>partition-tolerance</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>Gilbert2005</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>However</span><span class='ignore'>,</span> <span class='word'>if</span> <span class='word'>we</span> <span class='word'>forgo</span> <span class='word'>strong</span> <span class='word'>consistency</span> <span class='word'>guarantees</span> <span class='word'>and</span> <span class='word'>settle</span> <span class='word'>for</span> <span class='word'>eventual</span> <span class='word'>consistency</span><span class='ignore'>,</span> <span class='word'>we</span> <span class='word'>are</span> <span class='word'>able</span> <span class='word'>provide</span> <span class='word'>all</span> <span class='word'>three</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>zeller2014</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>As</span> <span class='word'>we</span> <span class='word'>will</span> <span class='word'>see</span><span class='ignore'>,</span> <span class='word'>achieving</span> <span class='word'>eventual</span> <span class='word'>consistency</span> <span class='word'>is</span> <span class='word'>non-trivial</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>two</span> <span class='word'>prevailing</span> <span class='word'>approaches</span> <span class='word'>that</span> <span class='word'>enable</span> <span class='word'>it</span><span class='ignore'>,</span> <span class='word'>operational</span> <span class='word'>transformations</span> <span class='word'>and</span> <span class='word'>commutative</span> <span class='word'>replicated</span> <span class='word'>data</span> <span class='word'>structures</span><span class='ignore'>,</span> <span class='word'>are</span> <span class='word'>discussed</span> <span class='word'>in</span> <span class='word'>detail</span> <span class='word'>the</span> <span class='word'>Preparation</span> <span class='word'>section</span><span class='ignore'>.</span><br>
<br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Overview</span><span class='ignore'>}</span><br>
<span class='word'>This</span> <span class='word'>project</span> <span class='word'>aims</span> <span class='word'>to</span> <span class='word'>examine</span> <span class='word'>the</span> <span class='word'>trade-offs</span> <span class='word'>made</span> <span class='word'>when</span> <span class='word'>implementing</span> <span class='word'>highly</span> <span class='word'>distributed</span> <span class='word'>and</span> <span class='word'>concurrent</span> <span class='word'>document</span> <span class='word'>editing</span> <span class='word'>with</span> <span class='word'>Operational</span> <span class='word'>Transformations</span> <span class='ignore'>(</span><span class='word'>OT</span><span class='ignore'>)</span> <span class='word'>versus</span> <span class='word'>with</span> <span class='word'>Convergent</span> <span class='word'>Replicated</span> <span class='word'>Data</span> <span class='word'>Types</span> <span class='ignore'>(</span><span class='word'>CRDTs</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>To</span> <span class='word'>do</span> <span class='word'>this</span> <span class='word'>I</span> <span class='word'>have</span> <span class='word'>designed</span> <span class='word'>experiments</span> <span class='word'>which</span> <span class='word'>expose</span> <span class='word'>statistics</span> <span class='word'>about</span> <span class='word'>network</span> <span class='word'>and</span> <span class='word'>processor</span> <span class='word'>usage</span><span class='ignore'>,</span> <span class='word'>memory</span> <span class='word'>consumption</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>scalability</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>run</span> <span class='word'>these</span> <span class='word'>experiments</span> <span class='word'>on</span> <span class='word'>an</span> <span class='word'>environment</span> <span class='word'>built</span> <span class='word'>around</span> <span class='word'>the</span> <span class='word'>open</span> <span class='word'>source</span> <span class='word'>library</span> <span class='word'>ShareJS</span> <span class='ignore'>(</span><span class='word'>which</span> <span class='word'>implements</span> <span class='word'>OT</span><span class='ignore'>)</span> <span class='word'>along</span> <span class='word'>with</span> <span class='word'>a</span> <span class='word'>comparative</span> <span class='word'>system</span> <span class='word'>I</span> <span class='word'>created</span> <span class='word'>based</span> <span class='word'>on</span> <span class='word'>a</span> <span class='word'>specific</span> <span class='word'>CRDT</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>system</span> <span class='word'>meets</span> <span class='word'>the</span> <span class='word'>originally</span> <span class='word'>proposed</span> <span class='word'>goals</span> <span class='word'>of</span> <span class='word'>implementing</span> <span class='word'>a</span> <span class='word'>concurrent</span> <span class='word'>text</span> <span class='word'>editor</span> <span class='word'>based</span> <span class='word'>on</span> <span class='word'>CRDTs</span> <span class='word'>which</span> <span class='word'>passes</span> <span class='word'>various</span> <span class='word'>tests</span> <span class='word'>for</span> <span class='word'>correctness</span><span class='ignore'>;</span> <span class='word'>quantitative</span> <span class='word'>analysis</span> <span class='word'>is</span> <span class='word'>presented</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>Evaluation</span> <span class='word'>section</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span><span class='ignore'>.</span><br>
<br>
<span class='word'>The</span> <span class='word'>custom</span> <span class='word'>CRDT</span> <span class='word'>on</span> <span class='word'>which</span> <span class='word'>the</span> <span class='word'>collaborative</span> <span class='word'>text</span> <span class='word'>editor</span> <span class='word'>is</span> <span class='word'>based</span> <span class='word'>is</span> <span class='word'>described</span> <span class='word'>in</span> <span class='word'>detail</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>Implementation</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span> <span class='word'>section</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>contrast</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>OT-based</span> <span class='word'>library</span> <span class='word'>ShareJS</span><span class='ignore'>,</span> <span class='word'>my</span> <span class='word'>system</span> <span class='word'>also</span> <span class='word'>runs</span> <span class='word'>on</span> <span class='word'>a</span> <span class='word'>peer</span> <span class='word'>to</span> <span class='word'>peer</span> <span class='word'>network</span> <span class='word'>architecture</span> <span class='word'>instead</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>traditional</span> <span class='word'>client-server</span> <span class='word'>model</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>lack</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>server</span> <span class='word'>reduces</span> <span class='word'>the</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>stateful</span> <span class='word'>parts</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>system</span><span class='ignore'>,</span> <span class='word'>at</span> <span class='word'>the</span> <span class='word'>expense</span> <span class='word'>of</span> <span class='word'>more</span> <span class='word'>complex</span> <span class='word'>networking</span><span class='ignore'>.</span> <span class='word'>I</span> <span class='word'>managed</span> <span class='word'>this</span> <span class='word'>complexity</span> <span class='word'>by</span> <span class='word'>using</span> <span class='word'>a</span> <span class='word'>simulated</span> <span class='word'>peer</span> <span class='word'>to</span> <span class='word'>peer</span> <span class='word'>architecture</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>simulation</span> <span class='word'>allows</span> <span class='word'>me</span> <span class='word'>to</span> <span class='word'>control</span> <span class='word'>the</span> <span class='word'>precise</span> <span class='word'>topology</span><span class='ignore'>,</span> <span class='word'>link</span> <span class='word'>latencies</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>protocol</span> <span class='word'>and</span> <span class='word'>explore</span> <span class='word'>advantages</span> <span class='word'>and</span> <span class='word'>disadvantages</span> <span class='word'>of</span> <span class='word'>using</span> <span class='word'>a</span> <span class='word'>P2P</span> <span class='word'>approach</span><span class='ignore'>.</span> <br>
<br>
<span class='word'>One</span> <span class='word'>extension</span><span class='ignore'>,</span> <span class='word'>adding</span> <span class='word'>undo</span> <span class='word'>functionality</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>CRDT</span><span class='ignore'>,</span> <span class='word'>was</span> <span class='word'>also</span> <span class='word'>completed</span><span class='ignore'>.</span> <span class='word'>I</span> <span class='word'>developed</span> <span class='word'>two</span> <span class='word'>approaches</span> <span class='word'>which</span> <span class='word'>implement</span> <span class='word'>different</span> <span class='word'>semantics</span> <span class='word'>and</span> <span class='word'>consistency</span> <span class='word'>models</span> <span class='word'>and</span> <span class='word'>were</span> <span class='word'>developed</span> <span class='word'>originally</span><span class='ignore'>,</span> <span class='word'>before</span> <span class='word'>reading</span> <span class='word'>related</span> <span class='word'>literature</span><span class='ignore'>.</span> <span class='word'>However</span><span class='ignore'>,</span> <span class='word'>one</span> <span class='word'>paper</span><span class='ignore'>,</span> <span class='word'>Logoot-Undo</span><span class='ignore'>,</span> <span class='word'>takes</span> <span class='word'>a</span> <span class='word'>very</span> <span class='word'>similar</span> <span class='word'>approach</span> <span class='word'>and</span> <span class='word'>is</span> <span class='word'>discussed</span> <span class='word'>briefly</span> <span class='word'>below</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Related</span> <span class='hword'>Work</span><span class='ignore'>}</span><br>
<br>
<span class='word'>Part</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>challenge</span> <span class='word'>of</span> <span class='word'>this</span> <span class='word'>project</span> <span class='word'>was</span> <span class='word'>to</span> <span class='word'>develop</span> <span class='word'>my</span> <span class='word'>CRDT</span> <span class='word'>and</span> <span class='word'>associated</span> <span class='word'>algorithms</span> <span class='word'>based</span> <span class='word'>only</span> <span class='word'>on</span> <span class='word'>an</span> <span class='word'>explanation</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>required</span> <span class='word'>functionality</span> <span class='word'>provided</span> <span class='word'>by</span> <span class='word'>Martin</span> <span class='word'>Kleppmann</span><span class='ignore'>.</span> <span class='word'>As</span> <span class='word'>a</span> <span class='word'>result</span><span class='ignore'>,</span> <span class='word'>my</span> <span class='word'>solution</span> <span class='word'>is</span> <span class='word'>not</span> <span class='word'>optimal</span> <span class='word'>in</span> <span class='word'>all</span> <span class='word'>aspects</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>could</span> <span class='word'>be</span> <span class='word'>improved</span> <span class='word'>upon</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>future</span><span class='ignore'>.</span> <span class='word'>Several</span> <span class='word'>possible</span> <span class='word'>optimizations</span> <span class='word'>are</span> <span class='word'>discussed</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>Implementation</span> <span class='word'>section</span> <span class='ignore'>[</span><span class='word'>TODO</span><span class='ignore'>,</span> <span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span><span class='ignore'>.</span> <span class='word'>It</span> <span class='word'>also</span> <span class='word'>falls</span> <span class='word'>into</span> <span class='word'>the</span> <span class='word'>class</span> <span class='word'>of</span> <span class='ignore'>`</span><span class='word'>tombstone</span><span class='ignore'>'</span> <span class='word'>CRDTs</span><span class='ignore'>,</span> <span class='word'>marking</span> <span class='word'>elements</span> <span class='word'>as</span> <span class='word'>deleted</span> <span class='word'>rather</span> <span class='word'>than</span> <span class='word'>fully</span> <span class='word'>removing</span> <span class='word'>them</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>forces</span> <span class='word'>the</span> <span class='word'>data</span> <span class='word'>structures</span> <span class='word'>to</span> <span class='word'>grow</span> <span class='word'>continuously</span> <span class='word'>over</span> <span class='word'>time</span> <span class='ignore'>[</span><span class='word'>perhaps</span> <span class='word'>put</span> <span class='word'>a</span> <span class='word'>mention</span> <span class='word'>of</span> <span class='word'>treedoc's</span> <span class='word'>commit</span> <span class='word'>protocol</span> <span class='word'>and</span> <span class='word'>and</span> <span class='word'>a</span> <span class='word'>reference</span> <span class='word'>to</span> <span class='word'>using</span> <span class='word'>vector</span> <span class='word'>clocks</span> <span class='word'>to</span> <span class='word'>remove</span> <span class='word'>tombstones</span><span class='ignore'>]</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>Other</span> <span class='word'>CRDTs</span> <span class='word'>are</span> <span class='ignore'>`</span><span class='word'>tombstone-free</span><span class='ignore'>'</span> <span class='word'>and</span> <span class='word'>do</span> <span class='word'>not</span> <span class='word'>suffer</span> <span class='word'>from</span> <span class='word'>this</span> <span class='word'>unbounded</span> <span class='word'>growth</span><span class='ignore'>.</span> <span class='word'>Existing</span> <span class='word'>CRDTs</span> <span class='word'>of</span> <span class='word'>both</span> <span class='word'>types</span> <span class='word'>are</span> <span class='word'>discussed</span> <span class='word'>here</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Treedoc</span><span class='ignore'>}</span><br>
<br>
<span class='word'>Treedoc</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>preguica2009</span><span class='ignore'>}</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>replicated</span> <span class='word'>text</span> <span class='word'>buffer</span><span class='ignore'>;</span> <span class='word'>an</span> <span class='word'>ordered</span> <span class='word'>set</span> <span class='word'>that</span> <span class='word'>supports</span> <span class='word'>insert-at</span> <span class='word'>and</span> <span class='word'>delete</span> <span class='word'>operations</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>CRDT</span> <span class='word'>gets</span> <span class='word'>its</span> <span class='word'>name</span> <span class='word'>from</span> <span class='word'>the</span> <span class='word'>tree</span> <span class='word'>structure</span> <span class='word'>used</span> <span class='word'>to</span> <span class='word'>encode</span> <span class='word'>identifiers</span> <span class='word'>and</span> <span class='word'>order</span> <span class='word'>elements</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>set</span><span class='ignore'>.</span> <span class='word'>Each</span> <span class='word'>node</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>tree</span> <span class='word'>contains</span> <span class='word'>at</span> <span class='word'>least</span> <span class='word'>one</span> <span class='word'>character</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>string</span> <span class='word'>contained</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>buffer</span> <span class='word'>is</span> <span class='word'>retried</span> <span class='word'>using</span> <span class='word'>infix</span> <span class='word'>traversal</span><span class='ignore'>.</span> <span class='word'>Each</span> <span class='word'>client</span> <span class='word'>has</span> <span class='word'>a</span> <span class='word'>copy</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>tree</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>can</span> <span class='word'>insert</span> <span class='word'>new</span> <span class='word'>nodes</span> <span class='word'>at</span> <span class='word'>any</span> <span class='word'>time</span><span class='ignore'>.</span> <span class='word'>Two</span> <span class='word'>concurrent</span> <span class='word'>inserts</span> <span class='word'>at</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>node</span> <span class='word'>are</span> <span class='word'>merged</span> <span class='word'>as</span> <span class='word'>two</span> <span class='ignore'>`</span><span class='word'>mini-nodes</span><span class='ignore'>'</span> <span class='word'>within</span> <span class='word'>one</span> <span class='word'>tree</span> <span class='word'>node</span><span class='ignore'>.</span> <span class='word'>Each</span> <span class='word'>insert</span> <span class='word'>is</span> <span class='word'>tagged</span> <span class='word'>with</span> <span class='word'>a</span> <span class='word'>unique</span> <span class='word'>client</span> <span class='word'>identifier</span> <span class='word'>which</span> <span class='word'>comes</span> <span class='word'>from</span> <span class='word'>an</span> <span class='word'>ordered</span> <span class='word'>space</span><span class='ignore'>.</span> <span class='word'>Using</span> <span class='word'>the</span> <span class='word'>identifier</span> <span class='word'>order</span> <span class='word'>in</span> <span class='word'>combination</span> <span class='word'>with</span> <span class='word'>infix</span> <span class='word'>traversal</span> <span class='word'>creates</span> <span class='word'>a</span> <span class='word'>total</span> <span class='word'>ordering</span> <span class='word'>over</span> <span class='word'>the</span> <span class='word'>characters</span> <span class='word'>contained</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>tree</span><span class='ignore'>.</span> <span class='word'>With</span> <span class='word'>the</span> <span class='word'>total</span> <span class='word'>order</span><span class='ignore'>,</span> <span class='word'>all</span> <span class='word'>clients</span> <span class='word'>with</span> <span class='word'>copies</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>tree</span> <span class='word'>will</span> <span class='word'>retrieve</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>string</span> <span class='word'>from</span> <span class='word'>their</span> <span class='word'>Treedoc</span><span class='ignore'>.</span> <span class='word'>Having</span> <span class='word'>a</span> <span class='word'>total</span> <span class='word'>order</span> <span class='word'>is</span> <span class='word'>an</span> <span class='word'>important</span> <span class='word'>property</span> <span class='word'>used</span> <span class='word'>to</span> <span class='word'>guarantee</span> <span class='word'>eventual</span> <span class='word'>consistency</span> <span class='word'>in</span> <span class='word'>CRDTs</span><span class='ignore'>.</span> <span class='word'>Using</span> <span class='word'>unique</span><span class='ignore'>,</span> <span class='word'>ordered</span> <span class='word'>client</span> <span class='word'>IDs</span> <span class='word'>to</span> <span class='word'>provide</span> <span class='word'>a</span> <span class='word'>total</span> <span class='word'>order</span> <span class='word'>in</span> <span class='word'>concurrent</span> <span class='word'>cases</span> <span class='word'>is</span> <span class='word'>common</span> <span class='word'>in</span> <span class='word'>CRDT</span> <span class='word'>design</span> <span class='word'>and</span> <span class='word'>indeed</span> <span class='word'>used</span> <span class='word'>in</span> <span class='word'>my</span> <span class='word'>own</span> <span class='word'>CRDT</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[htb]</span><br>
<span class='exclcmd'>\centering</span><br>
&nbsp;<span class='exclenv'>\begin</span><span class='exclenv'>{tabular}</span><span class='ignore'>{</span> <span class='ignore'>&gt;</span><span class='ignore'>{</span><span class='ignore'>\centering</span><span class='ignore'>}</span><span class='ignore'>m{6cm}</span> <span class='ignore'>&gt;</span><span class='ignore'>{</span><span class='ignore'>\centering</span><span class='ignore'>}</span><span class='ignore'>m{15mm}</span> <span class='ignore'>&gt;</span><span class='ignore'>{</span><span class='ignore'>\centering</span><span class='ignore'>\arraybackslash</span><span class='ignore'>}</span><span class='ignore'>m{6cm}</span> <span class='ignore'>}</span><br>
&nbsp;&nbsp;<span class='exclcmd'>\includegraphics</span><span class='option'>[width=1\linewidth]</span><span class='ignore'>{</span><span class='ignore'>figs</span><span class='ignore'>/</span><span class='ignore'>treedoc</span><span class='ignore'>_</span><span class='ignore'>1.eps</span><span class='ignore'>}</span>&nbsp; <span class='ignore'>&amp;</span><br>
&nbsp; &nbsp; <span class='exclmath'>$</span><span class='mathcmd'>\longrightarrow</span><span class='exclmath'>$</span>&nbsp; <span class='ignore'>&amp;</span><br>
&nbsp; &nbsp; <span class='exclcmd'>\includegraphics</span><span class='option'>[width=1\linewidth]</span><span class='ignore'>{</span><span class='ignore'>figs</span><span class='ignore'>/</span><span class='ignore'>treedoc</span><span class='ignore'>_</span><span class='ignore'>2.eps</span><span class='ignore'>}</span><br>
&nbsp; <span class='exclenv'>\end</span><span class='exclenv'>{tabular}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Concurrent</span> <span class='oword'>updates</span> <span class='oword'>to</span> <span class='oword'>the</span> <span class='oword'>same</span> <span class='oword'>node</span><span class='ignore'>.</span> <span class='oword'>In</span> <span class='oword'>the</span> <span class='oword'>first</span> <span class='oword'>state</span> <span class='ignore'>(</span><span class='oword'>left</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='oword'>client</span> <span class='oword'>1</span> <span class='oword'>has</span> <span class='oword'>written</span> <span class='oword'>the</span> <span class='oword'>string</span> <span class='ignore'>`</span><span class='oword'>Cambride</span><span class='ignore'>'</span> <span class='oword'>into</span> <span class='oword'>the</span> <span class='oword'>text</span> <span class='oword'>buffer</span><span class='ignore'>.</span> <span class='oword'>The</span> <span class='oword'>systems</span> <span class='oword'>settles</span> <span class='oword'>and</span> <span class='oword'>client</span> <span class='oword'>2</span> <span class='oword'>also</span> <span class='oword'>sees</span> <span class='oword'>the</span> <span class='oword'>string</span> <span class='ignore'>`</span><span class='oword'>Cambride</span><span class='ignore'>'</span><span class='ignore'>.</span> <span class='oword'>Both</span> <span class='oword'>clients</span> <span class='oword'>1</span> <span class='oword'>and</span> <span class='oword'>2</span> <span class='oword'>realize</span> <span class='oword'>there</span> <span class='oword'>is</span> <span class='oword'>a</span> <span class='oword'>missing</span> <span class='oword'>character</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='oword'>client</span> <span class='oword'>1</span> <span class='oword'>inserts</span> <span class='ignore'>`</span><span class='oword'>g</span><span class='ignore'>'</span> <span class='oword'>and</span> <span class='oword'>client</span> <span class='oword'>2</span> <span class='oword'>mistakenly</span> <span class='oword'>inserts</span> <span class='ignore'>'</span><span class='oword'>h</span><span class='ignore'>'</span><span class='ignore'>.</span> <span class='oword'>As</span> <span class='oword'>both</span> <span class='oword'>create</span> <span class='oword'>the</span> <span class='oword'>same</span> <span class='oword'>node</span> <span class='oword'>in</span> <span class='oword'>the</span> <span class='oword'>tree</span><span class='ignore'>,</span> <span class='oword'>the</span> <span class='oword'>nodes</span> <span class='oword'>are</span> <span class='oword'>merged</span> <span class='oword'>as</span> <span class='oword'>mini-nodes</span> <span class='oword'>into</span> <span class='oword'>a</span> <span class='oword'>larger</span> <span class='oword'>node</span><span class='ignore'>.</span> <span class='oword'>Both</span> <span class='oword'>clients</span> <span class='oword'>now</span> <span class='oword'>see</span> <span class='oword'>the</span> <span class='oword'>string</span> <span class='ignore'>'</span><span class='oword'>Cambridghe</span><span class='ignore'>'</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>treedoc</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<span class='word'>Deletes</span> <span class='word'>in</span> <span class='word'>Treedoc</span> <span class='word'>are</span> <span class='word'>handled</span> <span class='word'>by</span> <span class='word'>marking</span> <span class='word'>a</span> <span class='word'>node</span> <span class='word'>as</span> <span class='word'>deleted</span> <span class='ignore'>(</span><span class='word'>but</span> <span class='word'>the</span> <span class='word'>node</span> <span class='word'>remains</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>structure</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>Thus</span> <span class='word'>Treedoc</span> <span class='word'>falls</span> <span class='word'>into</span> <span class='word'>the</span> <span class='word'>class</span> <span class='word'>of</span> <span class='ignore'>`</span><span class='word'>tombstone</span><span class='ignore'>'</span> <span class='word'>CRDTs</span><span class='ignore'>.</span> <span class='word'>As</span> <span class='word'>deletes</span> <span class='word'>and</span> <span class='word'>inserts</span> <span class='word'>are</span> <span class='word'>not</span> <span class='word'>guaranteed</span> <span class='word'>to</span> <span class='word'>result</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>balanced</span> <span class='word'>tree</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>authors</span> <span class='word'>propose</span> <span class='word'>an</span> <span class='word'>expensive</span> <span class='word'>commitment</span> <span class='word'>protocol</span> <span class='word'>to</span> <span class='word'>rebalance</span> <span class='word'>it</span><span class='ignore'>.</span> <span class='word'>Not</span> <span class='word'>only</span> <span class='word'>is</span> <span class='word'>this</span> <span class='word'>inefficient</span><span class='ignore'>,</span> <span class='word'>but</span> <span class='word'>also</span> <span class='word'>rather</span> <span class='word'>contrary</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>spirit</span> <span class='word'>of</span> <span class='word'>CRDTs</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Logoot</span><span class='ignore'>}</span><br>
<br>
<span class='word'>Logoot</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>weiss2008</span><span class='ignore'>}</span> <span class='word'>belongs</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>class</span> <span class='word'>of</span> <span class='word'>text</span> <span class='word'>CRDTs</span> <span class='word'>which</span> <span class='word'>do</span> <span class='word'>not</span> <span class='word'>require</span> <span class='word'>tombstones</span> <span class='word'>for</span> <span class='word'>deletion</span><span class='ignore'>.</span> <span class='word'>It</span> <span class='word'>achieves</span> <span class='word'>this</span> <span class='word'>by</span> <span class='word'>totally</span> <span class='word'>ordering</span> <span class='word'>identifiers</span><span class='ignore'>,</span> <span class='word'>rather</span> <span class='word'>than</span> <span class='word'>relying</span> <span class='word'>on</span> <span class='word'>implicit</span> <span class='word'>causal</span> <span class='word'>dependencies</span> <span class='word'>between</span> <span class='word'>identifiers</span> <span class='ignore'>(</span><span class='word'>which</span> <span class='word'>Treedoc</span> <span class='word'>embeds</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>tree's</span> <span class='word'>branches</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>Logoot</span> <span class='word'>does</span> <span class='word'>generate</span> <span class='word'>identifiers</span> <span class='word'>using</span> <span class='word'>a</span> <span class='word'>tree</span><span class='ignore'>,</span> <span class='word'>but</span> <span class='word'>each</span> <span class='word'>identifier</span> <span class='word'>contains</span> <span class='word'>the</span> <span class='word'>full</span> <span class='word'>path</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>tree</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>frees</span> <span class='word'>it</span> <span class='word'>of</span> <span class='word'>dependence</span> <span class='word'>on</span> <span class='word'>other</span> <span class='word'>nodes</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>means</span> <span class='word'>that</span> <span class='word'>to</span> <span class='word'>delete</span><span class='ignore'>,</span> <span class='word'>any</span> <span class='word'>client</span> <span class='word'>can</span> <span class='word'>simply</span> <span class='word'>remove</span> <span class='word'>the</span> <span class='word'>identifier</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>data</span> <span class='word'>it</span> <span class='word'>tags</span><span class='ignore'>.</span><br>
<br>
<span class='word'>Logoot</span> <span class='word'>also</span> <span class='word'>favors</span> <span class='word'>marking</span> <span class='word'>larger</span> <span class='word'>blocks</span> <span class='word'>of</span> <span class='word'>text</span> <span class='word'>with</span> <span class='word'>identifiers</span><span class='ignore'>,</span> <span class='word'>rather</span> <span class='word'>than</span> <span class='word'>per-character</span><span class='ignore'>.</span> <span class='word'>This</span><span class='ignore'>,</span> <span class='word'>in</span> <span class='word'>combination</span> <span class='word'>with</span> <span class='word'>not</span> <span class='word'>needing</span> <span class='word'>tombstones</span><span class='ignore'>,</span> <span class='word'>promises</span> <span class='word'>major</span> <span class='word'>efficiency</span> <span class='word'>gains</span> <span class='word'>over</span> <span class='word'>CRDTs</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>Treedoc</span><span class='ignore'>.</span> <span class='word'>Even</span> <span class='word'>further</span><span class='ignore'>,</span> <span class='word'>two</span> <span class='word'>papers</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>nedelec2013lseq</span><span class='ignore'>}</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>nedelec2013</span><span class='ignore'>}</span> <span class='word'>offer</span> <span class='word'>optimizations</span> <span class='word'>beyond</span> <span class='word'>the</span> <span class='word'>basic</span> <span class='word'>Logoot</span> <span class='word'>implementation</span> <span class='word'>by</span> <span class='word'>improving</span> <span class='word'>the</span> <span class='word'>strategy</span> <span class='word'>used</span> <span class='word'>to</span> <span class='word'>allocate</span> <span class='word'>new</span> <span class='word'>identifiers</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>generator</span> <span class='word'>tree</span><span class='ignore'>.</span> <span class='word'>However</span><span class='ignore'>,</span> <span class='word'>these</span> <span class='word'>algorithms</span> <span class='word'>are</span> <span class='word'>specific</span> <span class='word'>to</span> <span class='word'>Logoot</span> <span class='word'>and</span> <span class='word'>of</span> <span class='word'>little</span> <span class='word'>relevance</span> <span class='word'>to</span> <span class='word'>this</span> <span class='word'>project</span><span class='ignore'>.</span><br>
<br>
<span class='word'>Logoot</span> <span class='word'>is</span> <span class='word'>important</span> <span class='word'>as</span> <span class='word'>an</span> <span class='word'>example</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>tombstone-free</span> <span class='word'>CRDT</span> <span class='word'>for</span> <span class='word'>text</span><span class='ignore'>.</span> <span class='word'>Additionally</span><span class='ignore'>,</span> <span class='word'>subsequent</span> <span class='word'>research</span> <span class='word'>enabled</span> <span class='ignore'>`</span><span class='word'>undo</span><span class='ignore'>'</span> <span class='word'>and</span> <span class='ignore'>`</span><span class='word'>redo</span><span class='ignore'>'</span> <span class='word'>functionality</span> <span class='word'>for</span> <span class='word'>this</span> <span class='word'>CRDT</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>is</span> <span class='word'>described</span> <span class='word'>below</span><span class='ignore'>.</span><br>
<br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Logoot-Undo</span><span class='ignore'>}</span><br>
<br>
<span class='word'>CRDTs</span> <span class='word'>generally</span> <span class='word'>struggle</span> <span class='word'>to</span> <span class='word'>provide</span> <span class='word'>an</span> <span class='word'>undo</span> <span class='word'>mechanism</span> <span class='word'>since</span> <span class='word'>the</span> <span class='word'>concept</span> <span class='word'>of</span> <span class='word'>reversing</span> <span class='word'>an</span> <span class='word'>update</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>data</span> <span class='word'>structure</span> <span class='word'>is</span> <span class='word'>fundamentally</span> <span class='word'>contrary</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>key</span> <span class='word'>property</span> <span class='word'>of</span> <span class='word'>CRDTs</span><span class='ignore'>:</span> <span class='word'>commutativity</span> <span class='word'>of</span> <span class='word'>operations</span><span class='ignore'>.</span> <span class='word'>For</span> <span class='word'>example</span><span class='ignore'>,</span> <span class='word'>reversing</span> <span class='word'>an</span> <span class='word'>insert</span> <span class='word'>is</span> <span class='word'>not</span> <span class='word'>commutative</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>original</span> <span class='word'>insertion</span><span class='ignore'>.</span> <span class='word'>If</span> <span class='word'>it</span> <span class='word'>were</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>removal</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>nonexistent</span> <span class='word'>element</span><span class='ignore'>,</span> <span class='word'>followed</span> <span class='word'>by</span> <span class='word'>its</span> <span class='word'>insertion</span> <span class='word'>would</span> <span class='word'>have</span> <span class='word'>to</span> <span class='word'>result</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>thing</span> <span class='word'>as</span> <span class='word'>insertion</span> <span class='word'>followed</span> <span class='word'>by</span> <span class='word'>removal</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>the</span> <span class='word'>first</span> <span class='word'>case</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>element</span> <span class='word'>is</span> <span class='word'>present</span><span class='ignore'>,</span> <span class='word'>while</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>second</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>removed</span><span class='ignore'>.</span> <span class='word'>These</span> <span class='word'>outcomes</span> <span class='word'>clearly</span> <span class='word'>are</span> <span class='word'>not</span> <span class='word'>the</span> <span class='word'>same</span><span class='ignore'>.</span><br>
<br>
<span class='word'>Logoot</span> <span class='word'>Undo</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>weiss2010undo</span><span class='ignore'>}</span> <span class='word'>proposes</span> <span class='word'>to</span> <span class='word'>resolve</span> <span class='word'>this</span> <span class='word'>by</span> <span class='word'>essentially</span> <span class='word'>tagging</span> <span class='word'>each</span> <span class='word'>identifier</span> <span class='word'>with</span> <span class='word'>a</span> <span class='mathgroup'>$</span><span class='math'>visible</span><span class='mathgroup'>$</span> <span class='word'>counter</span><span class='ignore'>.</span> <span class='word'>An</span> <span class='word'>undo</span> <span class='word'>of</span> <span class='word'>an</span> <span class='word'>insertion</span> <span class='word'>would</span> <span class='word'>decrement</span> <span class='word'>it</span><span class='ignore'>,</span> <span class='word'>while</span> <span class='word'>redo</span> <span class='word'>would</span> <span class='word'>increment</span> <span class='word'>it</span><span class='ignore'>.</span> <span class='word'>If</span> <span class='word'>the</span> <span class='mathgroup'>$</span><span class='math'>visible</span><span class='mathgroup'>$</span> <span class='word'>counter</span> <span class='word'>is</span> <span class='word'>positive</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>characters</span> <span class='word'>are</span> <span class='word'>visible</span><span class='ignore'>.</span> <span class='word'>As</span> <span class='word'>discussed</span> <span class='word'>in</span> <span class='ignore'>[</span><span class='word'>REFERENCE</span> <span class='word'>NEEDED</span><span class='ignore'>]</span><span class='ignore'>,</span> <span class='word'>this</span> <span class='word'>leads</span> <span class='word'>to</span> <span class='word'>some</span> <span class='word'>rather</span> <span class='word'>unexpected</span> <span class='word'>behavior</span><span class='ignore'>.</span> <span class='word'>However</span><span class='ignore'>,</span> <span class='word'>this</span> <span class='word'>approach</span> <span class='word'>is</span> <span class='word'>viable</span> <span class='word'>since</span> <span class='word'>increments</span> <span class='word'>and</span> <span class='word'>decrements</span> <span class='word'>commute</span> <span class='word'>and</span> <span class='word'>guarantee</span> <span class='word'>eventual</span> <span class='word'>convergence</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>Logoot</span> <span class='word'>Undo</span><span class='ignore'>,</span> <span class='word'>any</span> <span class='word'>client</span> <span class='word'>can</span> <span class='word'>undo</span> <span class='word'>any</span> <span class='word'>other</span> <span class='word'>client's</span> <span class='word'>operations</span> <span class='word'>which</span> <span class='word'>is</span> <span class='word'>called</span> <span class='word'>global</span> <span class='word'>undo</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>use</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>counter</span> <span class='word'>is</span> <span class='word'>identical</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>undo</span> <span class='word'>mechanism</span> <span class='word'>I</span> <span class='word'>developed</span> <span class='word'>independently</span><span class='ignore'>,</span> <span class='word'>though</span> <span class='word'>I</span> <span class='word'>chose</span> <span class='word'>to</span> <span class='word'>implement</span> <span class='word'>a</span> <span class='word'>local</span> <span class='word'>undo</span> <span class='word'>rather</span> <span class='word'>than</span> <span class='word'>global</span> <span class='word'>one</span><span class='ignore'>,</span> <span class='word'>where</span> <span class='word'>clients</span> <span class='word'>can</span> <span class='word'>only</span> <span class='word'>undo</span> <span class='word'>their</span> <span class='word'>own</span> <span class='word'>operations</span><span class='ignore'>.</span><br>
<br>
<br>
<span class='cmd'>\chapter</span><span class='ignore'>{</span><span class='hword'>Preparation</span><span class='ignore'>}</span><br>
<br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Consistency</span> <span class='hword'>Models</span><span class='ignore'>}</span><br>
<br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>What</span> <span class='hword'>is</span> <span class='ignore'>`</span><span class='ignore'>`</span><span class='hword'>Conflict</span> <span class='hword'>Free</span><span class='ignore'>'</span><span class='ignore'>'</span><span class='ignore'>}</span><br>
	<br>
	<span class='word'>One</span> <span class='word'>important</span> <span class='word'>definition</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>exact</span> <span class='word'>meaning</span> <span class='word'>of</span> <span class='ignore'>`</span><span class='ignore'>`</span><span class='word'>conflict</span> <span class='word'>free</span><span class='ignore'>'</span><span class='ignore'>'</span><span class='ignore'>.</span> <span class='word'>There</span> <span class='word'>appears</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>more</span> <span class='word'>than</span> <span class='word'>one</span> <span class='word'>way</span> <span class='word'>of</span> <span class='word'>interpreting</span> <span class='word'>it</span><span class='ignore'>.</span> <span class='word'>On</span> <span class='word'>one</span> <span class='word'>hand</span><span class='ignore'>,</span> <span class='word'>there</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>user's</span> <span class='word'>intuitive</span> <span class='word'>idea</span> <span class='word'>that</span> <span class='word'>any</span> <span class='word'>of</span> <span class='word'>their</span> <span class='word'>own</span> <span class='word'>operations</span> <span class='word'>should</span> <span class='word'>behave</span> <span class='word'>as</span> <span class='word'>if</span> <span class='word'>they</span> <span class='word'>were</span> <span class='word'>the</span> <span class='word'>only</span> <span class='word'>users</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>system</span><span class='ignore'>.</span> <span class='word'>On</span> <span class='word'>the</span> <span class='word'>other</span> <span class='word'>hand</span><span class='ignore'>,</span> <span class='word'>there</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>data-centric</span> <span class='word'>view</span> <span class='word'>of</span> <span class='word'>conflict</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>this</span> <span class='word'>case</span><span class='ignore'>,</span> <span class='word'>operations</span> <span class='word'>conflict</span> <span class='word'>if</span> <span class='word'>they</span> <span class='word'>are</span> <span class='word'>concurrent</span> <span class='word'>and</span> <span class='word'>modify</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>data</span> <span class='word'>or</span> <span class='word'>index</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>text</span> <span class='word'>buffer</span><span class='ignore'>.</span> <span class='word'>Conflict</span> <span class='word'>free</span> <span class='word'>then</span> <span class='word'>means</span> <span class='word'>that</span> <span class='word'>no</span> <span class='word'>data</span> <span class='word'>is</span> <span class='word'>lost</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>after</span> <span class='word'>all</span> <span class='word'>operations</span> <span class='word'>are</span> <span class='word'>exchanged</span> <span class='word'>the</span> <span class='word'>resulting</span> <span class='word'>states</span> <span class='word'>agree</span><span class='ignore'>.</span><br>
	<br>
	<span class='word'>The</span> <span class='word'>common</span> <span class='word'>conflicting</span> <span class='word'>operations</span> <span class='word'>in</span> <span class='word'>text</span> <span class='word'>editing</span> <span class='word'>are</span> <span class='word'>inserting</span> <span class='word'>characters</span> <span class='word'>into</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>index</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>shared</span> <span class='word'>text</span> <span class='word'>buffer</span><span class='ignore'>,</span> <span class='word'>or</span> <span class='word'>simultaneously</span> <span class='word'>deleting</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>characters</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>second</span> <span class='word'>is</span> <span class='word'>easy</span> <span class='word'>to</span> <span class='word'>make</span> <span class='word'>conflict-free</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>both</span> <span class='word'>the</span> <span class='word'>user</span> <span class='word'>and</span> <span class='word'>data</span> <span class='word'>oriented</span> <span class='word'>definitions</span> <span class='word'>of</span> <span class='word'>conflict</span> <span class='word'>agree</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>deleting</span> <span class='word'>a</span> <span class='word'>character</span> <span class='word'>concurrently</span> <span class='word'>or</span> <span class='word'>on</span> <span class='word'>a</span> <span class='word'>single</span> <span class='word'>user</span> <span class='word'>system</span> <span class='word'>should</span> <span class='word'>still</span> <span class='word'>result</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>character</span> <span class='word'>disappearing</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>the</span> <span class='word'>case</span> <span class='word'>of</span> <span class='word'>inserting</span> <span class='word'>text</span> <span class='word'>into</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>index</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>definitions</span> <span class='word'>cannot</span> <span class='word'>agree</span><span class='ignore'>.</span> <span class='word'>Both</span> <span class='word'>users</span> <span class='word'>expect</span> <span class='word'>their</span> <span class='word'>own</span> <span class='word'>text</span> <span class='word'>to</span> <span class='word'>appear</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>index</span> <span class='word'>they</span> <span class='word'>inserted</span> <span class='word'>at</span><span class='ignore'>.</span> <span class='word'>However</span><span class='ignore'>,</span> <span class='word'>in</span> <span class='word'>order</span> <span class='word'>to</span> <span class='word'>satisfy</span> <span class='word'>the</span> <span class='word'>data-centric</span> <span class='word'>definition</span> <span class='word'>we</span> <span class='word'>are</span> <span class='word'>not</span> <span class='word'>allowed</span> <span class='word'>to</span> <span class='word'>lose</span> <span class='word'>data</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>must</span> <span class='word'>eventually</span> <span class='word'>present</span> <span class='word'>both</span> <span class='word'>users</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>string</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>solution</span> <span class='word'>is</span> <span class='word'>to</span> <span class='word'>let</span> <span class='word'>one</span> <span class='word'>user</span> <span class='ignore'>`</span><span class='word'>win</span><span class='ignore'>'</span> <span class='word'>and</span> <span class='word'>insert</span> <span class='word'>their</span> <span class='word'>characters</span> <span class='word'>at</span> <span class='word'>the</span> <span class='word'>desired</span> <span class='word'>index</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>shift</span> <span class='word'>the</span> <span class='word'>other</span> <span class='word'>users</span><span class='ignore'>'</span> <span class='word'>characters</span> <span class='word'>to</span> <span class='word'>appear</span> <span class='word'>after</span><span class='ignore'>.</span> <span class='word'>Both</span> <span class='word'>operational</span> <span class='word'>transformations</span> <span class='word'>and</span> <span class='word'>CRDTs</span> <span class='word'>achieve</span> <span class='word'>this</span> <span class='word'>in</span> <span class='word'>fundamentally</span> <span class='word'>different</span> <span class='word'>ways</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>entire</span> <span class='word'>process</span> <span class='word'>is</span> <span class='word'>demonstrated</span> <span class='word'>in</span>&nbsp; <span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>reconcile</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
	<br>
	<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[htb]</span><br>
	<span class='exclcmd'>\centering</span><br>
	<span class='exclcmd'>\includegraphics</span><span class='option'>[width=1\linewidth]</span><span class='ignore'>{</span><span class='ignore'>figs</span><span class='ignore'>/</span><span class='ignore'>reconcile.eps</span><span class='ignore'>}</span><br>
	<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Two</span> <span class='oword'>clients</span> <span class='oword'>are</span> <span class='oword'>initially</span> <span class='oword'>in</span> <span class='oword'>a</span> <span class='oword'>quiescent</span> <span class='oword'>state</span> <span class='oword'>i.e</span><span class='ignore'>.</span> <span class='oword'>the</span> <span class='oword'>system</span> <span class='oword'>has</span> <span class='oword'>settled</span> <span class='oword'>with</span> <span class='oword'>the</span> <span class='oword'>shared</span> <span class='oword'>string</span> <span class='ignore'>`</span><span class='oword'>computer</span> <span class='ignore'>'</span><span class='ignore'>.</span> <span class='oword'>They</span> <span class='oword'>then</span> <span class='oword'>concurrently</span> <span class='oword'>insert</span> <span class='oword'>different</span> <span class='oword'>words</span> <span class='oword'>at</span> <span class='oword'>the</span> <span class='oword'>same</span> <span class='oword'>index</span><span class='ignore'>.</span> <span class='oword'>At</span> <span class='oword'>first</span> <span class='oword'>each</span> <span class='oword'>sees</span> <span class='oword'>only</span> <span class='oword'>their</span> <span class='oword'>own</span> <span class='oword'>edit</span><span class='ignore'>.</span> <span class='oword'>Then</span> <span class='oword'>operations</span> <span class='oword'>are</span> <span class='oword'>exchanged</span> <span class='oword'>and</span> <span class='oword'>the</span> <span class='oword'>system</span> <span class='oword'>reaches</span> <span class='oword'>quiescence</span> <span class='oword'>again</span><span class='ignore'>.</span> <span class='oword'>Both</span> <span class='oword'>clients</span> <span class='oword'>see</span> <span class='oword'>the</span> <span class='oword'>string</span> <span class='ignore'>'</span><span class='oword'>computer</span> <span class='oword'>labvision</span><span class='ignore'>'</span><span class='ignore'>.</span> <span class='oword'>Client</span> <span class='oword'>1</span> <span class='oword'>thus</span> <span class='ignore'>`</span><span class='oword'>won</span><span class='ignore'>'</span> <span class='oword'>and</span> <span class='oword'>kept</span> <span class='oword'>the</span> <span class='oword'>original</span> <span class='oword'>index</span><span class='ignore'>,</span> <span class='oword'>while</span> <span class='oword'>Client</span> <span class='oword'>2</span> <span class='oword'>had</span> <span class='oword'>its</span> <span class='oword'>insertion</span> <span class='oword'>offset</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>reconcile</span><span class='ignore'>}</span><br>
	<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
	<br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>CCI</span> <span class='hword'>Consistency</span> <span class='hword'>Model</span><span class='ignore'>}</span><br>
	<span class='word'>The</span> <span class='word'>commonly</span> <span class='word'>used</span> <span class='word'>consistency</span> <span class='word'>model</span> <span class='word'>for</span> <span class='word'>concurrent</span> <span class='word'>document</span> <span class='word'>editing</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>CCI</span> <span class='word'>model</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>definition</span> <span class='word'>here</span> <span class='word'>is</span> <span class='word'>borrowed</span> <span class='word'>from</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>weiss2010undo</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
	<br>
	<span class='envir'>\begin</span><span class='envir'>{itemize}</span><br>
		<span class='cmd'>\item</span> <span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Consistency</span><span class='ignore'>:</span><span class='ignore'>}</span> <span class='word'>All</span> <span class='word'>operations</span> <span class='word'>ordered</span> <span class='word'>by</span> <span class='word'>a</span> <span class='word'>precedence</span> <span class='word'>relation</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>Lamport</span><span class='ignore'>’</span><span class='word'>s</span> <span class='word'>happened-before</span> <span class='word'>relation</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>lamport1978</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>are</span> <span class='word'>executed</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>order</span> <span class='word'>on</span> <span class='word'>every</span> <span class='word'>replica</span><span class='ignore'>.</span><br>
	<br>
&nbsp; <span class='cmd'>\item</span> <span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Convergence</span><span class='ignore'>:</span><span class='ignore'>}</span> <span class='word'>The</span> <span class='word'>system</span> <span class='word'>converges</span> <span class='word'>if</span> <span class='word'>all</span> <span class='word'>replicas</span> <span class='word'>are</span> <span class='word'>identical</span> <span class='word'>when</span> <span class='word'>the</span> <span class='word'>system</span> <span class='word'>is</span> <span class='word'>idle</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='cmd'>\item</span> <span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Intention</span> <span class='word'>Preservation</span><span class='ignore'>:</span><span class='ignore'>}</span> <span class='word'>The</span> <span class='word'>expected</span> <span class='word'>effect</span> <span class='word'>of</span> <span class='word'>an</span> <span class='word'>operation</span> <span class='word'>should</span> <span class='word'>be</span> <span class='word'>observed</span> <span class='word'>on</span> <span class='word'>all</span> <span class='word'>replicas</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>is</span> <span class='word'>commonly</span> <span class='word'>accepted</span> <span class='word'>to</span> <span class='word'>mean</span><span class='ignore'>:</span><br>
<br>
&nbsp; 	<span class='envir'>\begin</span><span class='envir'>{itemize}</span><br>
				<span class='cmd'>\item</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>delete</span><span class='ignore'>}</span>  <span class='word'>A</span> <span class='word'>deleted</span> <span class='word'>line</span> <span class='word'>must</span> <span class='word'>not</span> <span class='word'>appear</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>document</span> <span class='word'>unless</span> <span class='word'>the</span> <span class='word'>deletion</span> <span class='word'>is</span> <span class='word'>undone</span><span class='ignore'>.</span><br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <span class='cmd'>\item</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>insert</span><span class='ignore'>}</span>  <span class='word'>A</span> <span class='word'>line</span> <span class='word'>inserted</span> <span class='word'>on</span> <span class='word'>a</span> <span class='word'>peer</span> <span class='word'>must</span> <span class='word'>appear</span> <span class='word'>on</span> <span class='word'>every</span> <span class='word'>peer</span><span class='ignore'>;</span> <span class='word'>the</span> <span class='word'>order</span> <span class='word'>relation</span> <span class='word'>between</span> <span class='word'>the</span> <span class='word'>document</span> <span class='word'>lines</span> <span class='word'>and</span> <span class='word'>a</span> <span class='word'>newly</span> <span class='word'>inserted</span> <span class='word'>line</span> <span class='word'>must</span> <span class='word'>be</span> <span class='word'>preserved</span> <span class='word'>on</span> <span class='word'>every</span> <span class='word'>peer</span><span class='ignore'>.</span><br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <span class='cmd'>\item</span>  <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>undo</span><span class='ignore'>}</span>  <span class='word'>Undoing</span> <span class='word'>a</span> <span class='word'>modification</span> <span class='word'>makes</span> <span class='word'>the</span> <span class='word'>system</span> <span class='word'>return</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>state</span> <span class='word'>it</span> <span class='word'>would</span> <span class='word'>have</span> <span class='word'>reached</span> <span class='word'>if</span> <span class='word'>this</span> <span class='word'>modification</span> <span class='word'>was</span> <span class='word'>never</span> <span class='word'>produced</span><span class='ignore'>.</span><br>
&nbsp; &nbsp; <br>
&nbsp; 	<span class='envir'>\end</span><span class='envir'>{itemize}</span><br>
&nbsp; <br>
	<span class='envir'>\end</span><span class='envir'>{itemize}</span><br>
	<br>
	<span class='word'>The</span> <span class='word'>given</span> <span class='word'>definition</span> <span class='word'>of</span> <span class='word'>intention</span> <span class='word'>preservation</span> <span class='word'>is</span> <span class='word'>accepted</span><span class='ignore'>,</span> <span class='word'>but</span> <span class='word'>may</span> <span class='word'>produce</span> <span class='word'>some</span> <span class='word'>unexpected</span> <span class='word'>results</span> <span class='word'>as</span> <span class='word'>we</span> <span class='word'>will</span> <span class='word'>see</span> <span class='word'>when</span> <span class='word'>discussing</span> <span class='word'>Undo</span> <span class='word'>in</span> <span class='ignore'>[</span><span class='word'>reference</span> <span class='word'>needed</span><span class='ignore'>]</span><span class='ignore'>.</span><br>
	<br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Achieving</span> <span class='hword'>Eventual</span> <span class='hword'>Consistency</span><span class='ignore'>}</span><br>
<br>
	<span class='word'>As</span> <span class='word'>mentioned</span> <span class='word'>briefly</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>prior</span> <span class='word'>section</span><span class='ignore'>,</span> <span class='word'>operational</span> <span class='word'>transformations</span> <span class='word'>and</span> <span class='word'>CRDTs</span> <span class='word'>aim</span> <span class='word'>to</span> <span class='word'>achieve</span> <span class='word'>eventual</span> <span class='word'>convergence</span> <span class='word'>on</span> <span class='word'>all</span> <span class='word'>clients</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>common</span> <span class='word'>conflicting</span> <span class='word'>operations</span> <span class='word'>that</span> <span class='word'>must</span> <span class='word'>be</span> <span class='word'>given</span> <span class='word'>special</span> <span class='word'>consideration</span> <span class='word'>are</span> <span class='word'>concurrently</span> <span class='word'>inserting</span> <span class='word'>characters</span> <span class='word'>at</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>index</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>deleting</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>character</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>deleting</span> <span class='word'>a</span> <span class='word'>character</span> <span class='word'>while</span> <span class='word'>removing</span> <span class='word'>characters</span> <span class='word'>before</span> <span class='word'>it</span><span class='ignore'>.</span><br>
<br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Operational</span> <span class='hword'>Transformations</span><span class='ignore'>}</span><br>
	<br>
	<span class='word'>The</span> <span class='word'>easiest</span> <span class='word'>way</span> <span class='word'>to</span> <span class='word'>understand</span> <span class='word'>operational</span> <span class='word'>transformations</span> <span class='word'>is</span> <span class='word'>by</span> <span class='word'>example</span><span class='ignore'>.</span><br>
	<br>
	<br>
	<span class='word'>Figure</span> <span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>ot1</span><span class='ignore'>}</span> <span class='word'>demonstrates</span> <span class='word'>the</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>concurrent</span> <span class='word'>insert</span> <span class='word'>at</span> <span class='word'>same</span> <span class='word'>index</span><span class='ignore'>}</span> <span class='word'>case</span><span class='ignore'>.</span><br>
	<br>
	<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
	<span class='exclcmd'>\centering</span><br>
	<span class='exclcmd'>\includegraphics</span><span class='option'>[width=1\linewidth]</span><span class='ignore'>{</span><span class='ignore'>figs</span><span class='ignore'>/</span><span class='ignore'>ot1.eps</span><span class='ignore'>}</span><br>
	<span class='cmd'>\caption</span><span class='option'>[Operational Transformations -- concurrent insertion]</span><span class='ignore'>{</span><span class='oword'>This</span> <span class='oword'>figure</span> <span class='oword'>shows</span> <span class='oword'>how</span> <span class='oword'>operational</span> <span class='oword'>transformations</span> <span class='oword'>might</span> <span class='oword'>handle</span> <span class='oword'>concurrent</span> <span class='oword'>insertion</span> <span class='oword'>at</span> <span class='oword'>the</span> <span class='oword'>same</span> <span class='oword'>index</span><span class='ignore'>.</span> <span class='oword'>Here</span><span class='ignore'>,</span> <span class='oword'>both</span> <span class='oword'>clients</span> <span class='oword'>insert</span> <span class='oword'>different</span> <span class='oword'>strings</span> <span class='oword'>after</span> <span class='oword'>index</span> <span class='oword'>5</span><span class='ignore'>.</span> <span class='oword'>The</span> <span class='oword'>operations</span> <span class='oword'>are</span> <span class='oword'>exchanged</span><span class='ignore'>,</span> <span class='oword'>and</span> <span class='oword'>the</span> <span class='oword'>key</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='oword'>transform</span><span class='ignore'>}</span> <span class='oword'>function</span> <span class='ignore'>(</span><span class='oword'>in</span> <span class='oword'>green</span><span class='ignore'>)</span> <span class='oword'>detects</span> <span class='oword'>the</span> <span class='oword'>conflict</span><span class='ignore'>,</span> <span class='oword'>and</span> <span class='oword'>chooses</span> <span class='oword'>to</span> <span class='oword'>offset</span> <span class='ignore'>`</span><span class='ignore'>`</span> <span class='oword'>world</span><span class='ignore'>'</span><span class='ignore'>'</span> <span class='oword'>on</span> <span class='oword'>Client</span> <span class='oword'>1</span> <span class='oword'>by</span> <span class='oword'>6</span> <span class='ignore'>(</span><span class='oword'>in</span> <span class='oword'>red</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='oword'>which</span> <span class='oword'>is</span> <span class='oword'>the</span> <span class='oword'>length</span> <span class='oword'>of</span> <span class='oword'>its</span> <span class='oword'>own</span> <span class='oword'>previously</span> <span class='oword'>inserted</span> <span class='oword'>string</span> <span class='ignore'>`</span><span class='ignore'>`</span> <span class='oword'>there</span> <span class='ignore'>'</span><span class='ignore'>'</span><span class='ignore'>.</span> <span class='oword'>On</span> <span class='oword'>Client</span> <span class='oword'>2</span><span class='ignore'>,</span> <span class='oword'>once</span> <span class='oword'>the</span> <span class='oword'>insert</span> <span class='ignore'>`</span><span class='ignore'>`</span> <span class='oword'>there</span> <span class='ignore'>'</span><span class='ignore'>'</span> <span class='oword'>arrives</span><span class='ignore'>,</span> <span class='oword'>the</span> <span class='oword'>algorithm</span> <span class='oword'>knows</span> <span class='oword'>not</span> <span class='oword'>to</span> <span class='oword'>offset</span> <span class='oword'>it</span> <span class='ignore'>(</span><span class='oword'>due</span> <span class='oword'>to</span> <span class='oword'>some</span> <span class='oword'>arbitrary</span> <span class='oword'>ordering</span> <span class='oword'>such</span> <span class='oword'>as</span> <span class='oword'>client</span> <span class='oword'>ID</span><span class='ignore'>)</span> <span class='oword'>and</span> <span class='oword'>places</span> <span class='oword'>it</span> <span class='oword'>at</span> <span class='oword'>index</span> <span class='oword'>5</span><span class='ignore'>.</span> <span class='oword'>Thus</span> <span class='oword'>both</span> <span class='oword'>clients</span> <span class='oword'>resolve</span> <span class='oword'>the</span> <span class='oword'>string</span> <span class='ignore'>`</span><span class='ignore'>`</span><span class='oword'>Hello</span> <span class='oword'>there</span> <span class='oword'>world</span><span class='ignore'>'</span><span class='ignore'>'</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>ot1</span><span class='ignore'>}</span><br>
	<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
	<br>
	<span class='word'>Figure</span> <span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>ot2</span><span class='ignore'>}</span> <span class='word'>demonstrates</span> <span class='word'>the</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>concurrent</span> <span class='word'>deletion</span> <span class='word'>of</span> <span class='word'>same</span> <span class='word'>character</span><span class='ignore'>}</span> <span class='word'>case</span><span class='ignore'>.</span><br>
<br>
	<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
	<span class='exclcmd'>\centering</span><br>
	<span class='exclcmd'>\includegraphics</span><span class='option'>[width=1\linewidth]</span><span class='ignore'>{</span><span class='ignore'>figs</span><span class='ignore'>/</span><span class='ignore'>ot2.eps</span><span class='ignore'>}</span><br>
	<span class='cmd'>\caption</span><span class='option'>[Operational Transformations -- concurrent deletion]</span><span class='ignore'>{</span><span class='oword'>Both</span> <span class='oword'>clients</span> <span class='oword'>concurrently</span> <span class='oword'>delete</span> <span class='oword'>index</span> <span class='oword'>3</span> <span class='oword'>of</span> <span class='ignore'>`</span><span class='ignore'>`</span><span class='oword'>Hello</span><span class='ignore'>'</span><span class='ignore'>'</span><span class='ignore'>,</span> <span class='oword'>resulting</span> <span class='oword'>in</span> <span class='ignore'>`</span><span class='ignore'>`</span><span class='oword'>Helo</span><span class='ignore'>'</span><span class='ignore'>'</span><span class='ignore'>.</span> <span class='oword'>The</span> <span class='oword'>operations</span> <span class='oword'>are</span> <span class='oword'>exchanged</span><span class='ignore'>.</span> <span class='oword'>The</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='oword'>transform</span><span class='ignore'>}</span> <span class='oword'>function</span> <span class='ignore'>(</span><span class='oword'>in</span> <span class='oword'>green</span><span class='ignore'>)</span> <span class='oword'>detects</span> <span class='oword'>the</span> <span class='oword'>conflict</span><span class='ignore'>,</span> <span class='oword'>and</span> <span class='oword'>on</span> <span class='oword'>both</span> <span class='oword'>clients</span> <span class='oword'>discards</span> <span class='oword'>the</span> <span class='oword'>remote</span> <span class='oword'>operation</span><span class='ignore'>.</span> <span class='oword'>Integrating</span> <span class='oword'>it</span> <span class='oword'>would</span> <span class='oword'>cause</span> <span class='oword'>modifications</span> <span class='oword'>the</span> <span class='oword'>user</span> <span class='oword'>did</span> <span class='oword'>not</span> <span class='oword'>execute</span> <span class='ignore'>(</span><span class='oword'>i.e</span><span class='ignore'>.</span> <span class='oword'>delete</span> <span class='ignore'>`</span><span class='oword'>o</span><span class='ignore'>'</span> <span class='oword'>in</span> <span class='oword'>addition</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='oword'>By</span> <span class='oword'>discarding</span> <span class='oword'>the</span> <span class='oword'>operations</span><span class='ignore'>,</span> <span class='oword'>both</span> <span class='oword'>clients</span> <span class='oword'>resolve</span> <span class='ignore'>`</span><span class='ignore'>`</span><span class='oword'>Helo</span><span class='ignore'>'</span><span class='ignore'>'</span> <span class='oword'>correctly</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>ot2</span><span class='ignore'>}</span><br>
	<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
	<br>
	<span class='word'>Figure</span> <span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>ot3</span><span class='ignore'>}</span> <span class='word'>demonstrates</span> <span class='word'>the</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>concurrent</span> <span class='word'>insertion</span> <span class='word'>and</span> <span class='word'>deletion</span><span class='ignore'>}</span> <span class='word'>case</span><span class='ignore'>.</span><br>
	<br>
<br>
	<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
	<span class='exclcmd'>\centering</span><br>
	<span class='exclcmd'>\includegraphics</span><span class='option'>[width=1\linewidth]</span><span class='ignore'>{</span><span class='ignore'>figs</span><span class='ignore'>/</span><span class='ignore'>ot3.eps</span><span class='ignore'>}</span><br>
	<span class='cmd'>\caption</span><span class='option'>[Operational Transformations -- concurrent insertion and deletion]</span><span class='ignore'>{</span><span class='oword'>Here</span> <span class='oword'>Client</span> <span class='oword'>1</span> <span class='oword'>deletes</span> <span class='oword'>index</span> <span class='oword'>3</span> <span class='oword'>of</span> <span class='oword'>the</span> <span class='oword'>initial</span> <span class='oword'>string</span> <span class='ignore'>`</span><span class='ignore'>`</span><span class='oword'>Hello</span><span class='ignore'>'</span><span class='ignore'>'</span><span class='ignore'>,</span> <span class='oword'>resulting</span> <span class='oword'>in</span> <span class='ignore'>`</span><span class='ignore'>`</span><span class='oword'>Helo</span><span class='ignore'>'</span><span class='ignore'>'</span><span class='ignore'>.</span> <span class='oword'>Meanwhile</span><span class='ignore'>,</span> <span class='oword'>Client</span> <span class='oword'>2</span> <span class='oword'>inserts</span> <span class='ignore'>`</span><span class='ignore'>`</span> <span class='oword'>world</span><span class='ignore'>'</span><span class='ignore'>'</span> <span class='oword'>after</span> <span class='oword'>index</span> <span class='oword'>5</span> <span class='oword'>resulting</span> <span class='oword'>in</span> <span class='ignore'>`</span><span class='ignore'>`</span><span class='oword'>Hello</span> <span class='oword'>world</span><span class='ignore'>'</span><span class='ignore'>'</span><span class='ignore'>.</span> <span class='oword'>The</span> <span class='oword'>operations</span> <span class='oword'>are</span> <span class='oword'>exchanged</span><span class='ignore'>.</span> <span class='oword'>The</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='oword'>transform</span><span class='ignore'>}</span> <span class='oword'>function</span> <span class='ignore'>(</span><span class='oword'>in</span> <span class='oword'>green</span><span class='ignore'>)</span> <span class='oword'>detects</span> <span class='oword'>the</span> <span class='oword'>conflict</span><span class='ignore'>,</span> <span class='oword'>and</span> <span class='oword'>on</span> <span class='oword'>Client</span> <span class='oword'>1</span> <span class='oword'>knows</span> <span class='oword'>to</span> <span class='oword'>subtract</span> <span class='oword'>1</span> <span class='oword'>from</span> <span class='oword'>the</span> <span class='oword'>index</span> <span class='oword'>to</span> <span class='oword'>insert</span> <span class='ignore'>`</span><span class='ignore'>`</span> <span class='oword'>world</span><span class='ignore'>'</span><span class='ignore'>'</span> <span class='oword'>after</span> <span class='oword'>because</span> <span class='oword'>a</span> <span class='oword'>prior</span> <span class='oword'>character</span> <span class='oword'>has</span> <span class='oword'>been</span> <span class='oword'>deleted</span> <span class='oword'>concurrently</span><span class='ignore'>.</span> <span class='oword'>On</span> <span class='oword'>Client</span> <span class='oword'>2</span><span class='ignore'>,</span> <span class='oword'>there</span> <span class='oword'>is</span> <span class='oword'>no</span> <span class='oword'>conflict</span> <span class='oword'>and</span> <span class='oword'>the</span> <span class='oword'>delete</span> <span class='oword'>can</span> <span class='oword'>proceed</span> <span class='oword'>at</span> <span class='oword'>position</span> <span class='oword'>3</span><span class='ignore'>.</span> <span class='oword'>Thus</span> <span class='oword'>both</span> <span class='oword'>clients</span> <span class='oword'>resolve</span> <span class='ignore'>`</span><span class='ignore'>`</span><span class='oword'>Helo</span> <span class='oword'>World</span><span class='ignore'>'</span><span class='ignore'>'</span> <span class='oword'>correctly</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>ot3</span><span class='ignore'>}</span><br>
	<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<br>
	<br>
	<br>
&nbsp; <br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Convergent</span> <span class='hword'>Replicated</span> <span class='hword'>Data</span> <span class='hword'>Types</span><span class='ignore'>}</span><br>
	<br>
	<span class='word'>This</span> <span class='word'>section</span> <span class='word'>will</span> <span class='word'>provide</span> <span class='word'>an</span> <span class='word'>intuition</span> <span class='word'>for</span> <span class='word'>CRDTs</span> <span class='word'>for</span> <span class='word'>text</span> <span class='word'>editing</span> <span class='word'>in</span> <span class='word'>general</span><span class='ignore'>,</span> <span class='word'>while</span> <span class='word'>the</span> <span class='word'>specific</span> <span class='word'>CRDT</span> <span class='word'>used</span> <span class='word'>for</span> <span class='word'>this</span> <span class='word'>project</span> <span class='word'>is</span> <span class='word'>outlined</span> <span class='word'>in</span> <span class='word'>chapter</span> <span class='word'>3</span> <span class='ignore'>[</span><span class='word'>reference</span> <span class='word'>needed</span><span class='ignore'>]</span><span class='ignore'>.</span><br>
<br>
	<span class='word'>CRDTs</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>were</span> <span class='word'>first</span> <span class='word'>formalized</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>2007</span> <span class='word'>paper</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>shapiro2007</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>trade</span> <span class='word'>the</span> <span class='word'>complex</span> <span class='word'>algorithms</span> <span class='word'>used</span> <span class='word'>in</span> <span class='word'>OT</span> <span class='word'>for</span> <span class='word'>a</span> <span class='word'>more</span> <span class='word'>complex</span> <span class='word'>data</span> <span class='word'>structure</span><span class='ignore'>.</span> <span class='word'>Rather</span> <span class='word'>than</span> <span class='word'>relying</span> <span class='word'>on</span> <span class='word'>a</span> <span class='word'>serial</span> <span class='word'>order</span> <span class='word'>provided</span> <span class='word'>by</span> <span class='word'>a</span> <span class='word'>server</span><span class='ignore'>,</span> <span class='word'>or</span> <span class='word'>logic</span> <span class='word'>to</span> <span class='word'>transform</span> <span class='word'>operations</span> <span class='word'>against</span> <span class='word'>each</span> <span class='word'>other</span><span class='ignore'>,</span> <span class='word'>operations</span> <span class='word'>are</span> <span class='word'>tagged</span> <span class='word'>with</span> <span class='word'>totally</span> <span class='word'>ordered</span> <span class='word'>identifiers</span> <span class='word'>which</span> <span class='word'>allow</span> <span class='word'>us</span> <span class='word'>to</span> <span class='word'>extract</span> <span class='word'>the</span> <span class='word'>data</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>native</span> <span class='word'>form</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>for</span> <span class='word'>example</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>string</span> <span class='word'>will</span> <span class='word'>be</span> <span class='word'>represented</span> <span class='word'>as</span> <span class='word'>a</span> <span class='word'>set</span> <span class='word'>of</span> <span class='word'>tagged</span> <span class='word'>characters</span><span class='ignore'>,</span> <span class='word'>so</span> <span class='word'>they</span> <span class='word'>may</span> <span class='word'>be</span> <span class='word'>read</span> <span class='word'>out</span> <span class='word'>according</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>tag</span> <span class='word'>ordering</span><span class='ignore'>.</span> <span class='word'>Figure</span><span class='ignore'>~</span><span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>taggedset</span><span class='ignore'>}</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>simple</span> <span class='word'>demonstration</span> <span class='word'>of</span> <span class='word'>how</span> <span class='word'>this</span> <span class='word'>works</span><span class='ignore'>.</span> <br>
	<br>
	<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
	<span class='exclcmd'>\centering</span><br>
	<span class='exclcmd'>\includegraphics</span><span class='option'>[width=1\linewidth]</span><span class='ignore'>{</span><span class='ignore'>figs</span><span class='ignore'>/</span><span class='ignore'>tagged</span><span class='ignore'>_</span><span class='ignore'>set.eps</span><span class='ignore'>}</span><br>
	<span class='cmd'>\caption</span><span class='option'>[Text CRDT as a tagged set]</span><span class='ignore'>{</span><span class='oword'>A</span> <span class='oword'>CRDT</span> <span class='oword'>containing</span> <span class='oword'>the</span> <span class='oword'>word</span> <span class='ignore'>`</span><span class='ignore'>`</span><span class='oword'>World</span><span class='ignore'>'</span><span class='ignore'>'</span><span class='ignore'>.</span> <span class='oword'>The</span> <span class='oword'>CRDT</span> <span class='oword'>is</span> <span class='oword'>a</span> <span class='oword'>set</span> <span class='oword'>of</span> <span class='oword'>nodes</span> <span class='oword'>that</span> <span class='oword'>are</span> <span class='oword'>tagged</span> <span class='oword'>with</span> <span class='oword'>ordered</span> <span class='oword'>identifiers</span><span class='ignore'>.</span> <span class='oword'>The</span> <span class='oword'>order</span> <span class='oword'>used</span> <span class='oword'>here</span> <span class='oword'>is</span> <span class='mathgroup'>$</span><span class='math'>&lt;</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='oword'>ordered</span> <span class='oword'>by</span> <span class='oword'>the</span> <span class='oword'>first</span> <span class='oword'>element</span> <span class='oword'>of</span> <span class='oword'>the</span> <span class='oword'>pair</span><span class='ignore'>,</span> <span class='oword'>then</span> <span class='oword'>by</span> <span class='oword'>the</span> <span class='oword'>second</span><span class='ignore'>.</span> <span class='oword'>The</span> <span class='oword'>red</span> <span class='oword'>arrows</span> <span class='oword'>trace</span> <span class='oword'>out</span> <span class='oword'>the</span> <span class='oword'>ordering</span><span class='ignore'>,</span> <span class='oword'>which</span> <span class='oword'>presents</span> <span class='oword'>the</span> <span class='oword'>word</span> <span class='ignore'>`</span><span class='ignore'>`</span><span class='oword'>World</span><span class='ignore'>'</span><span class='ignore'>'</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>taggedset</span><span class='ignore'>}</span><br>
	<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
	<br>
	<span class='ignore'>*</span><span class='ignore'>*</span><span class='ignore'>*</span><span class='word'>NEED</span> <span class='word'>to</span> <span class='word'>incorporate</span> <span class='word'>partial</span> <span class='word'>order</span> <span class='word'>of</span> <span class='word'>operations</span><span class='ignore'>?</span><span class='ignore'>?</span><span class='ignore'>*</span><span class='ignore'>*</span><span class='ignore'>*</span><br>
	<br>
	<span class='word'>There</span> <span class='word'>are</span> <span class='word'>technically</span> <span class='word'>two</span> <span class='word'>classes</span> <span class='word'>of</span> <span class='word'>CRDTs</span><span class='ignore'>:</span> <span class='word'>state</span><span class='ignore'>-</span> <span class='word'>and</span> <span class='word'>operation-based</span><span class='ignore'>.</span> <span class='word'>State-based</span> <span class='word'>CRDTs</span> <span class='word'>disseminate</span> <span class='word'>the</span> <span class='word'>entire</span> <span class='word'>local</span> <span class='word'>state</span> <span class='word'>to</span> <span class='word'>other</span> <span class='word'>clients</span> <span class='word'>which</span> <span class='word'>is</span> <span class='word'>then</span> <span class='word'>merged</span> <span class='word'>into</span> <span class='word'>their</span> <span class='word'>copies</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>requires</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>merge</span> <span class='word'>operation</span> <span class='word'>be</span> <span class='word'>commutative</span><span class='ignore'>,</span> <span class='word'>associative</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>idempotent</span><span class='ignore'>~</span><span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>shapiro2011</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>Operation-based</span> <span class='word'>CRDTs</span> <span class='word'>relay</span> <span class='word'>modifications</span> <span class='word'>to</span> <span class='word'>other</span> <span class='word'>clients</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>execute</span> <span class='word'>them</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>local</span> <span class='word'>replica</span><span class='ignore'>.</span> <span class='word'>These</span> <span class='word'>only</span> <span class='word'>require</span> <span class='word'>that</span> <span class='word'>all</span> <span class='word'>operations</span> <span class='word'>commute</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>communication</span> <span class='word'>layer</span> <span class='word'>guarantees</span> <span class='word'>only-once</span><span class='ignore'>,</span> <span class='word'>in</span> <span class='word'>order</span> <span class='word'>delivery</span><span class='ignore'>~</span><span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>takada2013</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>project</span> <span class='word'>uses</span> <span class='word'>an</span> <span class='word'>operation-based</span> <span class='word'>CRDT</span><span class='ignore'>,</span> <span class='word'>so</span> <span class='word'>the</span> <span class='word'>key</span> <span class='word'>property</span> <span class='word'>to</span> <span class='word'>fulfill</span> <span class='word'>is</span> <span class='word'>commutativity</span> <span class='word'>of</span> <span class='word'>operations</span> <span class='word'>while</span> <span class='word'>providing</span> <span class='word'>network</span> <span class='word'>layer</span> <span class='word'>delivery</span> <span class='word'>guarantees</span><span class='ignore'>.</span><br>
	<br>
	<span class='word'>If</span> <span class='word'>these</span> <span class='word'>requirements</span> <span class='word'>are</span> <span class='word'>met</span><span class='ignore'>,</span> <span class='word'>all</span> <span class='word'>clients</span> <span class='word'>will</span> <span class='word'>to</span> <span class='word'>converge</span> <span class='word'>to</span> <span class='word'>an</span> <span class='word'>identical</span><span class='ignore'>,</span> <span class='word'>ordered</span> <span class='word'>result</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>follows</span> <span class='word'>from</span> <span class='word'>the</span> <span class='word'>fact</span> <span class='word'>that</span> <span class='word'>elements</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>have</span> <span class='word'>a</span> <span class='word'>total</span> <span class='word'>order</span> <span class='word'>defined</span> <span class='word'>over</span> <span class='word'>them</span><span class='ignore'>:</span> <span class='word'>as</span> <span class='word'>long</span> <span class='word'>as</span> <span class='word'>all</span> <span class='word'>modifications</span> <span class='word'>arrive</span> <span class='word'>intact</span><span class='ignore'>,</span> <span class='word'>all</span> <span class='word'>clients</span> <span class='word'>can</span> <span class='word'>retrieve</span> <span class='word'>the</span> <span class='word'>correct</span> <span class='word'>data</span><span class='ignore'>.</span><br>
<br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>ShareJS</span><span class='ignore'>}</span><br>
	<br>
	<span class='word'>ShareJS</span><span class='ignore'>~</span><span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>sharejs</span><span class='ignore'>}</span> <span class='word'>is</span> <span class='word'>an</span> <span class='word'>open</span> <span class='word'>source</span> <span class='word'>Javascript</span> <span class='word'>library</span> <span class='word'>implementing</span> <span class='word'>Operational</span> <span class='word'>Transformations</span> <span class='word'>which</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>deployed</span> <span class='word'>on</span> <span class='word'>web</span> <span class='word'>browsers</span> <span class='word'>or</span> <span class='word'>NodeJS</span><span class='cmd'>\footnote</span><span class='ignore'>{</span><span class='oword'>\url</span><span class='ignore'>{</span><span class='ignore'>https</span><span class='ignore'>:</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'>nodejs.org</span><span class='ignore'>/</span><span class='ignore'>en</span><span class='ignore'>/</span><span class='ignore'>}</span><span class='ignore'>}</span> <span class='word'>clients</span><span class='ignore'>.</span> <span class='word'>It</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>core</span> <span class='word'>resource</span> <span class='word'>around</span> <span class='word'>which</span> <span class='word'>I</span> <span class='word'>built</span> <span class='word'>the</span> <span class='word'>comparative</span> <span class='word'>system</span> <span class='word'>to</span> <span class='word'>collect</span> <span class='word'>statistics</span> <span class='word'>from</span><span class='ignore'>.</span> <span class='word'>To</span> <span class='word'>this</span> <span class='word'>end</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>useful</span> <span class='word'>to</span> <span class='word'>know</span> <span class='word'>more</span> <span class='word'>precisely</span> <span class='word'>how</span> <span class='word'>ShareJS</span> <span class='word'>operates</span> <span class='word'>and</span> <span class='word'>what</span> <span class='word'>kind</span> <span class='word'>of</span> <span class='word'>behavior</span> <span class='word'>might</span> <span class='word'>be</span> <span class='word'>expected</span><span class='ignore'>.</span> <span class='word'>As</span> <span class='word'>are</span> <span class='word'>a</span> <span class='word'>large</span> <span class='word'>variety</span> <span class='word'>of</span> <span class='word'>algorithms</span> <span class='word'>that</span> <span class='word'>can</span> <span class='word'>enable</span> <span class='word'>OT</span><span class='ignore'>~</span><span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>kumawat2016</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>rather</span> <span class='word'>than</span> <span class='word'>tracking</span> <span class='word'>down</span> <span class='word'>the</span> <span class='word'>papers</span> <span class='word'>ShareJS</span> <span class='word'>is</span> <span class='word'>based</span> <span class='word'>on</span><span class='ignore'>,</span> <span class='word'>much</span> <span class='word'>of</span> <span class='word'>what</span> <span class='word'>is</span> <span class='word'>summarized</span> <span class='word'>below</span> <span class='word'>was</span> <span class='word'>deduced</span> <span class='word'>by</span> <span class='word'>reading</span> <span class='word'>its</span> <span class='word'>source</span> <span class='word'>code</span><span class='ignore'>.</span> <span class='word'>Its</span> <span class='word'>core</span> <span class='word'>features</span> <span class='word'>are</span> <span class='word'>versioned</span> <span class='word'>documents</span><span class='ignore'>,</span> <span class='word'>an</span> <span class='word'>active</span> <span class='word'>server</span> <span class='word'>which</span> <span class='word'>orders</span> <span class='word'>and</span> <span class='word'>transforms</span> <span class='word'>operations</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>primary</span> <span class='word'>supported</span> <span class='word'>actions</span> <span class='ignore'>`</span><span class='word'>insert</span><span class='ignore'>'</span> <span class='word'>and</span> <span class='ignore'>`</span><span class='word'>delete</span><span class='ignore'>'</span><span class='ignore'>.</span><br>
	<br>
	<span class='word'>Replicated</span> <span class='word'>documents</span> <span class='word'>are</span> <span class='word'>versioned</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>each</span> <span class='word'>operation</span> <span class='word'>applies</span> <span class='word'>to</span> <span class='word'>a</span> <span class='word'>specific</span> <span class='word'>version</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>version</span> <span class='word'>number</span> <span class='word'>is</span> <span class='word'>used</span> <span class='word'>to</span> <span class='word'>transform</span> <span class='word'>operations</span> <span class='word'>against</span> <span class='word'>each</span> <span class='word'>other</span> <span class='word'>and</span> <span class='word'>detect</span> <span class='word'>concurrent</span> <span class='word'>changes</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>supported</span> <span class='word'>operations</span> <span class='word'>are</span> <span class='word'>insert</span> <span class='word'>and</span> <span class='word'>delete</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>resulting</span> <span class='word'>modifications</span> <span class='word'>are</span> <span class='word'>sent</span> <span class='word'>as</span> <span class='word'>JSON</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>server</span><span class='ignore'>.</span><br>
	<br>
	<span class='word'>An</span> <span class='word'>Insert</span> <span class='word'>operation</span> <span class='word'>for</span> <span class='word'>adding</span> <span class='word'>text</span> <span class='word'>at</span> <span class='word'>index</span> <span class='word'>100</span> <span class='word'>in</span> <span class='word'>document</span> <span class='word'>version</span> <span class='word'>1</span><span class='ignore'>:</span><br>
<span class='envir'>\begin</span><span class='envir'>{lcverbatim}</span><br>
<span class='ignore'>{</span><span class='word'>v</span><span class='ignore'>:</span><span class='word'>1</span><span class='ignore'>,</span> <span class='word'>op</span><span class='ignore'>:</span><span class='ignore'>[</span><span class='ignore'>{</span><span class='word'>i</span><span class='ignore'>:</span><span class='ignore'>`</span><span class='word'>Hello</span> <span class='word'>World</span><span class='ignore'>'</span><span class='ignore'>,</span> <span class='word'>p</span><span class='ignore'>:</span><span class='word'>100</span><span class='ignore'>}</span><span class='ignore'>]</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{lcverbatim}</span><br>
<br>
	<span class='word'>A</span> <span class='word'>deletion</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>world</span> <span class='ignore'>`</span><span class='ignore'>`</span><span class='word'>Hello</span><span class='ignore'>'</span><span class='ignore'>'</span> <span class='word'>at</span> <span class='word'>index</span> <span class='word'>100</span><span class='ignore'>:</span><br>
<span class='envir'>\begin</span><span class='envir'>{lcverbatim}</span><br>
<span class='ignore'>{</span><span class='word'>v</span><span class='ignore'>:</span><span class='word'>1</span><span class='ignore'>,</span> <span class='word'>op</span><span class='ignore'>:</span><span class='ignore'>[</span><span class='ignore'>{</span><span class='word'>d</span><span class='ignore'>:</span><span class='ignore'>`</span><span class='word'>Hello</span><span class='ignore'>'</span><span class='ignore'>,</span> <span class='word'>p</span><span class='ignore'>:</span><span class='word'>100</span><span class='ignore'>}</span><span class='ignore'>]</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{lcverbatim}</span><br>
<br>
	<span class='word'>Multiple</span> <span class='word'>operations</span> <span class='word'>may</span> <span class='word'>be</span> <span class='word'>sent</span> <span class='word'>in</span> <span class='word'>one</span> <span class='word'>packet</span><span class='ignore'>:</span><br>
<span class='envir'>\begin</span><span class='envir'>{lcverbatim}</span><br>
<span class='ignore'>{</span><span class='word'>v</span><span class='ignore'>:</span><span class='word'>1</span><span class='ignore'>,</span> <span class='word'>op</span><span class='ignore'>:</span><span class='ignore'>[</span><span class='ignore'>{</span><span class='word'>d</span><span class='ignore'>:</span><span class='ignore'>`</span><span class='word'>World</span><span class='ignore'>'</span><span class='ignore'>,</span> <span class='word'>p</span><span class='ignore'>:</span><span class='word'>100</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='ignore'>{</span><span class='word'>i</span><span class='ignore'>:</span><span class='ignore'>`</span><span class='word'>Cambridge</span><span class='ignore'>'</span><span class='ignore'>,</span> <span class='word'>p</span><span class='ignore'>:</span><span class='word'>110</span><span class='ignore'>}</span><span class='ignore'>]</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{lcverbatim}</span><br>
<br>
<span class='cmd'>\vspace</span><span class='ignore'>{</span><span class='ignore'>5mm</span><span class='ignore'>}</span><br>
<br>
	<span class='word'>The</span> <span class='word'>library</span> <span class='word'>contains</span> <span class='word'>both</span> <span class='word'>client</span> <span class='word'>and</span> <span class='word'>a</span> <span class='word'>server</span> <span class='word'>code</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>server</span> <span class='word'>provides</span> <span class='word'>a</span> <span class='word'>global</span><span class='ignore'>,</span> <span class='word'>serialized</span> <span class='word'>order</span> <span class='word'>of</span> <span class='word'>operations</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>applied</span> <span class='word'>on</span> <span class='word'>each</span> <span class='word'>client</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>server</span> <span class='word'>also</span> <span class='word'>transforms</span> <span class='word'>concurrent</span> <span class='word'>operations</span> <span class='word'>against</span> <span class='word'>each</span> <span class='word'>other</span><span class='ignore'>,</span> <span class='word'>but</span> <span class='word'>has</span> <span class='word'>the</span> <span class='word'>choice</span> <span class='word'>of</span> <span class='word'>rejecting</span> <span class='word'>an</span> <span class='word'>operation</span> <span class='word'>if</span> <span class='word'>the</span> <span class='word'>target</span> <span class='word'>document</span> <span class='word'>version</span> <span class='word'>is</span> <span class='word'>too</span> <span class='word'>old</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>order</span> <span class='word'>to</span> <span class='word'>transform</span> <span class='word'>operations</span> <span class='word'>against</span> <span class='word'>each</span> <span class='word'>other</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>server</span> <span class='word'>must</span> <span class='word'>maintain</span> <span class='word'>a</span> <span class='word'>list</span> <span class='word'>of</span> <span class='word'>past</span> <span class='word'>operations</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>has</span> <span class='word'>an</span> <span class='word'>effect</span> <span class='word'>on</span> <span class='word'>memory</span> <span class='word'>consumption</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>is</span> <span class='word'>confirmed</span> <span class='word'>in</span> <span class='ignore'>[</span><span class='word'>reference</span> <span class='word'>needed</span> <span class='word'>to</span> <span class='word'>experiment</span><span class='ignore'>]</span><span class='ignore'>.</span><br>
	<br>
	<span class='word'>ShareJS</span> <span class='word'>clients</span> <span class='word'>can</span> <span class='word'>also</span> <span class='word'>only</span> <span class='word'>have</span> <span class='word'>one</span> <span class='word'>packet</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>in</span> <span class='word'>flight</span> <span class='word'>to</span> <span class='word'>a</span> <span class='word'>server</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>engenders</span> <span class='word'>the</span> <span class='word'>need</span> <span class='word'>for</span> <span class='word'>combining</span> <span class='word'>multiple</span> <span class='word'>operations</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>single</span> <span class='word'>packet</span><span class='ignore'>.</span> <span class='word'>However</span><span class='ignore'>,</span> <span class='word'>this</span> <span class='word'>has</span> <span class='word'>implications</span> <span class='word'>for</span> <span class='word'>packet</span> <span class='word'>size</span> <span class='word'>and</span> <span class='word'>quantity</span> <span class='word'>as</span> <span class='word'>network</span> <span class='word'>latency</span> <span class='word'>grows</span> <span class='ignore'>[</span><span class='word'>reference</span> <span class='word'>to</span> <span class='word'>experiment</span><span class='ignore'>]</span><span class='ignore'>.</span> <span class='word'>Additionally</span><span class='ignore'>,</span> <span class='word'>since</span> <span class='word'>the</span> <span class='word'>server</span> <span class='word'>can</span> <span class='word'>reject</span> <span class='word'>operations</span> <span class='word'>that</span> <span class='word'>were</span> <span class='word'>generated</span> <span class='word'>and</span> <span class='word'>applied</span> <span class='word'>at</span> <span class='word'>a</span> <span class='word'>client</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>clients</span> <span class='word'>must</span> <span class='word'>be</span> <span class='word'>able</span> <span class='word'>to</span> <span class='word'>undo</span> <span class='word'>rejected</span> <span class='word'>operations</span><span class='ignore'>,</span> <span class='word'>as</span> <span class='word'>well</span> <span class='word'>as</span> <span class='word'>manage</span> <span class='word'>any</span> <span class='word'>subsequent</span><span class='ignore'>,</span> <span class='word'>dependent</span> <span class='word'>operations</span> <span class='word'>that</span> <span class='word'>have</span> <span class='word'>occurred</span> <span class='ignore'>(</span><span class='word'>this</span> <span class='word'>is</span> <span class='word'>one</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>key</span> <span class='word'>parts</span> <span class='word'>of</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>transformation</span><span class='ignore'>}</span> <span class='word'>of</span> <span class='word'>operations</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>To</span> <span class='word'>enable</span> <span class='word'>this</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>clients</span> <span class='word'>must</span> <span class='word'>each</span> <span class='word'>have</span> <span class='word'>a</span> <span class='word'>list</span> <span class='word'>of</span> <span class='word'>past</span> <span class='word'>operations</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>also</span> <span class='word'>affects</span> <span class='word'>memory</span> <span class='word'>use</span> <span class='ignore'>[</span><span class='word'>reference</span> <span class='word'>to</span> <span class='word'>experiment</span><span class='ignore'>]</span><span class='ignore'>.</span><br>
<br>
	<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Analysis</span><span class='ignore'>}</span><br>
	<br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Memory</span><span class='ignore'>}</span><br>
	<br>
	<span class='ignore'>*</span><span class='ignore'>*</span><span class='ignore'>*</span><span class='word'>This</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>redone</span><span class='ignore'>,</span> <span class='word'>for</span> <span class='word'>instance</span> <span class='word'>ops</span> <span class='word'>grow</span> <span class='word'>in</span> <span class='word'>size</span> <span class='word'>as</span> <span class='word'>document</span> <span class='word'>number</span> <span class='word'>grows</span><span class='ignore'>*</span><span class='ignore'>*</span><span class='ignore'>*</span><br>
	<br>
	<span class='word'>Given</span> <span class='word'>our</span> <span class='word'>rough</span> <span class='word'>understanding</span> <span class='word'>of</span> <span class='word'>CRDTs</span> <span class='word'>and</span> <span class='word'>ShareJS</span><span class='ignore'>,</span> <span class='word'>we</span> <span class='word'>can</span> <span class='word'>make</span> <span class='word'>hypotheses</span> <span class='word'>about</span> <span class='word'>the</span> <span class='word'>quantitative</span> <span class='word'>results</span> <span class='word'>that</span> <span class='word'>might</span> <span class='word'>be</span> <span class='word'>obtained</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>terms</span> <span class='word'>of</span> <span class='word'>basic</span> <span class='word'>memory</span> <span class='word'>requirements</span><span class='ignore'>,</span> <span class='word'>each</span> <span class='word'>ShareJS</span> <span class='word'>client</span> <span class='word'>requires</span> <span class='word'>storing</span> <span class='word'>the</span> <span class='word'>current</span> <span class='word'>document</span> <span class='word'>string</span><span class='ignore'>,</span> <span class='word'>along</span> <span class='word'>with</span> <span class='word'>past</span> <span class='word'>operations</span><span class='ignore'>.</span> <span class='word'>At</span> <span class='word'>worst</span><span class='ignore'>,</span> <span class='word'>each</span> <span class='word'>character</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>string</span> <span class='word'>was</span> <span class='word'>delivered</span> <span class='word'>as</span> <span class='word'>an</span> <span class='word'>individual</span> <span class='word'>operation</span><span class='ignore'>,</span> <span class='word'>so</span> <span class='word'>given</span> <span class='word'>n</span> <span class='word'>characters</span> <span class='word'>we</span> <span class='word'>expect</span> <span class='mathgroup'>$</span><span class='math'>O</span><span class='math'>(</span><span class='math'>2n</span><span class='math'>)</span><span class='mathgroup'>$</span> <span class='ignore'>=</span> <span class='mathgroup'>$</span><span class='math'>O</span><span class='math'>(</span><span class='math'>n</span><span class='math'>)</span><span class='mathgroup'>$</span> <span class='word'>memory</span> <span class='word'>usage</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>server</span> <span class='word'>must</span> <span class='word'>also</span> <span class='word'>store</span> <span class='word'>a</span> <span class='word'>list</span> <span class='word'>of</span> <span class='word'>these</span> <span class='word'>operations</span><span class='ignore'>,</span> <span class='word'>but</span> <span class='word'>the</span> <span class='word'>overall</span> <span class='word'>cost</span> <span class='word'>is</span> <span class='word'>still</span> <span class='mathgroup'>$</span><span class='math'>O</span><span class='math'>(</span><span class='math'>n</span><span class='math'>)</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <span class='word'>On</span> <span class='word'>the</span> <span class='word'>other</span> <span class='word'>hand</span><span class='ignore'>,</span> <span class='word'>CRDTs</span> <span class='word'>at</span> <span class='word'>worst</span> <span class='word'>tag</span> <span class='word'>each</span> <span class='word'>character</span> <span class='word'>with</span> <span class='word'>a</span> <span class='word'>unique</span> <span class='word'>identifier</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>largest</span> <span class='word'>identifier</span> <span class='word'>is</span> <span class='mathgroup'>$</span><span class='math'>O</span><span class='math'>(</span><span class='math'>log</span><span class='math'>(</span><span class='math'>n</span><span class='math'>)</span><span class='math'>)</span><span class='mathgroup'>$</span> <span class='word'>characters</span> <span class='word'>long</span> <span class='ignore'>(</span><span class='word'>assuming</span> <span class='word'>increasing</span> <span class='word'>natural</span> <span class='word'>numbers</span> <span class='word'>as</span> <span class='word'>tags</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>leads</span> <span class='word'>to</span> <span class='mathgroup'>$</span><span class='math'>O</span><span class='math'>(</span><span class='math'>nlog</span><span class='math'>(</span><span class='math'>n</span><span class='math'>)</span><span class='math'>)</span><span class='mathgroup'>$</span> <span class='word'>cost</span> <span class='word'>overall</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>is</span> <span class='word'>slightly</span> <span class='word'>higher</span> <span class='word'>than</span> <span class='word'>ShareJS's</span> <span class='word'>linear</span> <span class='word'>growth</span><span class='ignore'>.</span><br>
	<br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Network</span><span class='ignore'>}</span><br>
	<br>
	<span class='word'>Given</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>system</span> <span class='word'>will</span> <span class='word'>run</span> <span class='word'>over</span> <span class='word'>a</span> <span class='word'>P2P</span> <span class='word'>network</span><span class='ignore'>,</span> <span class='word'>while</span> <span class='word'>ShareJS</span> <span class='word'>requires</span> <span class='word'>a</span> <span class='word'>server</span><span class='ignore'>,</span> <span class='word'>as</span> <span class='word'>long</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>P2P</span> <span class='word'>network</span> <span class='word'>is</span> <span class='word'>more</span> <span class='word'>connected</span> <span class='word'>than</span> <span class='word'>a</span> <span class='word'>star</span> <span class='word'>topology</span> <span class='ignore'>(</span><span class='word'>equivalent</span> <span class='word'>to</span> <span class='word'>client</span><span class='ignore'>/</span><span class='word'>server</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>average</span> <span class='word'>latency</span> <span class='word'>for</span> <span class='word'>all</span> <span class='word'>the</span> <span class='word'>clients</span> <span class='word'>to</span> <span class='word'>receive</span> <span class='word'>data</span> <span class='word'>should</span> <span class='word'>be</span> <span class='word'>lower</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>fact</span><span class='ignore'>,</span> <span class='word'>at</span> <span class='word'>best</span> <span class='word'>a</span> <span class='word'>P2P</span> <span class='word'>network</span> <span class='word'>will</span> <span class='word'>cut</span> <span class='word'>the</span> <span class='word'>time</span> <span class='word'>to</span> <span class='word'>receive</span> <span class='word'>an</span> <span class='word'>update</span> <span class='word'>to</span> <span class='word'>half</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>client</span><span class='ignore'>/</span><span class='word'>server</span> <span class='word'>network</span><span class='ignore'>.</span> <br>
	<br>
	<span class='word'>In</span> <span class='word'>terms</span> <span class='word'>of</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>characters</span> <span class='word'>sent</span> <span class='word'>over</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>per</span> <span class='word'>action</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>difficult</span> <span class='word'>to</span> <span class='word'>make</span> <span class='word'>a</span> <span class='word'>prediction</span> <span class='word'>due</span> <span class='word'>to</span> <span class='word'>optimizations</span> <span class='word'>that</span> <span class='word'>may</span> <span class='word'>or</span> <span class='word'>may</span> <span class='word'>not</span> <span class='word'>be</span> <span class='word'>implemented</span><span class='ignore'>.</span> <span class='word'>However</span><span class='ignore'>,</span> <span class='word'>given</span> <span class='word'>a</span> <span class='word'>basic</span> <span class='word'>assumption</span> <span class='word'>of</span> <span class='word'>each</span> <span class='word'>character</span> <span class='word'>inserted</span> <span class='word'>into</span> <span class='word'>a</span> <span class='word'>CRDT</span> <span class='word'>also</span> <span class='word'>requiring</span> <span class='word'>an</span> <span class='word'>identifier</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>sent</span><span class='ignore'>,</span> <span class='word'>we</span> <span class='word'>get</span> <span class='word'>an</span> <span class='mathgroup'>$</span><span class='math'>\Theta</span><span class='math'>(</span><span class='math'>nlog</span><span class='math'>(</span><span class='math'>n</span><span class='math'>)</span><span class='math'>)</span><span class='mathgroup'>$</span> <span class='word'>space</span> <span class='word'>complexity</span> <span class='word'>again</span><span class='ignore'>.</span> <span class='word'>On</span> <span class='word'>the</span> <span class='word'>other</span> <span class='word'>hand</span><span class='ignore'>,</span> <span class='word'>ShareJS</span> <span class='word'>sends</span> <span class='word'>one</span> <span class='word'>character</span> <span class='word'>or</span> <span class='word'>word</span> <span class='word'>at</span> <span class='word'>a</span> <span class='word'>time</span><span class='ignore'>,</span> <span class='word'>plus</span> <span class='word'>an</span> <span class='word'>index</span> <span class='word'>and</span> <span class='word'>a</span> <span class='word'>document</span> <span class='word'>version</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>operation</span> <span class='word'>was</span> <span class='word'>performed</span> <span class='word'>on</span><span class='ignore'>.</span> <span class='word'>If</span> <span class='word'>there</span> <span class='word'>are</span> <span class='mathgroup'>$</span><span class='math'>n</span><span class='mathgroup'>$</span> <span class='word'>characters</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>document</span><span class='ignore'>,</span> <span class='word'>there</span> <span class='word'>are</span> <span class='word'>at</span> <span class='word'>most</span> <span class='mathgroup'>$</span><span class='math'>n</span><span class='mathgroup'>$</span> <span class='word'>versions</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>length</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>decimal</span> <span class='word'>string</span> <span class='mathgroup'>$</span><span class='math'>n</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='mathgroup'>$</span><span class='math'>log</span><span class='math'>(</span><span class='math'>n</span><span class='math'>)</span><span class='mathgroup'>$</span> <span class='word'>characters</span><span class='ignore'>.</span> <span class='word'>Thus</span> <span class='word'>we</span> <span class='word'>get</span> <span class='word'>an</span> <span class='word'>approximate</span> <span class='mathgroup'>$</span><span class='math'>\Theta</span><span class='math'>(</span><span class='math'>nlog</span><span class='math'>(</span><span class='math'>n</span><span class='math'>)</span><span class='math'>)</span><span class='mathgroup'>$</span> <span class='word'>packets</span> <span class='word'>sent</span> <span class='word'>for</span> <span class='word'>ShareJS</span><span class='ignore'>.</span><br>
	<br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Processor</span> <span class='hword'>Load</span><span class='ignore'>}</span><br>
	<br>
	<span class='word'>The</span> <span class='word'>relative</span> <span class='word'>algorithmic</span> <span class='word'>simplicity</span> <span class='word'>of</span> <span class='word'>CRDTs</span> <span class='word'>versus</span> <span class='word'>OT</span> <span class='word'>hints</span> <span class='word'>that</span> <span class='word'>CRDTs</span> <span class='word'>should</span> <span class='word'>be</span> <span class='word'>computationally</span> <span class='word'>more</span> <span class='word'>efficient</span><span class='ignore'>.</span> <span class='word'>If</span> <span class='word'>we</span> <span class='word'>assume</span> <span class='word'>that</span> <span class='word'>an</span> <span class='word'>insert</span> <span class='word'>and</span> <span class='word'>delete</span> <span class='word'>operation</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>done</span> <span class='word'>in</span> <span class='word'>constant</span> <span class='word'>time</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>CRDT</span><span class='ignore'>,</span> <span class='word'>then</span> <span class='word'>the</span> <span class='word'>most</span> <span class='word'>expensive</span> <span class='word'>operation</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>done</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>linear</span> <span class='word'>time</span> <span class='word'>retrieval</span> <span class='word'>and</span> <span class='word'>update</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>string</span> <span class='word'>displayed</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>user</span><span class='ignore'>.</span> <span class='word'>Operational</span> <span class='word'>transformations</span> <span class='word'>not</span> <span class='word'>only</span> <span class='word'>need</span> <span class='word'>to</span> <span class='word'>update</span> <span class='word'>the</span> <span class='word'>displayed</span> <span class='word'>string</span><span class='ignore'>,</span> <span class='word'>but</span> <span class='word'>also</span> <span class='word'>need</span> <span class='word'>to</span> <span class='word'>transform</span> <span class='ignore'>(</span><span class='word'>either</span> <span class='word'>on</span> <span class='word'>clients</span> <span class='word'>or</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>server</span><span class='ignore'>)</span> <span class='word'>changes</span> <span class='word'>against</span> <span class='word'>any</span> <span class='word'>concurrent</span> <span class='word'>edits</span><span class='ignore'>.</span> <span class='word'>While</span> <span class='word'>this</span> <span class='word'>is</span> <span class='word'>hard</span> <span class='word'>to</span> <span class='word'>quantify</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>reasonable</span> <span class='word'>to</span> <span class='word'>expect</span> <span class='word'>that</span> <span class='word'>achieving</span> <span class='word'>convergence</span> <span class='word'>is</span> <span class='word'>more</span> <span class='word'>processor</span> <span class='word'>intensive</span> <span class='word'>with</span> <span class='word'>OTs</span> <span class='word'>than</span> <span class='word'>CRDTs</span><span class='ignore'>.</span><br>
	<br>
	<br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Client-Server</span> <span class='hword'>versus</span> <span class='hword'>Peer</span> <span class='hword'>to</span> <span class='hword'>Peer</span><span class='ignore'>}</span><br>
	<br>
	<span class='word'>It</span> <span class='word'>is</span> <span class='word'>worth</span> <span class='word'>examining</span> <span class='word'>what</span> <span class='word'>other</span> <span class='word'>reasons</span> <span class='word'>there</span> <span class='word'>might</span> <span class='word'>be</span> <span class='word'>for</span> <span class='word'>using</span> <span class='word'>a</span> <span class='word'>system</span> <span class='word'>that</span> <span class='word'>is</span> <span class='word'>capable</span> <span class='word'>of</span> <span class='word'>running</span> <span class='word'>over</span> <span class='word'>a</span> <span class='word'>P2P</span> <span class='word'>network</span><span class='ignore'>.</span> <span class='word'>Generally</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>key</span> <span class='word'>element</span> <span class='word'>is</span> <span class='word'>privacy</span><span class='ignore'>.</span> <span class='word'>A</span> <span class='word'>P2P</span> <span class='word'>network</span> <span class='word'>can</span> <span class='word'>run</span> <span class='word'>over</span> <span class='word'>a</span> <span class='word'>secure</span><span class='ignore'>,</span> <span class='word'>anonymous</span> <span class='word'>network</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>Tor</span><span class='cmd'>\footnote</span><span class='ignore'>{</span><span class='oword'>\url</span><span class='ignore'>{</span><span class='ignore'>https</span><span class='ignore'>:</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'>www.torproject.org</span><span class='ignore'>/</span><span class='ignore'>docs</span><span class='ignore'>/</span><span class='ignore'>faq</span><span class='ignore'>}</span><span class='ignore'>}</span> <span class='word'>and</span> <span class='word'>since</span> <span class='word'>no</span> <span class='word'>middleware</span> <span class='word'>needs</span> <span class='word'>to</span> <span class='word'>intercept</span> <span class='word'>and</span> <span class='word'>read</span> <span class='word'>packets</span><span class='ignore'>,</span> <span class='word'>encryption</span> <span class='word'>may</span> <span class='word'>be</span> <span class='word'>used</span><span class='ignore'>.</span> <span class='word'>OT</span> <span class='word'>systems</span> <span class='word'>almost</span> <span class='word'>always</span> <span class='word'>require</span> <span class='word'>a</span> <span class='word'>server</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>may</span> <span class='word'>need</span> <span class='word'>to</span> <span class='word'>transform</span> <span class='word'>operations</span> <span class='word'>against</span> <span class='word'>each</span> <span class='word'>other</span> <span class='ignore'>–</span> <span class='word'>which</span> <span class='word'>requires</span> <span class='word'>transmitting</span> <span class='word'>all</span> <span class='word'>operations</span> <span class='word'>in</span> <span class='word'>plain</span> <span class='word'>text</span> <span class='word'>and</span> <span class='word'>kills</span> <span class='word'>any</span> <span class='word'>hope</span> <span class='word'>of</span> <span class='word'>privacy</span><span class='ignore'>.</span> <span class='word'>One</span> <span class='word'>benefit</span> <span class='word'>of</span> <span class='word'>using</span> <span class='word'>a</span> <span class='word'>central</span> <span class='word'>server</span> <span class='word'>is</span> <span class='word'>that</span> <span class='word'>there</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>natural</span> <span class='ignore'>“</span><span class='word'>cloud</span><span class='ignore'>”</span> <span class='word'>repository</span> <span class='word'>in</span> <span class='word'>which</span> <span class='word'>to</span> <span class='word'>store</span> <span class='word'>the</span> <span class='word'>contents</span> <span class='word'>of</span> <span class='word'>documents</span><span class='ignore'>;</span> <span class='word'>a</span> <span class='word'>P2P</span> <span class='word'>network</span> <span class='word'>either</span> <span class='word'>requires</span> <span class='word'>some</span> <span class='word'>peers</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>connected</span> <span class='word'>in</span> <span class='word'>order</span> <span class='word'>to</span> <span class='word'>download</span> <span class='word'>the</span> <span class='word'>latest</span> <span class='word'>version</span><span class='ignore'>,</span> <span class='word'>or</span> <span class='word'>a</span> <span class='word'>server</span> <span class='word'>to</span> <span class='word'>have</span> <span class='word'>a</span> <span class='word'>repository</span> <span class='word'>of</span> <span class='word'>documents</span><span class='ignore'>.</span> <span class='word'>Similar</span> <span class='word'>issues</span> <span class='word'>face</span> <span class='word'>state</span> <span class='word'>replay</span> <span class='word'>for</span> <span class='word'>new</span> <span class='word'>clients</span> <span class='word'>that</span> <span class='word'>join</span> <span class='word'>an</span> <span class='word'>active</span> <span class='word'>network</span><span class='ignore'>;</span> <span class='word'>this</span> <span class='word'>is</span> <span class='word'>examined</span> <span class='word'>in</span> <span class='word'>section</span> <span class='ignore'>[</span><span class='word'>SECTION</span> <span class='word'>REF</span><span class='ignore'>]</span><span class='ignore'>.</span> <span class='word'>Luckily</span><span class='ignore'>,</span> <span class='word'>in</span> <span class='word'>terms</span> <span class='word'>of</span> <span class='word'>privacy</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>central</span> <span class='word'>repository</span> <span class='word'>for</span> <span class='word'>CRDT</span> <span class='word'>based</span> <span class='word'>documents</span> <span class='word'>would</span> <span class='word'>not</span> <span class='word'>need</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>able</span> <span class='word'>to</span> <span class='word'>read</span> <span class='word'>the</span> <span class='word'>contents</span><span class='ignore'>,</span> <span class='word'>just</span> <span class='word'>distribute</span> <span class='word'>them</span> <span class='word'>on</span> <span class='word'>demand</span><span class='ignore'>.</span> <span class='word'>Lastly</span><span class='ignore'>,</span> <span class='word'>established</span> <span class='word'>P2P</span> <span class='word'>networks</span> <span class='word'>have</span> <span class='word'>further</span> <span class='word'>benefits</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>lacking</span> <span class='word'>single</span> <span class='word'>points</span> <span class='word'>of</span> <span class='word'>failure</span><span class='ignore'>,</span> <span class='word'>lower</span> <span class='word'>probability</span> <span class='word'>of</span> <span class='word'>downtime</span> <span class='word'>and</span> <span class='word'>lower</span> <span class='word'>operational</span> <span class='word'>cost</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>provider</span><span class='ignore'>,</span> <span class='word'>but</span> <span class='word'>these</span> <span class='word'>properties</span> <span class='word'>and</span> <span class='word'>their</span> <span class='word'>implications</span> <span class='word'>are</span> <span class='word'>not</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>scope</span> <span class='word'>of</span> <span class='word'>this</span> <span class='word'>project</span><span class='ignore'>.</span><br>
	<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Starting</span> <span class='hword'>Point</span><span class='ignore'>}</span><br>
<br>
<span class='word'>As</span> <span class='word'>stated</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>proposal</span><span class='ignore'>,</span> <span class='word'>I</span> <span class='word'>had</span> <span class='word'>prior</span> <span class='word'>experience</span> <span class='word'>with</span> <span class='word'>ShareJS</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>was</span> <span class='word'>leveraged</span> <span class='word'>when</span> <span class='word'>creating</span> <span class='word'>the</span> <span class='word'>comparative</span> <span class='word'>system</span><span class='ignore'>.</span> <span class='word'>Additionally</span><span class='ignore'>,</span> <span class='word'>I</span> <span class='word'>was</span> <span class='word'>already</span> <span class='word'>proficient</span> <span class='word'>in</span> <span class='word'>Javascript</span> <span class='word'>and</span> <span class='word'>had</span> <span class='word'>working</span> <span class='word'>knowledge</span> <span class='word'>of</span> <span class='word'>Typescript</span><span class='ignore'>,</span> <span class='word'>my</span> <span class='word'>main</span> <span class='word'>implementation</span> <span class='word'>language</span><span class='ignore'>.</span> <span class='word'>However</span><span class='ignore'>,</span> <span class='word'>almost</span> <span class='word'>all</span> <span class='word'>other</span> <span class='word'>aspects</span> <span class='word'>were</span> <span class='word'>new</span><span class='ignore'>,</span> <span class='word'>notably</span><span class='ignore'>:</span> <span class='word'>learning</span> <span class='word'>about</span> <span class='word'>CRDTs</span><span class='ignore'>,</span> <span class='word'>writing</span> <span class='word'>test</span> <span class='word'>cases</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>process</span> <span class='word'>of</span> <span class='word'>creating</span> <span class='word'>experiments</span> <span class='word'>and</span> <span class='word'>using</span> <span class='word'>these</span> <span class='word'>to</span> <span class='word'>profile</span> <span class='word'>performance</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>how</span> <span class='word'>to</span> <span class='word'>implement</span> <span class='word'>a</span> <span class='word'>simulation</span><span class='ignore'>.</span><br>
<br>
<span class='word'>As</span> <span class='word'>the</span> <span class='word'>project</span> <span class='word'>progressed</span><span class='ignore'>,</span> <span class='word'>several</span> <span class='word'>courses</span> <span class='word'>contributed</span> <span class='word'>or</span> <span class='word'>reaffirmed</span> <span class='word'>ideas</span> <span class='word'>I</span> <span class='word'>could</span> <span class='word'>use</span><span class='ignore'>.</span> <span class='word'>Notably</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>Computer</span> <span class='word'>Systems</span> <span class='word'>Modeling</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>compsysmodeling</span><span class='ignore'>}</span> <span class='word'>course</span> <span class='word'>had</span> <span class='word'>a</span> <span class='word'>short</span> <span class='word'>section</span> <span class='word'>on</span> <span class='word'>simulation</span> <span class='word'>which</span> <span class='word'>aligned</span> <span class='word'>very</span> <span class='word'>well</span> <span class='word'>with</span> <span class='word'>what</span> <span class='word'>I</span> <span class='word'>had</span> <span class='word'>already</span> <span class='word'>implemented</span> <span class='word'>at</span> <span class='word'>the</span> <span class='word'>time</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>Part</span> <span class='word'>IB</span> <span class='word'>course</span> <span class='word'>on</span> <span class='word'>Concurrent</span> <span class='word'>and</span> <span class='word'>Distributed</span> <span class='word'>Systems</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>concdistsystems</span><span class='ignore'>}</span> <span class='word'>provided</span> <span class='word'>valuable</span> <span class='word'>background</span> <span class='word'>towards</span> <span class='word'>Lamport</span> <span class='word'>and</span> <span class='word'>Vector</span> <span class='word'>clocks</span><span class='ignore'>,</span> <span class='word'>causality</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>total</span> <span class='word'>orderings</span> <span class='word'>in</span> <span class='word'>distributed</span> <span class='word'>systems</span><span class='ignore'>;</span> <span class='word'>the</span> <span class='word'>IB</span> <span class='word'>Computer</span> <span class='word'>Networking</span> <span class='word'>course</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>computernetworking</span><span class='ignore'>}</span> <span class='word'>gave</span> <span class='word'>me</span> <span class='word'>a</span> <span class='word'>foundation</span> <span class='word'>and</span> <span class='word'>overview</span> <span class='word'>helpful</span> <span class='word'>for</span> <span class='word'>planning</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>component</span> <span class='word'>of</span> <span class='word'>my</span> <span class='word'>system</span><span class='ignore'>.</span><br>
<br>
<br>
<span class='comment'>%Lastly, the Mobile and Sensor Systems course\footnote{\url{http://www.cl.cam.ac.uk/teaching/1617/MobSensSys/}} gave me some ideas when seeking alternatives to the flooding implemented in my network simulation.</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Requirements</span> <span class='hword'>Analysis</span><span class='ignore'>}</span><br>
<span class='word'>To</span> <span class='word'>reiterate</span> <span class='word'>the</span> <span class='word'>success</span> <span class='word'>criteria</span> <span class='word'>listed</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>project</span> <span class='word'>proposal</span><span class='ignore'>,</span> <span class='word'>I</span> <span class='word'>hoped</span> <span class='word'>to</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{enumerate}</span><br>
<span class='cmd'>\item</span> <span class='word'>Implement</span> <span class='word'>a</span> <span class='word'>concurrent</span><span class='ignore'>,</span> <span class='word'>distributed</span> <span class='word'>text</span> <span class='word'>editor</span> <span class='word'>based</span> <span class='word'>on</span> <span class='word'>CRDTs</span> <br>
<span class='cmd'>\item</span> <span class='word'>Pass</span> <span class='word'>correctness</span> <span class='word'>tests</span> <span class='word'>for</span> <span class='word'>this</span> <span class='word'>CRDT</span><br>
<span class='cmd'>\item</span> <span class='word'>Obtain</span> <span class='word'>and</span> <span class='word'>compare</span> <span class='word'>quantitative</span> <span class='word'>results</span> <span class='word'>from</span> <span class='word'>ShareJS</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>based</span> <span class='word'>systems</span><br>
<span class='envir'>\end</span><span class='envir'>{enumerate}</span><br>
<br>
<span class='word'>Points</span> <span class='word'>one</span> <span class='word'>and</span> <span class='word'>three</span> <span class='word'>have</span> <span class='word'>multiple</span> <span class='word'>unspecified</span> <span class='word'>subgoals</span><span class='ignore'>.</span> <span class='word'>For</span> <span class='word'>clarity</span><span class='ignore'>,</span> <span class='word'>Table</span><span class='ignore'>~</span><span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>table</span><span class='ignore'>:</span> <span class='ignore'>goals</span><span class='ignore'>}</span> <span class='word'>lists</span> <span class='word'>these</span> <span class='word'>and</span> <span class='word'>their</span> <span class='word'>respective</span> <span class='word'>importance</span> <span class='word'>and</span> <span class='word'>difficulty</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>goals</span> <span class='word'>closely</span> <span class='word'>mirror</span> <span class='word'>the</span> <span class='ignore'>`</span><span class='word'>Detailed</span> <span class='word'>Project</span> <span class='word'>Structure</span><span class='ignore'>'</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>proposal</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{center}</span><br>
<span class='envir'>\begin</span><span class='envir'>{table}</span><span class='option'>[H]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Project</span> <span class='oword'>Goals</span><span class='ignore'>,</span> <span class='oword'>Priority</span><span class='ignore'>,</span> <span class='oword'>and</span> <span class='oword'>Difficulty</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>table</span><span class='ignore'>:</span> <span class='ignore'>goals</span><span class='ignore'>}</span><br>
<span class='exclenv'>\begin</span><span class='exclenv'>{tabular}</span><span class='ignore'>{</span><span class='ignore'>@</span><span class='ignore'>{</span><span class='ignore'>}</span><span class='ignore'>lll</span><span class='ignore'>@</span><span class='ignore'>{</span><span class='ignore'>}</span><span class='ignore'>}</span><br>
<span class='ignore'>Goal</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	<span class='ignore'>&amp;</span> <span class='ignore'>Priority</span> <span class='ignore'>&amp;</span> <span class='ignore'>Difficulty</span> <span class='exclcmd'>\\</span> <span class='exclcmd'>\toprule</span><br>
<span class='ignore'>Implement</span> <span class='ignore'>and</span> <span class='ignore'>unit</span> <span class='ignore'>test</span> <span class='ignore'>core</span> <span class='ignore'>CRDT</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	<span class='ignore'>&amp;</span> <span class='ignore'>High</span>&nbsp; &nbsp;  <span class='ignore'>&amp;</span> <span class='ignore'>Medium</span> <span class='exclcmd'>\\</span> <span class='exclcmd'>\midrule</span><br>
<span class='ignore'>Implement</span> <span class='ignore'>network</span> <span class='ignore'>simulation</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='ignore'>&amp;</span> <span class='ignore'>High</span>&nbsp; &nbsp;  <span class='ignore'>&amp;</span> <span class='ignore'>High</span>&nbsp;  <span class='exclcmd'>\\</span> <span class='exclcmd'>\midrule</span><br>
<span class='ignore'>Optimize</span> <span class='ignore'>CRDT</span> <span class='ignore'>Insert</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='ignore'>&amp;</span> <span class='ignore'>Low</span>&nbsp; &nbsp; &nbsp; <span class='ignore'>&amp;</span> <span class='ignore'>Low</span>&nbsp; &nbsp; <span class='exclcmd'>\\</span> <span class='exclcmd'>\midrule</span><br>
<span class='ignore'>Design</span> <span class='ignore'>experiment</span> <span class='ignore'>format</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='ignore'>&amp;</span> <span class='ignore'>High</span>&nbsp; &nbsp;  <span class='ignore'>&amp;</span> <span class='ignore'>Low</span>&nbsp; &nbsp; <span class='exclcmd'>\\</span> <span class='exclcmd'>\midrule</span><br>
<span class='ignore'>Create</span> <span class='ignore'>comparative</span> <span class='ignore'>ShareJS</span> <span class='ignore'>system</span>&nbsp; &nbsp; 	<span class='ignore'>&amp;</span> <span class='ignore'>High</span>&nbsp; &nbsp;  <span class='ignore'>&amp;</span> <span class='ignore'>Medium</span> <span class='exclcmd'>\\</span> <span class='exclcmd'>\midrule</span><br>
<span class='ignore'>Write</span> <span class='ignore'>log</span> <span class='ignore'>analysis</span> <span class='ignore'>scripts</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='ignore'>&amp;</span> <span class='ignore'>Medium</span>&nbsp;  <span class='ignore'>&amp;</span> <span class='ignore'>Low</span>&nbsp; &nbsp; <span class='exclcmd'>\\</span> <span class='exclcmd'>\bottomrule</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{tabular}</span><br>
<span class='envir'>\end</span><span class='envir'>{table}</span><br>
<span class='envir'>\end</span><span class='envir'>{center}</span><br>
<br>
<br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Software</span> <span class='hword'>Engineering</span><span class='ignore'>}</span><br>
<br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Libraries</span><span class='ignore'>}</span><br>
	<span class='word'>ShareJS</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>sharejs</span><span class='ignore'>}</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>main</span> <span class='word'>external</span> <span class='word'>resource</span> <span class='word'>I</span> <span class='word'>required</span><span class='ignore'>.</span> <span class='word'>It</span> <span class='word'>is</span> <span class='word'>released</span> <span class='word'>under</span> <span class='word'>the</span> <span class='word'>MIT</span> <span class='word'>license</span><span class='ignore'>.</span> <span class='word'>I</span> <span class='word'>used</span> <span class='word'>the</span> <span class='word'>simpler</span> <span class='word'>ShareJS</span> <span class='word'>v0.6.3</span> <span class='word'>rather</span> <span class='word'>than</span> <span class='word'>the</span> <span class='word'>more</span> <span class='word'>current</span> <span class='word'>ShareJS</span> <span class='word'>0.7</span><span class='ignore'>,</span> <span class='word'>also</span> <span class='word'>known</span> <span class='word'>as</span> <span class='word'>ShareDB</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>package</span> <span class='word'>was</span> <span class='word'>installed</span> <span class='word'>via</span> <span class='word'>the</span> <span class='word'>NPM</span><span class='cmd'>\footnote</span><span class='ignore'>{</span><span class='oword'>\url</span><span class='ignore'>{</span><span class='ignore'>https</span><span class='ignore'>:</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'>www.npmjs.com</span><span class='ignore'>/</span><span class='ignore'>}</span><span class='ignore'>}</span> <span class='word'>package</span> <span class='word'>manager</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>other</span> <span class='word'>large</span> <span class='word'>library</span> <span class='word'>I</span> <span class='word'>used</span> <span class='word'>was</span> <span class='word'>D3.js</span><span class='cmd'>\footnote</span><span class='ignore'>{</span><span class='oword'>\url</span><span class='ignore'>{</span><span class='ignore'>https</span><span class='ignore'>:</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'>d3js.org</span><span class='ignore'>/</span><span class='ignore'>}</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>commonly</span> <span class='word'>used</span> <span class='word'>data</span> <span class='word'>visualization</span> <span class='word'>tool</span> <span class='word'>that</span> <span class='word'>helped</span> <span class='word'>me</span> <span class='word'>build</span> <span class='word'>a</span> <span class='word'>dynamic</span> <span class='word'>network</span> <span class='word'>graph</span> <span class='word'>for</span> <span class='word'>debugging</span> <span class='word'>purposes</span><span class='ignore'>.</span> <span class='word'>I</span> <span class='word'>did</span> <span class='word'>a</span> <span class='word'>survey</span> <span class='word'>of</span> <span class='word'>other</span> <span class='word'>drawing</span> <span class='word'>libraries</span> <span class='word'>that</span> <span class='word'>might</span> <span class='word'>be</span> <span class='word'>simpler</span> <span class='word'>and</span> <span class='word'>lighter</span> <span class='word'>on</span> <span class='word'>resources</span><span class='ignore'>,</span> <span class='word'>however</span> <span class='word'>in</span> <span class='word'>terms</span> <span class='word'>of</span> <span class='word'>documentation</span><span class='ignore'>,</span> <span class='word'>ease</span> <span class='word'>of</span> <span class='word'>use</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>familiarity</span> <span class='word'>I</span> <span class='word'>did</span> <span class='word'>not</span> <span class='word'>find</span> <span class='word'>anything</span> <span class='word'>more</span> <span class='word'>suitable</span><span class='ignore'>.</span><br>
	<br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Languages</span><span class='ignore'>}</span><br>
	<span class='word'>The</span> <span class='word'>three</span> <span class='word'>main</span> <span class='word'>implementation</span> <span class='word'>languages</span><span class='ignore'>,</span> <span class='word'>by</span> <span class='word'>lines</span> <span class='word'>of</span> <span class='word'>code</span><span class='ignore'>,</span> <span class='word'>are</span> <span class='word'>Typescript</span><span class='cmd'>\footnote</span><span class='ignore'>{</span><span class='oword'>\url</span><span class='ignore'>{</span><span class='ignore'>http</span><span class='ignore'>:</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'>www.typescriptlang.org</span><span class='ignore'>/</span><span class='ignore'>}</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>Python</span> <span class='word'>2.7</span><span class='cmd'>\footnote</span><span class='ignore'>{</span><span class='oword'>\url</span><span class='ignore'>{</span><span class='ignore'>https</span><span class='ignore'>:</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'>www.python.org</span><span class='ignore'>/</span><span class='ignore'>}</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>Coffeescript</span><span class='ignore'>/</span><span class='word'>Javascript</span>&nbsp; <span class='ignore'>(</span><span class='word'>mainly</span> <span class='word'>in</span> <span class='word'>ShareJS</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>Reasons</span> <span class='word'>for</span> <span class='word'>choosing</span> <span class='word'>Typescript</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>primary</span> <span class='word'>language</span> <span class='word'>are</span> <span class='word'>familiarity</span><span class='ignore'>,</span> <span class='word'>how</span> <span class='word'>easily</span> <span class='word'>it</span> <span class='word'>integrates</span> <span class='word'>with</span> <span class='word'>web</span> <span class='word'>technologies</span> <span class='word'>and</span> <span class='word'>JSON</span> <span class='word'>objects</span><span class='ignore'>,</span> <span class='word'>typing</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>which</span> <span class='word'>helps</span> <span class='word'>with</span> <span class='word'>project</span> <span class='word'>scale</span> <span class='word'>and</span> <span class='word'>early</span> <span class='word'>error</span> <span class='word'>detection</span> <span class='ignore'>-</span><span class='ignore'>-</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>fact</span> <span class='word'>that</span> <span class='word'>ShareJS</span> <span class='word'>ships</span> <span class='word'>as</span> <span class='word'>Javascript</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>Typescript</span> <span class='word'>transpiles</span> <span class='word'>to</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>order</span> <span class='word'>to</span> <span class='word'>maximize</span> <span class='word'>code</span> <span class='word'>reuse</span> <span class='word'>and</span> <span class='word'>comparability</span> <span class='word'>of</span> <span class='word'>results</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>makes</span> <span class='word'>sense</span> <span class='word'>to</span> <span class='word'>run</span> <span class='word'>both</span> <span class='word'>systems</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>execution</span> <span class='word'>platform</span><span class='ignore'>,</span> <span class='word'>discussed</span> <span class='word'>next</span><span class='ignore'>.</span><br>
	<br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Tooling</span><span class='ignore'>}</span><br>
	<span class='word'>The</span> <span class='word'>testing</span> <span class='word'>platform</span> <span class='word'>needs</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>a</span> <span class='word'>web</span> <span class='word'>browser</span> <span class='word'>or</span> <span class='word'>NodeJS</span> <span class='word'>for</span> <span class='word'>compatibility</span> <span class='word'>with</span> <span class='word'>ShareJS</span><span class='ignore'>.</span> <span class='word'>I</span> <span class='word'>chose</span> <span class='word'>to</span> <span class='word'>use</span> <span class='word'>a</span> <span class='word'>browser</span> <span class='word'>due</span> <span class='word'>to</span> <span class='word'>familiarity</span> <span class='word'>and</span> <span class='word'>possibility</span> <span class='word'>of</span> <span class='word'>providing</span> <span class='word'>this</span> <span class='word'>work</span> <span class='word'>as</span> <span class='word'>an</span> <span class='word'>open</span> <span class='word'>source</span> <span class='word'>library</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>future</span><span class='ignore'>:</span> <span class='word'>it</span> <span class='word'>has</span> <span class='word'>a</span> <span class='word'>wider</span> <span class='word'>reach</span> <span class='word'>with</span> <span class='word'>browsers</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>most</span> <span class='word'>developer</span> <span class='word'>friendly</span> <span class='word'>choices</span> <span class='word'>are</span> <span class='word'>Mozilla</span> <span class='word'>Firefox</span><span class='cmd'>\footnote</span><span class='ignore'>{</span><span class='oword'>\url</span><span class='ignore'>{</span><span class='ignore'>https</span><span class='ignore'>:</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'>www.mozilla.org</span><span class='ignore'>/</span><span class='ignore'>en-US</span><span class='ignore'>/</span><span class='ignore'>firefox</span><span class='ignore'>/</span><span class='ignore'>new</span><span class='ignore'>/</span><span class='ignore'>}</span><span class='ignore'>}</span> <span class='word'>and</span> <span class='word'>Google</span> <span class='word'>Chrome</span><span class='cmd'>\footnote</span><span class='ignore'>{</span><span class='oword'>\url</span><span class='ignore'>{</span><span class='ignore'>https</span><span class='ignore'>:</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'>www.google.com</span><span class='ignore'>/</span><span class='ignore'>chrome</span><span class='ignore'>/</span><span class='ignore'>}</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>as</span> <span class='word'>both</span> <span class='word'>come</span> <span class='word'>with</span> <span class='word'>sophisticated</span> <span class='word'>debuggers</span> <span class='word'>and</span> <span class='word'>script</span> <span class='word'>inspection</span> <span class='word'>capabilities</span><span class='ignore'>.</span> <span class='word'>However</span><span class='ignore'>,</span> <span class='word'>both</span> <span class='word'>have</span> <span class='word'>issues</span> <span class='word'>for</span> <span class='word'>this</span> <span class='word'>project</span><span class='ignore'>.</span> <span class='word'>Firstly</span><span class='ignore'>,</span> <span class='word'>measuring</span> <span class='word'>API</span> <span class='word'>for</span> <span class='word'>measuring</span> <span class='word'>memory</span> <span class='word'>consumption</span> <span class='word'>in</span> <span class='word'>Firefox</span> <span class='word'>is</span> <span class='word'>complex</span> <span class='word'>and</span> <span class='word'>badly</span> <span class='word'>documented</span><span class='cmd'>\footnote</span><span class='ignore'>{</span><span class='oword'>\url</span><span class='ignore'>{</span><span class='ignore'>https</span><span class='ignore'>:</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'>developer.mozilla.org</span><span class='ignore'>/</span><span class='ignore'>en-US</span><span class='ignore'>/</span><span class='ignore'>docs</span><span class='ignore'>/</span><span class='ignore'>Mozilla</span><span class='ignore'>/</span><span class='ignore'>Tech</span><span class='ignore'>/</span><span class='ignore'>XPCOM</span><span class='ignore'>/</span><span class='ignore'>Reference</span><span class='ignore'>/</span><span class='ignore'>Interface</span><span class='ignore'>/</span><span class='ignore'>nsIMemoryReporterManager</span><span class='ignore'>}</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>On</span> <span class='word'>the</span> <span class='word'>other</span> <span class='word'>hand</span><span class='ignore'>,</span> <span class='word'>Chrome</span> <span class='word'>offers</span> <span class='word'>a</span> <span class='word'>simple</span> <span class='word'>interface</span> <span class='word'>to</span> <span class='word'>measure</span> <span class='word'>memory</span> <span class='word'>when</span> <span class='word'>certain</span> <span class='word'>flags</span> <span class='word'>are</span> <span class='word'>enabled</span><span class='ignore'>.</span> <span class='word'>Conversely</span><span class='ignore'>,</span> <span class='word'>I</span> <span class='word'>discovered</span> <span class='word'>Chrome</span> <span class='word'>does</span> <span class='word'>not</span> <span class='word'>allow</span> <span class='word'>more</span> <span class='word'>than</span> <span class='word'>6</span> <span class='word'>active</span> <span class='word'>TCP</span> <span class='word'>sessions</span> <span class='word'>to</span> <span class='word'>a</span> <span class='word'>single</span> <span class='word'>domain</span> <span class='word'>from</span> <span class='word'>one</span> <span class='word'>session</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>I</span> <span class='word'>needed</span> <span class='word'>to</span> <span class='word'>do</span> <span class='word'>when</span> <span class='word'>running</span> <span class='word'>an</span> <span class='word'>experiment</span> <span class='word'>with</span> <span class='word'>more</span> <span class='word'>than</span> <span class='word'>6</span> <span class='word'>clients</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>single</span> <span class='word'>browser</span> <span class='word'>tab</span><span class='ignore'>.</span> <span class='word'>Firefox</span> <span class='word'>has</span> <span class='word'>a</span> <span class='word'>simple</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>about</span><span class='ignore'>:</span><span class='word'>config</span><span class='ignore'>}</span> <span class='word'>setting</span> <span class='word'>where</span> <span class='word'>this</span> <span class='word'>limit</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>increased</span><span class='ignore'>.</span> <span class='word'>Luckily</span><span class='ignore'>,</span> <span class='word'>ShareJS</span> <span class='word'>contains</span> <span class='word'>a</span> <span class='word'>built</span> <span class='word'>in</span> <span class='word'>workaround</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>TCP</span> <span class='word'>limit</span> <span class='word'>most</span> <span class='word'>browsers</span> <span class='word'>have</span><span class='ignore'>.</span> <span class='word'>Thus</span> <span class='word'>with</span> <span class='word'>memory</span> <span class='word'>measurement</span> <span class='word'>support</span> <span class='word'>and</span> <span class='word'>a</span> <span class='word'>solution</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>TCP</span> <span class='word'>limit</span><span class='ignore'>,</span> <span class='word'>my</span> <span class='word'>platform</span> <span class='word'>of</span> <span class='word'>choice</span> <span class='word'>is</span> <span class='word'>Google</span> <span class='word'>Chrome</span> <span class='word'>version</span> <span class='word'>56</span><span class='ignore'>.</span><br>
	<br>
	<span class='word'>Before</span> <span class='word'>starting</span> <span class='word'>this</span> <span class='word'>project</span><span class='ignore'>,</span> <span class='word'>I</span> <span class='word'>was</span> <span class='word'>already</span> <span class='word'>familiar</span> <span class='word'>with</span> <span class='word'>a</span> <span class='word'>specific</span> <span class='word'>Typescript</span> <span class='word'>development</span> <span class='word'>stack</span> <span class='word'>and</span> <span class='word'>environment</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>wide</span> <span class='word'>range</span> <span class='word'>of</span> <span class='word'>choice</span> <span class='word'>available</span> <span class='word'>for</span> <span class='word'>web</span> <span class='word'>development</span> <span class='word'>work</span> <span class='word'>flows</span> <span class='word'>pushed</span> <span class='word'>me</span> <span class='word'>to</span> <span class='word'>use</span> <span class='word'>what</span> <span class='word'>I</span> <span class='word'>was</span> <span class='word'>already</span> <span class='word'>somewhat</span> <span class='word'>familiar</span> <span class='word'>with</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>includes</span> <span class='word'>package</span> <span class='word'>manager</span> <span class='word'>NPM</span><span class='ignore'>,</span> <span class='word'>Typescript</span><span class='ignore'>,</span> <span class='word'>transpiler</span> <span class='word'>Babel</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>script</span> <span class='word'>bundler</span> <span class='word'>Webpack</span><span class='ignore'>,</span> <span class='word'>while</span> <span class='word'>coding</span> <span class='word'>in</span> <span class='word'>Visual</span> <span class='word'>Studio</span> <span class='word'>Code</span><span class='ignore'>,</span> <span class='word'>an</span> <span class='word'>open</span> <span class='word'>source</span> <span class='word'>IDE</span> <span class='word'>largely</span> <span class='word'>developed</span> <span class='word'>alongside</span> <span class='word'>Typescript</span> <span class='word'>by</span> <span class='word'>Microsoft</span><span class='ignore'>.</span> <span class='word'>How</span> <span class='word'>to</span> <span class='word'>couple</span> <span class='word'>all</span> <span class='word'>these</span> <span class='word'>tools</span> <span class='word'>together</span> <span class='word'>correctly</span> <span class='word'>is</span> <span class='word'>an</span> <span class='word'>issue</span> <span class='word'>in</span> <span class='word'>itself</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>setting</span> <span class='word'>up</span> <span class='word'>a</span> <span class='word'>working</span> <span class='word'>configuration</span> <span class='word'>was</span> <span class='word'>one</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>most</span> <span class='word'>tedious</span> <span class='word'>preparation</span> <span class='word'>steps</span><span class='ignore'>.</span><br>
	<br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Backup</span> <span class='hword'>Strategy</span> <span class='hword'>and</span> <span class='hword'>Development</span> <span class='hword'>Machine</span><span class='ignore'>}</span><br>
	<span class='word'>Backups</span> <span class='word'>and</span> <span class='word'>data</span> <span class='word'>safety</span> <span class='word'>were</span> <span class='word'>mentioned</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>project</span> <span class='word'>proposal</span><span class='ignore'>.</span> <span class='word'>Github</span><span class='cmd'>\footnote</span><span class='ignore'>{</span><span class='oword'>\url</span><span class='ignore'>{</span><span class='ignore'>github.com</span><span class='ignore'>}</span><span class='ignore'>}</span> <span class='word'>provided</span> <span class='word'>the</span> <span class='word'>primary</span> <span class='word'>backup</span><span class='ignore'>,</span> <span class='word'>with</span> <span class='word'>commits</span> <span class='word'>at</span> <span class='word'>important</span> <span class='word'>checkpoints</span> <span class='word'>and</span> <span class='word'>at</span> <span class='word'>least</span> <span class='word'>once</span> <span class='word'>per</span> <span class='word'>work</span> <span class='word'>day</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>local</span> <span class='word'>repository</span> <span class='word'>is</span> <span class='word'>also</span> <span class='word'>stored</span> <span class='word'>in</span> <span class='word'>my</span> <span class='word'>Dropbox</span> <span class='word'>folder</span> <span class='word'>for</span> <span class='word'>continuous</span> <span class='word'>cloud</span> <span class='word'>backups</span><span class='ignore'>.</span> <span class='word'>To</span> <span class='word'>prevent</span> <span class='word'>data</span> <span class='word'>loss</span> <span class='word'>in</span> <span class='word'>event</span> <span class='word'>of</span> <span class='word'>operating</span> <span class='word'>system</span> <span class='word'>failure</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>primary</span> <span class='word'>development</span> <span class='word'>OS</span> <span class='word'>Ubuntu</span> <span class='word'>14.04</span> <span class='word'>LTS</span> <span class='word'>x64</span> <span class='word'>resides</span> <span class='word'>on</span> <span class='word'>its</span> <span class='word'>own</span> <span class='word'>hard</span> <span class='word'>drive</span><span class='ignore'>,</span> <span class='word'>separate</span> <span class='word'>from</span> <span class='word'>user</span> <span class='word'>data</span><span class='ignore'>.</span> <span class='word'>A</span> <span class='word'>backup</span> <span class='word'>development</span> <span class='word'>environment</span><span class='ignore'>,</span> <span class='word'>Windows</span> <span class='word'>10</span><span class='ignore'>,</span> <span class='word'>exists</span> <span class='word'>on</span> <span class='word'>yet</span> <span class='word'>another</span> <span class='word'>hard</span> <span class='word'>drive</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>MCS</span> <span class='word'>computers</span> <span class='word'>are</span> <span class='word'>the</span> <span class='word'>alternative</span> <span class='word'>in</span> <span class='word'>case</span> <span class='word'>of</span> <span class='word'>loss</span> <span class='word'>of</span> <span class='word'>laptop</span><span class='ignore'>.</span><br>
	<br>
	<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Early</span> <span class='hword'>Design</span> <span class='hword'>Decisions</span><span class='ignore'>}</span><br>
<span class='word'>From</span> <span class='word'>the</span> <span class='word'>outset</span><span class='ignore'>,</span> <span class='word'>I</span> <span class='word'>knew</span> <span class='word'>I</span> <span class='word'>could</span> <span class='word'>make</span> <span class='word'>simplifications</span> <span class='word'>in</span> <span class='word'>some</span> <span class='word'>aspects</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>project</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>would</span> <span class='word'>likely</span> <span class='word'>need</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>more</span> <span class='word'>flexible</span> <span class='word'>and</span> <span class='word'>verbose</span> <span class='word'>in</span> <span class='word'>others</span><span class='ignore'>.</span> <span class='word'>These</span> <span class='word'>design</span> <span class='word'>decisions</span> <span class='word'>were</span> <span class='word'>made</span> <span class='word'>at</span> <span class='word'>various</span> <span class='word'>points</span> <span class='word'>throughout</span> <span class='word'>the</span> <span class='word'>development</span> <span class='word'>process</span><span class='ignore'>,</span> <span class='word'>though</span> <span class='word'>happily</span> <span class='word'>most</span> <span class='word'>were</span> <span class='word'>made</span> <span class='word'>early</span> <span class='word'>on</span> <span class='word'>and</span> <span class='word'>required</span> <span class='word'>little</span> <span class='word'>subsequent</span> <span class='word'>change</span><span class='ignore'>.</span> <br>
<br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Network</span> <span class='hword'>Simulation</span><span class='ignore'>}</span><br>
	<span class='word'>One</span> <span class='word'>broad</span> <span class='word'>category</span> <span class='word'>of</span> <span class='word'>decisions</span> <span class='word'>has</span> <span class='word'>to</span> <span class='word'>do</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>simulation</span> <span class='word'>I</span> <span class='word'>implemented</span><span class='ignore'>.</span> <span class='word'>Because</span> <span class='word'>I</span> <span class='word'>had</span> <span class='word'>no</span> <span class='word'>experience</span> <span class='word'>with</span> <span class='word'>simulation</span> <span class='word'>design</span> <span class='word'>and</span> <span class='word'>networking</span> <span class='word'>is</span> <span class='word'>not</span> <span class='word'>the</span> <span class='word'>intended</span> <span class='word'>focal</span> <span class='word'>point</span> <span class='word'>of</span> <span class='word'>this</span> <span class='word'>project</span><span class='ignore'>,</span> <span class='word'>to</span> <span class='word'>begin</span> <span class='word'>with</span> <span class='word'>I</span> <span class='word'>simplified</span> <span class='word'>wherever</span> <span class='word'>possible</span><span class='ignore'>.</span> <span class='word'>My</span> <span class='word'>system</span> <span class='word'>assumes</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>guarantees</span> <span class='word'>in</span> <span class='word'>order</span> <span class='word'>delivery</span> <span class='word'>and</span> <span class='word'>is</span> <span class='word'>capable</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>broadcast</span> <span class='word'>to</span> <span class='word'>all</span> <span class='word'>peers</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>node</span><span class='ignore'>.</span> <span class='word'>We</span> <span class='word'>will</span> <span class='word'>see</span> <span class='word'>how</span> <span class='word'>to</span> <span class='word'>relax</span> <span class='word'>some</span> <span class='word'>of</span> <span class='word'>these</span> <span class='word'>assumptions</span> <span class='word'>in</span> <span class='word'>section</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span><span class='ignore'>.</span> <span class='word'>Broadcast</span> <span class='word'>is</span> <span class='word'>not</span> <span class='word'>typically</span> <span class='word'>found</span> <span class='word'>in</span> <span class='word'>Internet</span> <span class='word'>applications</span><span class='ignore'>.</span> <span class='word'>For</span> <span class='word'>instance</span><span class='ignore'>,</span> <span class='word'>IPv6</span> <span class='word'>phases</span> <span class='word'>out</span> <span class='word'>broadcast</span> <span class='word'>functionality</span> <span class='word'>and</span> <span class='word'>opts</span> <span class='word'>for</span> <span class='word'>multicast</span> <span class='word'>instead</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>RFC2460</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>Using</span> <span class='word'>global</span> <span class='word'>broadcast</span><span class='ignore'>,</span> <span class='word'>or</span> <span class='word'>flooding</span><span class='ignore'>,</span> <span class='word'>has</span> <span class='word'>severe</span> <span class='word'>implications</span> <span class='word'>in</span> <span class='word'>terms</span> <span class='word'>of</span> <span class='word'>network</span> <span class='word'>efficiency</span><span class='ignore'>.</span> <span class='word'>Without</span> <span class='word'>further</span> <span class='word'>measures</span><span class='ignore'>,</span> <span class='word'>basic</span> <span class='word'>flooding</span> <span class='word'>sends</span> <span class='mathgroup'>$</span><span class='math'>\Theta </span><span class='math'>(</span><span class='math'>n</span><span class='math'>^</span><span class='ignore'>{</span><span class='math'>2</span><span class='ignore'>}</span><span class='math'>)</span><span class='mathgroup'>$</span> <span class='word'>packets</span><span class='ignore'>,</span> <span class='word'>where</span> <span class='mathgroup'>$</span><span class='math'>n</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>clients</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>fully</span> <span class='word'>connected</span> <span class='word'>network</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>property</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>seen</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>Evaluation</span>&nbsp; <span class='word'>section</span> <span class='ignore'>[</span><span class='word'>experiment</span> <span class='word'>ref</span><span class='ignore'>]</span><span class='ignore'>.</span> <span class='word'>However</span><span class='ignore'>,</span> <span class='word'>though</span> <span class='word'>it</span> <span class='word'>has</span> <span class='word'>downsides</span><span class='ignore'>,</span> <span class='word'>broadcast</span> <span class='word'>is</span> <span class='word'>simple</span> <span class='word'>to</span> <span class='word'>simulate</span> <span class='word'>on</span> <span class='word'>given</span> <span class='word'>a</span> <span class='word'>network</span> <span class='word'>topology</span><span class='ignore'>,</span> <span class='word'>requires</span> <span class='word'>no</span> <span class='word'>addressing</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>no</span> <span class='word'>sophisticated</span> <span class='word'>protocols</span><span class='ignore'>.</span><br>
	<br>
	<span class='word'>While</span> <span class='word'>the</span> <span class='word'>broadcast</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>useful</span> <span class='word'>simplification</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>topology</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>P2P</span> <span class='word'>network</span> <span class='word'>affects</span> <span class='word'>a</span> <span class='word'>system's</span> <span class='word'>functionality</span> <span class='word'>nearly</span> <span class='word'>as</span> <span class='word'>strongly</span><span class='ignore'>.</span> <span class='word'>As</span> <span class='word'>this</span> <span class='word'>project</span> <span class='word'>is</span> <span class='word'>somewhat</span> <span class='word'>a</span> <span class='word'>comparison</span> <span class='word'>between</span> <span class='word'>P2P</span> <span class='word'>and</span> <span class='word'>client-server</span> <span class='word'>architecture</span><span class='ignore'>,</span> <span class='word'>being</span> <span class='word'>able</span> <span class='word'>to</span> <span class='word'>run</span> <span class='word'>experiments</span> <span class='word'>over</span> <span class='word'>different</span> <span class='word'>topologies</span> <span class='word'>is</span> <span class='word'>important</span><span class='ignore'>.</span> <span class='word'>My</span> <span class='word'>initial</span> <span class='word'>focus</span> <span class='word'>was</span> <span class='word'>on</span> <span class='word'>a</span> <span class='word'>fully</span> <span class='word'>connected</span> <span class='word'>P2P</span> <span class='word'>topology</span> <span class='word'>to</span> <span class='word'>contrast</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>client</span><span class='ignore'>/</span><span class='word'>server</span> <span class='word'>star</span> <span class='word'>topology</span><span class='ignore'>.</span> <span class='word'>However</span><span class='ignore'>,</span> <span class='word'>forcing</span> <span class='word'>the</span> <span class='word'>P2P</span> <span class='word'>simulation</span> <span class='word'>to</span> <span class='word'>run</span> <span class='word'>on</span> <span class='word'>a</span> <span class='word'>star</span> <span class='word'>itself</span> <span class='word'>is</span> <span class='word'>perhaps</span> <span class='word'>a</span> <span class='word'>more</span> <span class='word'>direct</span> <span class='word'>comparison</span><span class='ignore'>.</span> <span class='word'>With</span> <span class='word'>two</span> <span class='word'>topologies</span> <span class='word'>to</span> <span class='word'>test</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>already</span> <span class='word'>sensible</span> <span class='word'>to</span> <span class='word'>have</span> <span class='word'>a</span> <span class='word'>fully</span> <span class='word'>general</span> <span class='word'>mechanism</span> <span class='word'>for</span> <span class='word'>specifying</span> <span class='word'>a</span> <span class='word'>network</span><span class='ignore'>,</span> <span class='word'>so</span> <span class='word'>I</span> <span class='word'>chose</span> <span class='word'>to</span> <span class='word'>provide</span> <span class='word'>support</span> <span class='word'>for</span> <span class='word'>arbitrary</span> <span class='word'>topologies</span> <span class='word'>and</span> <span class='word'>latencies</span> <span class='word'>on</span> <span class='word'>individual</span> <span class='word'>links</span><span class='ignore'>.</span> <br>
	<br>
	<span class='comment'>%To aid debugging and visualization [GB?] I also decided to build a dynamic graphical network representation that could be run in tandem with the simulation.</span><br>
<br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Data</span> <span class='hword'>Collection</span> <span class='hword'>and</span> <span class='hword'>Logging</span><span class='ignore'>}</span><br>
	<br>
	<br>
	<span class='word'>The</span> <span class='word'>other</span> <span class='word'>important</span> <span class='word'>design</span> <span class='word'>decisions</span> <span class='word'>are</span> <span class='word'>more</span> <span class='word'>general</span><span class='ignore'>.</span> <span class='word'>One</span> <span class='word'>is</span> <span class='word'>to</span> <span class='word'>measure</span> <span class='word'>all</span> <span class='word'>packet</span> <span class='word'>and</span> <span class='word'>data</span> <span class='word'>structure</span> <span class='word'>sizes</span> <span class='word'>in</span> <span class='word'>terms</span> <span class='word'>of</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>characters</span> <span class='word'>they</span> <span class='word'>require</span> <span class='word'>when</span> <span class='word'>stringified</span> <span class='word'>using</span> <span class='word'>a</span> <span class='word'>standard</span> <span class='word'>JSON</span> <span class='word'>object</span> <span class='word'>to</span> <span class='word'>string</span> <span class='word'>conversion</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>allows</span> <span class='word'>fair</span> <span class='word'>comparisons</span> <span class='word'>working</span> <span class='word'>across</span> <span class='word'>platforms</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>most</span> <span class='word'>obvious</span> <span class='word'>way</span> <span class='word'>to</span> <span class='word'>measure</span> <span class='word'>the</span> <span class='word'>size</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>JSON</span> <span class='word'>object</span><span class='ignore'>.</span> <span class='word'>Alternatives</span> <span class='word'>to</span> <span class='word'>JSON</span> <span class='word'>exist</span> <span class='word'>which</span> <span class='word'>provide</span> <span class='word'>more</span> <span class='word'>efficient</span> <span class='word'>serializations</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>Protocol</span> <span class='word'>Buffers</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>protobuf</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>However</span><span class='ignore'>,</span> <span class='word'>utilizing</span> <span class='word'>a</span> <span class='word'>more</span> <span class='word'>efficient</span> <span class='word'>serialization</span> <span class='word'>than</span> <span class='word'>ShareJS</span> <span class='word'>would</span> <span class='word'>make</span> <span class='word'>for</span> <span class='word'>unfair</span> <span class='word'>comparisons</span><span class='ignore'>.</span> <span class='word'>Additionally</span><span class='ignore'>,</span> <span class='word'>since</span> <span class='word'>most</span> <span class='word'>packets</span> <span class='word'>sent</span> <span class='word'>into</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>are</span> <span class='word'>small</span><span class='ignore'>,</span> <span class='word'>JSON</span> <span class='word'>overheads</span> <span class='word'>are</span> <span class='word'>relatively</span> <span class='word'>small</span><span class='ignore'>.</span> <span class='word'>For</span> <span class='word'>large</span> <span class='word'>transmissions</span> <span class='word'>however</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>state</span> <span class='word'>replay</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>CRDT</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span><span class='ignore'>,</span> <span class='word'>they</span> <span class='word'>would</span> <span class='word'>be</span> <span class='word'>worth</span> <span class='word'>considering</span><span class='ignore'>.</span><br>
	<br>
	<span class='word'>The</span> <span class='word'>second</span> <span class='word'>decision</span> <span class='word'>is</span> <span class='word'>to</span> <span class='word'>log</span> <span class='word'>network</span> <span class='word'>packets</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>application</span> <span class='word'>layer</span><span class='ignore'>.</span> <span class='word'>That</span> <span class='word'>is</span><span class='ignore'>,</span> <span class='word'>rather</span> <span class='word'>than</span> <span class='word'>intercepting</span> <span class='word'>and</span> <span class='word'>logging</span> <span class='word'>packet</span> <span class='word'>information</span> <span class='word'>at</span> <span class='word'>the</span> <span class='word'>operating</span> <span class='word'>system</span><span class='ignore'>,</span> <span class='word'>I</span> <span class='word'>log</span> <span class='word'>payloads</span> <span class='word'>of</span> <span class='word'>packets</span> <span class='word'>from</span> <span class='word'>within</span> <span class='word'>the</span> <span class='word'>applications</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>fairest</span> <span class='word'>to</span> <span class='word'>do</span> <span class='word'>comparisons</span> <span class='word'>between</span> <span class='word'>a</span> <span class='word'>simulation's</span> <span class='word'>network</span> <span class='word'>traffic</span><span class='ignore'>,</span> <span class='word'>whose</span> <span class='word'>packets</span> <span class='word'>contain</span> <span class='word'>no</span> <span class='word'>headers</span> <span class='word'>or</span> <span class='word'>other</span> <span class='word'>overhead</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>a</span> <span class='word'>real</span> <span class='word'>TCP</span><span class='ignore'>/</span><span class='word'>IP</span> <span class='word'>stack's</span> <span class='word'>traffic</span><span class='ignore'>.</span><br>
<br>
<br>
<br>
<span class='cmd'>\chapter</span><span class='ignore'>{</span><span class='hword'>Implementation</span><span class='ignore'>}</span><br>
<br>
<span class='word'>The</span> <span class='word'>chapter</span> <span class='word'>describes</span> <span class='word'>the</span> <span class='word'>implementation</span> <span class='word'>of</span> <span class='word'>both</span> <span class='word'>real</span> <span class='word'>time</span> <span class='word'>editing</span> <span class='word'>systems</span><span class='ignore'>,</span> <span class='word'>firstly</span> <span class='word'>the</span> <span class='word'>one</span> <span class='word'>based</span> <span class='word'>on</span> <span class='word'>CRDTs</span> <span class='word'>and</span> <span class='word'>secondly</span> <span class='word'>the</span> <span class='word'>one</span> <span class='word'>based</span> <span class='word'>on</span> <span class='word'>ShareJS</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>experiment</span> <span class='word'>generation</span> <span class='word'>and</span> <span class='word'>results</span> <span class='word'>analysis</span> <span class='word'>components</span> <span class='word'>that</span> <span class='word'>are</span> <span class='word'>shared</span> <span class='word'>by</span> <span class='word'>both</span> <span class='word'>systems</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>lastly</span> <span class='word'>the</span> <span class='word'>extension</span> <span class='word'>that</span> <span class='word'>adds</span> <span class='word'>Local</span> <span class='word'>Undo</span> <span class='word'>capability</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>CRDT</span><span class='ignore'>.</span><br>
<br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>CRDT-based</span> <span class='hword'>system</span><span class='ignore'>}</span><br>
<br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Overview</span><span class='ignore'>}</span><br>
	<span class='word'>The</span> <span class='word'>high</span> <span class='word'>level</span> <span class='word'>components</span> <span class='word'>that</span> <span class='word'>make</span> <span class='word'>up</span> <span class='word'>my</span> <span class='word'>CRDT-based</span> <span class='word'>text</span> <span class='word'>editor</span> <span class='word'>are</span> <span class='word'>the</span> <span class='word'>user</span> <span class='word'>interface</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>CRDT</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>simulation</span><span class='ignore'>.</span> <span class='word'>Each</span> <span class='word'>simulated</span> <span class='word'>client</span> <span class='word'>owns</span> <span class='word'>a</span> <span class='word'>local</span> <span class='word'>replica</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>CRDT</span><span class='ignore'>,</span> <span class='word'>has</span> <span class='word'>access</span> <span class='word'>to</span> <span class='word'>an</span> <span class='word'>editable</span> <span class='word'>text</span> <span class='word'>area</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>a</span> <span class='word'>simplified</span> <span class='word'>network</span> <span class='word'>stack</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>network</span> <span class='word'>stack</span> <span class='word'>that</span> <span class='word'>each</span> <span class='word'>client</span> <span class='word'>has</span> <span class='word'>access</span> <span class='word'>to</span> <span class='word'>hides</span> <span class='word'>from</span> <span class='word'>the</span> <span class='word'>client</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>is</span> <span class='word'>simulated</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>background</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>large</span> <span class='word'>part</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>work</span> <span class='word'>is</span> <span class='word'>handed</span> <span class='word'>off</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>simulation</span> <span class='word'>manager</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>approach</span> <span class='word'>aims</span> <span class='word'>to</span> <span class='word'>ease</span> <span class='word'>exchanging</span> <span class='word'>the</span> <span class='word'>simulation</span> <span class='word'>for</span> <span class='word'>a</span> <span class='word'>peer</span> <span class='word'>to</span> <span class='word'>peer</span> <span class='word'>protocol</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>WebRTC</span><span class='cmd'>\footnote</span><span class='ignore'>{</span><span class='oword'>\url</span><span class='ignore'>{</span><span class='ignore'>https</span><span class='ignore'>:</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'>webrtc.org</span><span class='ignore'>}</span><span class='ignore'>}</span> <span class='word'>at</span> <span class='word'>a</span> <span class='word'>later</span> <span class='word'>date</span><span class='ignore'>.</span> <span class='word'>It</span> <span class='word'>also</span> <span class='word'>allowed</span> <span class='word'>separate</span> <span class='word'>development</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>networking</span> <span class='word'>subsystem</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>CRDT</span><span class='ignore'>.</span> <span class='word'>Such</span> <span class='word'>separation</span> <span class='word'>of</span> <span class='word'>concerns</span> <span class='word'>and</span> <span class='word'>independence</span> <span class='word'>between</span> <span class='word'>subsystems</span> <span class='word'>are</span> <span class='word'>core</span> <span class='word'>principles</span> <span class='word'>of</span> <span class='word'>software</span> <span class='word'>engineering</span> <span class='word'>that</span> <span class='word'>were</span> <span class='word'>adhered</span> <span class='word'>to</span> <span class='word'>throughout</span> <span class='word'>the</span> <span class='word'>implementation</span><span class='ignore'>.</span> <span class='word'>Figure</span><span class='ignore'>~</span><span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>sysarch</span><span class='ignore'>}</span> <span class='word'>shows</span> <span class='word'>the</span> <span class='word'>architecture</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>whole</span> <span class='word'>system</span><span class='ignore'>.</span><br>
	<br>
	<br>
	<span class='word'>Upon</span> <span class='word'>interaction</span> <span class='word'>with</span> <span class='word'>a</span> <span class='word'>client's</span> <span class='word'>text</span> <span class='word'>interface</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>is</span> <span class='word'>modified</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>operations</span> <span class='word'>generated</span> <span class='word'>are</span> <span class='word'>passed</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>to</span> <span class='word'>transmit</span> <span class='word'>to</span> <span class='word'>other</span> <span class='word'>clients</span><span class='ignore'>.</span> <span class='word'>Upon</span> <span class='word'>receipt</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>remote</span> <span class='word'>clients</span> <span class='word'>integrate</span> <span class='word'>the</span> <span class='word'>changes</span> <span class='word'>into</span> <span class='word'>their</span> <span class='word'>replicas</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>and</span> <span class='word'>update</span> <span class='word'>the</span> <span class='word'>user</span> <span class='word'>interface</span> <span class='word'>to</span> <span class='word'>reflect</span> <span class='word'>the</span> <span class='word'>new</span> <span class='word'>state</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>process</span> <span class='word'>of</span> <span class='word'>executing</span> <span class='word'>these</span> <span class='word'>steps</span> <span class='word'>is</span> <span class='word'>described</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>following</span> <span class='word'>subsection</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>is</span> <span class='word'>followed</span> <span class='word'>by</span> <span class='word'>a</span> <span class='word'>description</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>simulation</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>design</span> <span class='word'>choices</span> <span class='word'>made</span> <span class='word'>within</span> <span class='word'>it</span><span class='ignore'>.</span>&nbsp; <span class='ignore'>*</span><span class='ignore'>*</span><span class='ignore'>*</span><span class='word'>ugly</span> <span class='word'>wording</span><span class='ignore'>*</span><span class='ignore'>*</span><span class='ignore'>*</span><br>
	<br>
	<span class='word'>Throughout</span> <span class='word'>a</span> <span class='word'>simulation</span><span class='ignore'>,</span> <span class='word'>upon</span> <span class='word'>various</span> <span class='word'>events</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>initialization</span><span class='ignore'>,</span> <span class='word'>packet</span> <span class='word'>sending</span> <span class='word'>and</span> <span class='word'>receiving</span><span class='ignore'>,</span> <span class='word'>joining</span> <span class='word'>clients</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>others</span><span class='ignore'>,</span> <span class='word'>log</span> <span class='word'>lines</span> <span class='word'>are</span> <span class='word'>written</span> <span class='word'>to</span> <span class='word'>a</span> <span class='word'>server</span> <span class='word'>and</span> <span class='word'>saved</span> <span class='word'>for</span> <span class='word'>later</span> <span class='word'>analysis</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>analysis</span> <span class='word'>is</span> <span class='word'>discussed</span> <span class='word'>in</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span><span class='ignore'>.</span><br>
	<br>
	<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
		<span class='exclcmd'>\centering</span><br>
		<span class='exclcmd'>\includegraphics</span><span class='option'>[width=1\linewidth]</span><span class='ignore'>{</span><span class='ignore'>figs</span><span class='ignore'>/</span><span class='ignore'>sysarch.eps</span><span class='ignore'>}</span><br>
&nbsp; <span class='cmd'>\caption</span><span class='option'>[System Architecture]</span><span class='ignore'>{</span><span class='oword'>An</span> <span class='oword'>overview</span> <span class='oword'>of</span> <span class='oword'>the</span> <span class='oword'>system</span> <span class='oword'>architecture</span> <span class='oword'>implemented</span> <span class='oword'>for</span> <span class='oword'>the</span> <span class='oword'>CRDT-based</span> <span class='oword'>text</span> <span class='oword'>editor</span><span class='ignore'>.</span> <span class='oword'>Each</span> <span class='oword'>client</span> <span class='oword'>has</span> <span class='oword'>its</span> <span class='oword'>own</span> <span class='oword'>UI</span><span class='ignore'>,</span> <span class='oword'>controller</span><span class='ignore'>,</span> <span class='oword'>CRDT</span><span class='ignore'>,</span> <span class='oword'>logger</span><span class='ignore'>,</span> <span class='oword'>and</span> <span class='oword'>networking</span> <span class='oword'>component</span><span class='ignore'>.</span> <span class='oword'>The</span> <span class='oword'>network</span> <span class='oword'>module</span> <span class='oword'>abstracts</span> <span class='oword'>away</span> <span class='oword'>the</span> <span class='oword'>underlying</span> <span class='oword'>simulation</span><span class='ignore'>.</span> <span class='oword'>Many</span> <span class='oword'>clients</span> <span class='oword'>can</span> <span class='oword'>connect</span> <span class='oword'>to</span> <span class='oword'>the</span> <span class='oword'>simulation</span> <span class='oword'>network</span> <span class='oword'>abstraction</span> <span class='oword'>and</span> <span class='oword'>communicate</span> <span class='oword'>through</span> <span class='oword'>it</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
		<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>sysarch</span><span class='ignore'>}</span><br>
	<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
	<br>
	<br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>CRDT</span><span class='ignore'>}</span><br>
		<span class='word'>To</span> <span class='word'>briefly</span> <span class='word'>review</span> <span class='word'>section</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>text</span> <span class='word'>CRDT</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>thought</span> <span class='word'>of</span> <span class='word'>as</span> <span class='word'>a</span> <span class='word'>set</span> <span class='word'>containing</span> <span class='word'>characters</span> <span class='word'>tagged</span> <span class='word'>with</span> <span class='word'>totally</span> <span class='word'>ordered</span> <span class='word'>identifiers</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>document</span> <span class='word'>is</span> <span class='word'>then</span> <span class='word'>extracted</span> <span class='word'>in</span> <span class='word'>full</span> <span class='word'>by</span> <span class='word'>ordering</span> <span class='word'>the</span> <span class='word'>elements</span> <span class='word'>according</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>total</span> <span class='word'>order</span><span class='ignore'>.</span> <br>
&nbsp; <br>
&nbsp; <span class='word'>This</span> <span class='word'>subsection</span> <span class='word'>goes</span> <span class='word'>through</span> <span class='word'>the</span> <span class='word'>structure</span> <span class='word'>and</span> <span class='word'>capabilities</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>I</span> <span class='word'>utilized</span><span class='ignore'>,</span> <span class='word'>how</span> <span class='word'>character</span> <span class='word'>identifiers</span> <span class='word'>are</span> <span class='word'>generated</span> <span class='word'>and</span> <span class='word'>totally</span> <span class='word'>ordered</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>operations</span> <span class='word'>that</span> <span class='word'>are</span> <span class='word'>supported</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>context</span> <span class='word'>of</span> <span class='word'>text</span> <span class='word'>editing</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>brief</span> <span class='word'>discussion</span> <span class='word'>of</span> <span class='word'>tombstones</span> <span class='word'>left</span> <span class='word'>behind</span> <span class='word'>by</span> <span class='word'>deletions</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>some</span> <span class='word'>optimizations</span> <span class='word'>I</span> <span class='word'>added</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Structure</span> <span class='hword'>and</span> <span class='hword'>Functionality</span><span class='ignore'>}</span><br>
		<span class='word'>In</span> <span class='word'>the</span> <span class='word'>Related</span> <span class='word'>Work</span> <span class='word'>section</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span> <span class='word'>various</span> <span class='word'>structures</span> <span class='word'>were</span> <span class='word'>mentioned</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>Treedoc</span> <span class='word'>which</span> <span class='word'>stores</span> <span class='word'>characters</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>nodes</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>tree</span> <span class='word'>and</span> <span class='word'>retrieves</span> <span class='word'>them</span> <span class='word'>in</span> <span class='word'>infix</span> <span class='word'>order</span><span class='ignore'>.</span> <span class='word'>Rather</span> <span class='word'>than</span> <span class='word'>using</span> <span class='word'>a</span> <span class='word'>tree</span> <span class='word'>to</span> <span class='word'>store</span> <span class='word'>characters</span><span class='ignore'>,</span> <span class='word'>my</span> <span class='word'>approach</span> <span class='word'>implements</span> <span class='word'>a</span> <span class='word'>singly-linked</span> <span class='word'>list</span><span class='ignore'>.</span> <span class='word'>Each</span> <span class='word'>link</span> <span class='word'>contains</span> <span class='word'>exactly</span> <span class='word'>a</span> <span class='word'>character</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>pointer</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>is</span> <span class='word'>associated</span> <span class='word'>with</span> <span class='word'>a</span> <span class='word'>unique</span> <span class='word'>identifier</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>The</span> <span class='word'>CRDT</span> <span class='word'>needs</span> <span class='word'>to</span> <span class='word'>implement</span> <span class='word'>three</span> <span class='word'>core</span> <span class='word'>methods</span> <span class='word'>in</span> <span class='word'>order</span> <span class='word'>to</span> <span class='word'>support</span> <span class='word'>text</span> <span class='word'>editing</span><br>
&nbsp; <span class='envir'>\begin</span><span class='envir'>{enumerate}</span><br>
			<span class='cmd'>\item</span> <span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Insert</span><span class='ignore'>:</span><span class='ignore'>}</span> <span class='word'>Add</span> <span class='word'>a</span> <span class='word'>character</span> <span class='word'>at</span> <span class='word'>a</span> <span class='word'>specific</span> <span class='word'>index</span> <span class='word'>or</span> <span class='word'>location</span><br>
&nbsp; 	<span class='cmd'>\item</span> <span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Delete</span><span class='ignore'>:</span><span class='ignore'>}</span> <span class='word'>Remove</span> <span class='word'>or</span> <span class='word'>mark</span> <span class='word'>as</span> <span class='word'>deleted</span> <span class='word'>any</span> <span class='word'>given</span> <span class='word'>character</span><br>
&nbsp; 	<span class='cmd'>\item</span> <span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Read</span><span class='ignore'>:</span><span class='ignore'>}</span> <span class='word'>Retrieve</span> <span class='word'>the</span> <span class='word'>characters</span> <span class='word'>in</span> <span class='word'>order</span> <span class='word'>and</span> <span class='word'>return</span> <span class='word'>them</span> <span class='word'>as</span> <span class='word'>a</span> <span class='word'>string</span><br>
&nbsp; <span class='envir'>\end</span><span class='envir'>{enumerate}</span><br>
&nbsp; <br>
&nbsp; <span class='word'>Inserting</span> <span class='word'>characters</span> <span class='word'>is</span> <span class='word'>done</span> <span class='word'>as</span> <span class='word'>in</span> <span class='word'>standard</span> <span class='word'>linked</span> <span class='word'>lists</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>find</span> <span class='word'>the</span> <span class='word'>node</span> <span class='word'>after</span> <span class='word'>which</span> <span class='word'>the</span> <span class='word'>insert</span> <span class='word'>should</span> <span class='word'>occur</span><span class='ignore'>,</span> <span class='word'>rewrite</span> <span class='word'>its</span> <span class='word'>pointer</span> <span class='word'>to</span> <span class='word'>point</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>new</span> <span class='word'>node</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>repair</span> <span class='word'>the</span> <span class='word'>broken</span> <span class='word'>link</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>new</span> <span class='word'>node's</span> <span class='word'>pointer</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[htb]</span><br>
		<span class='exclcmd'>\centering</span><br>
		&nbsp;<span class='exclenv'>\begin</span><span class='exclenv'>{tabular}</span><span class='ignore'>{</span> <span class='ignore'>&gt;</span><span class='ignore'>{</span><span class='ignore'>\centering</span><span class='ignore'>}</span><span class='ignore'>m{6cm}</span> <span class='ignore'>&gt;</span><span class='ignore'>{</span><span class='ignore'>\centering</span><span class='ignore'>}</span><span class='ignore'>m{15mm}</span> <span class='ignore'>&gt;</span><span class='ignore'>{</span><span class='ignore'>\centering</span><span class='ignore'>\arraybackslash</span><span class='ignore'>}</span><span class='ignore'>m{6cm}</span> <span class='ignore'>}</span><br>
		&nbsp;&nbsp;<span class='exclcmd'>\includegraphics</span><span class='option'>[width=1\linewidth]</span><span class='ignore'>{</span><span class='ignore'>figs</span><span class='ignore'>/</span><span class='ignore'>linkedlist</span><span class='ignore'>_</span><span class='ignore'>0.eps</span><span class='ignore'>}</span>&nbsp; <span class='ignore'>&amp;</span><br>
&nbsp; &nbsp; &nbsp; <span class='exclmath'>$</span><span class='mathcmd'>\longrightarrow</span><span class='exclmath'>$</span>&nbsp; <span class='ignore'>&amp;</span><br>
&nbsp; &nbsp; &nbsp; <span class='exclcmd'>\includegraphics</span><span class='option'>[width=1\linewidth]</span><span class='ignore'>{</span><span class='ignore'>figs</span><span class='ignore'>/</span><span class='ignore'>linkedlist.eps</span><span class='ignore'>}</span><br>
&nbsp; &nbsp; <span class='exclenv'>\end</span><span class='exclenv'>{tabular}</span><br>
&nbsp; <span class='cmd'>\caption</span><span class='option'>[Updating linked lists]</span><span class='ignore'>{</span><span class='oword'>A</span> <span class='oword'>graphical</span> <span class='oword'>representation</span> <span class='oword'>of</span> <span class='oword'>updating</span> <span class='oword'>linked</span> <span class='oword'>lists</span><span class='ignore'>.</span> <span class='oword'>Here</span><span class='ignore'>,</span> <span class='oword'>a</span> <span class='oword'>new</span> <span class='oword'>link</span> <span class='oword'>containing</span> <span class='oword'>the</span> <span class='oword'>character</span> <span class='ignore'>`</span><span class='oword'>c</span><span class='ignore'>'</span> <span class='oword'>is</span> <span class='oword'>inserted</span> <span class='oword'>between</span> <span class='ignore'>`</span><span class='oword'>b</span><span class='ignore'>'</span> <span class='oword'>and</span> <span class='ignore'>`</span><span class='oword'>d</span><span class='ignore'>'</span> <span class='oword'>to</span> <span class='oword'>produce</span> <span class='ignore'>`</span><span class='oword'>abcd</span><span class='ignore'>'</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
		<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>linkedlist</span><span class='ignore'>}</span><br>
&nbsp; <span class='envir'>\end</span><span class='envir'>{figure}</span><br>
&nbsp; <br>
&nbsp; <span class='word'>Deletes</span> <span class='word'>are</span> <span class='word'>handled</span> <span class='word'>by</span> <span class='word'>adding</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>relevant</span> <span class='word'>link</span> <span class='word'>a</span> <span class='ignore'>`</span><span class='word'>deleted</span><span class='ignore'>'</span> <span class='word'>tag</span><span class='ignore'>.</span> <span class='word'>Lastly</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>read</span> <span class='word'>operation</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>linear</span> <span class='word'>time</span> <span class='word'>traversal</span> <span class='word'>over</span> <span class='word'>the</span> <span class='word'>linked</span> <span class='word'>list</span><span class='ignore'>,</span> <span class='word'>beginning</span> <span class='word'>with</span> <span class='word'>an</span> <span class='word'>invisible</span> <span class='word'>anchor</span> <span class='word'>element</span> <span class='word'>that</span> <span class='word'>marks</span> <span class='word'>the</span> <span class='word'>start</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>document</span> <span class='word'>and</span> <span class='word'>cannot</span> <span class='word'>be</span> <span class='word'>deleted</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>Various</span> <span class='word'>data</span> <span class='word'>structures</span> <span class='word'>were</span> <span class='word'>considered</span> <span class='word'>when</span> <span class='word'>implementing</span> <span class='word'>this</span> <span class='word'>linked</span> <span class='word'>list</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>most</span> <span class='word'>intuitive</span> <span class='word'>approach</span> <span class='word'>is</span> <span class='word'>to</span> <span class='word'>implement</span> <span class='word'>each</span> <span class='word'>link</span> <span class='word'>as</span> <span class='word'>an</span> <span class='word'>instance</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>class</span> <span class='word'>or</span> <span class='word'>structure</span> <span class='word'>containing</span> <span class='word'>the</span> <span class='word'>required</span> <span class='word'>identifier</span><span class='ignore'>,</span> <span class='word'>character</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>pointer</span><span class='ignore'>.</span> <span class='word'>However</span><span class='ignore'>,</span> <span class='word'>all</span> <span class='word'>operations</span> <span class='word'>one</span> <span class='word'>might</span> <span class='word'>want</span> <span class='word'>to</span> <span class='word'>do</span> <span class='word'>on</span> <span class='word'>a</span> <span class='word'>linked</span> <span class='word'>list</span> <span class='word'>are</span> <span class='mathgroup'>$</span><span class='math'>\Theta </span><span class='math'>(</span><span class='math'>n</span><span class='math'>)</span><span class='mathgroup'>$</span><span class='ignore'>:</span> <span class='word'>finding</span> <span class='word'>a</span> <span class='word'>node</span> <span class='word'>to</span> <span class='word'>insert</span> <span class='word'>after</span> <span class='word'>or</span> <span class='word'>delete</span> <span class='word'>requires</span> <span class='word'>scanning</span> <span class='word'>some</span> <span class='word'>proportion</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>list</span><span class='ignore'>.</span> <span class='word'>A</span> <span class='word'>read</span> <span class='word'>is</span> <span class='mathgroup'>$</span><span class='math'>\Theta </span><span class='math'>(</span><span class='math'>n</span><span class='math'>)</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <span class='word'>A</span> <span class='word'>much</span> <span class='word'>better</span> <span class='word'>approach</span> <span class='word'>is</span> <span class='word'>to</span> <span class='word'>implement</span> <span class='word'>the</span> <span class='word'>linked</span> <span class='word'>list</span> <span class='word'>within</span> <span class='word'>a</span> <span class='word'>hash</span> <span class='word'>table</span><span class='ignore'>.</span> <span class='word'>Since</span> <span class='word'>character</span> <span class='word'>identifiers</span> <span class='word'>are</span> <span class='word'>required</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>unique</span><span class='ignore'>,</span> <span class='word'>we</span> <span class='word'>can</span> <span class='word'>use</span> <span class='word'>them</span> <span class='word'>as</span> <span class='word'>keys</span> <span class='word'>in</span> <span class='word'>our</span> <span class='word'>map</span> <span class='word'>and</span> <span class='word'>achieve</span> <span class='mathgroup'>$</span><span class='math'>O</span><span class='math'>(</span><span class='math'>1</span><span class='math'>)</span><span class='mathgroup'>$</span> <span class='word'>lookup</span> <span class='word'>times</span> <span class='ignore'>[</span><span class='word'>TODO</span> <span class='word'>ASSUMPTIONS</span><span class='ignore'>:</span><span class='word'>Uniform</span> <span class='word'>hash</span><span class='ignore'>,</span> <span class='word'>depends</span> <span class='word'>on</span> <span class='word'>length</span> <span class='word'>of</span> <span class='word'>key</span> <span class='ignore'>(</span><span class='word'>hash</span> <span class='word'>might</span> <span class='word'>take</span> <span class='word'>time</span> <span class='word'>to</span> <span class='word'>compute</span> <span class='word'>over</span> <span class='word'>a</span> <span class='word'>string</span> <span class='ignore'>-</span> <span class='word'>my</span> <span class='word'>strings</span> <span class='word'>can</span> <span class='word'>grow</span> <span class='word'>unbounded</span> <span class='word'>as</span> <span class='word'>logn</span><span class='ignore'>)</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>BE</span> <span class='word'>Precise</span><span class='ignore'>]</span> <span class='word'>for</span> <span class='word'>any</span> <span class='word'>node</span><span class='ignore'>.</span> <span class='word'>Figure</span><span class='ignore'>~</span><span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>hashlist</span><span class='ignore'>}</span> <span class='word'>gives</span> <span class='word'>a</span> <span class='word'>full</span> <span class='word'>CRDT</span> <span class='word'>using</span> <span class='word'>this</span> <span class='word'>structure</span><span class='ignore'>.</span> <span class='word'>Hashing</span> <span class='word'>means</span> <span class='word'>insert</span> <span class='word'>and</span> <span class='word'>delete</span> <span class='word'>operations</span> <span class='word'>can</span> <span class='word'>complete</span> <span class='word'>in</span> <span class='word'>constant</span> <span class='word'>time</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>only</span> <span class='word'>read</span> <span class='word'>takes</span> <span class='mathgroup'>$</span><span class='math'>\Theta </span><span class='math'>(</span><span class='math'>n</span><span class='math'>)</span><span class='mathgroup'>$</span> <span class='word'>to</span> <span class='word'>retrieve</span> <span class='word'>the</span> <span class='word'>document</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
<br>
<br>
<span class='comment'>%\begin{framed}</span><br>
<span class='comment'>%	\begin{lstlisting}</span><br>
<span class='comment'>%	{</span><br>
<span class='comment'>%&nbsp; 	"0":	{"n":"7.1","c":""},</span><br>
<span class='comment'>%&nbsp; "1.0":	{"c": " ","n":"2.0"},</span><br>
<span class='comment'>%&nbsp; "2.0":	{"c":"w","n":"3.0"},</span><br>
<span class='comment'>%&nbsp; "3.0":	{"c":"o","n":"4.0"},</span><br>
<span class='comment'>%&nbsp; "4.0":	{"c":"r","n":"5.0"},</span><br>
<span class='comment'>%&nbsp; "5.0":	{"c":"l","n":"6.0"},</span><br>
<span class='comment'>%&nbsp; "6.0":	{"c":"d","n":null},</span><br>
<span class='comment'>%&nbsp; "7.1":	{"c":"H","n":"8.1"},</span><br>
<span class='comment'>%&nbsp; "8.1":	{"c":"e","n":"9.1"},</span><br>
<span class='comment'>%&nbsp; "9.1":	{"c":"l","n":"10.1"},</span><br>
<span class='comment'>%&nbsp; "10.1":	{"c":"l","n":"11.1"},</span><br>
<span class='comment'>%&nbsp; "11.1":	{"c":"o","n":"1.0"}</span><br>
<span class='comment'>%	}</span><br>
<span class='comment'>%	\end{lstlisting}</span><br>
	<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
		<span class='exclcmd'>\centering</span><br>
		<span class='exclcmd'>\includegraphics</span><span class='option'>[width=1\linewidth]</span><span class='ignore'>{</span><span class='ignore'>figs</span><span class='ignore'>/</span><span class='ignore'>hash</span><span class='ignore'>_</span><span class='ignore'>list.eps</span><span class='ignore'>}</span><br>
&nbsp; <span class='cmd'>\caption</span><span class='option'>[Annotated CRDT]</span><span class='ignore'>{</span><span class='oword'>A</span> <span class='oword'>sample</span> <span class='oword'>CRDT</span> <span class='oword'>annotated</span> <span class='oword'>with</span> <span class='oword'>arrows</span><span class='ignore'>.</span> <span class='oword'>These</span> <span class='oword'>denote</span> <span class='oword'>the</span> <span class='oword'>links</span> <span class='oword'>implemented</span> <span class='oword'>within</span> <span class='oword'>the</span> <span class='oword'>has</span> <span class='oword'>hash</span> <span class='oword'>map</span><span class='ignore'>.</span> <span class='oword'>The</span> <span class='oword'>anchor</span> <span class='oword'>element</span> <span class='oword'>tagged</span> <span class='ignore'>`</span><span class='oword'>0</span><span class='ignore'>'</span> <span class='oword'>is</span> <span class='oword'>invariant</span> <span class='oword'>and</span> <span class='oword'>is</span> <span class='oword'>invisible</span> <span class='oword'>to</span> <span class='oword'>the</span> <span class='oword'>user</span><span class='ignore'>.</span> <span class='oword'>The</span> <span class='oword'>final</span> <span class='oword'>link</span><span class='ignore'>,</span> <span class='oword'>tagged</span> <span class='ignore'>`</span><span class='ignore'>`</span><span class='oword'>6.0</span><span class='ignore'>'</span><span class='ignore'>'</span> <span class='oword'>has</span> <span class='oword'>no</span> <span class='oword'>further</span> <span class='oword'>pointer</span><span class='ignore'>.</span> <span class='oword'>The</span> <span class='oword'>overall</span> <span class='oword'>string</span> <span class='oword'>is</span> <span class='ignore'>`</span><span class='ignore'>`</span><span class='oword'>Hello</span> <span class='oword'>world</span><span class='ignore'>'</span><span class='ignore'>'</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
		<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>hashlist</span><span class='ignore'>}</span><br>
&nbsp; <span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<span class='comment'>%\ end{framed}</span><br>
&nbsp; <br>
&nbsp; <span class='word'>Javascript</span> <span class='word'>provides</span> <span class='word'>two</span> <span class='word'>native</span> <span class='word'>objects</span> <span class='word'>capable</span> <span class='word'>of</span> <span class='word'>mapping</span><span class='ignore'>.</span> <span class='word'>One</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>Map</span><span class='cmd'>\footnote</span><span class='ignore'>{</span><span class='oword'>\url</span><span class='ignore'>{</span><span class='ignore'>https</span><span class='ignore'>:</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'>developer.mozilla.org</span><span class='ignore'>/</span><span class='ignore'>en</span><span class='ignore'>/</span><span class='ignore'>docs</span><span class='ignore'>/</span><span class='ignore'>Web</span><span class='ignore'>/</span><span class='ignore'>JavaScript</span><span class='ignore'>/</span><span class='ignore'>Reference</span><span class='ignore'>/</span><span class='ignore'>Global</span><span class='ignore'>_</span><span class='ignore'>Objects</span><span class='ignore'>/</span><span class='ignore'>Map</span><span class='ignore'>}</span><span class='ignore'>}</span> <span class='word'>structure</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>another</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>standard</span> <span class='word'>Javascript</span> <span class='word'>Object</span> <span class='ignore'>(</span><span class='word'>referred</span> <span class='word'>to</span> <span class='word'>as</span> <span class='word'>Objects</span> <span class='word'>from</span> <span class='word'>now</span> <span class='word'>on</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>Both</span> <span class='word'>have</span> <span class='word'>advantages</span> <span class='word'>and</span> <span class='word'>disadvantages</span><span class='ignore'>:</span> <span class='word'>Objects</span> <span class='word'>only</span> <span class='word'>allow</span> <span class='word'>strings</span> <span class='word'>and</span> <span class='word'>numbers</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>used</span> <span class='word'>as</span> <span class='word'>keys</span><span class='ignore'>,</span> <span class='word'>while</span> <span class='word'>Maps</span> <span class='word'>can</span> <span class='word'>use</span> <span class='word'>arbitrary</span> <span class='word'>entities</span><span class='ignore'>.</span> <span class='word'>On</span> <span class='word'>the</span> <span class='word'>other</span> <span class='word'>hand</span><span class='ignore'>,</span> <span class='word'>Objects</span> <span class='word'>serialize</span> <span class='word'>very</span> <span class='word'>easily</span> <span class='word'>to</span> <span class='word'>JSON</span> <span class='ignore'>(</span><span class='word'>Javascript</span> <span class='word'>Object</span> <span class='word'>Notation</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>while</span> <span class='word'>Maps</span> <span class='word'>would</span> <span class='word'>require</span> <span class='word'>their</span> <span class='word'>own</span> <span class='word'>conversion</span> <span class='word'>functions</span><span class='ignore'>.</span> <span class='word'>As</span> <span class='word'>we</span> <span class='word'>will</span> <span class='word'>see</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>next</span> <span class='word'>section</span><span class='ignore'>,</span> <span class='word'>CRDT</span> <span class='word'>keys</span> <span class='word'>are</span> <span class='word'>pairs</span> <span class='word'>of</span> <span class='word'>numbers</span><span class='ignore'>.</span> <span class='word'>Thus</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>sensible</span> <span class='word'>structure</span> <span class='word'>would</span> <span class='word'>be</span> <span class='word'>a</span> <span class='word'>Map</span><span class='ignore'>,</span> <span class='word'>as</span> <span class='word'>we</span> <span class='word'>can</span> <span class='word'>map</span> <span class='word'>from</span> <span class='word'>pairs</span> <span class='word'>to</span> <span class='word'>values</span><span class='ignore'>.</span> <span class='word'>Unfortunately</span><span class='ignore'>,</span> <span class='word'>Maps</span> <span class='word'>natively</span> <span class='word'>do</span> <span class='word'>not</span> <span class='word'>hash</span> <span class='word'>the</span> <span class='word'>contents</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>keys</span><span class='ignore'>,</span> <span class='word'>but</span> <span class='word'>only</span> <span class='word'>the</span> <span class='word'>reference</span> <span class='word'>pointing</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>key</span><span class='ignore'>.</span> <span class='word'>I</span> <span class='word'>implemented</span> <span class='word'>both</span> <span class='word'>Map</span> <span class='word'>and</span> <span class='word'>Object</span> <span class='word'>variants</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>CRDT</span><span class='ignore'>,</span> <span class='word'>but</span> <span class='word'>the</span> <span class='word'>original</span> <span class='word'>pointer</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>identifier</span> <span class='word'>used</span> <span class='word'>is</span> <span class='word'>not</span> <span class='word'>retained</span><span class='ignore'>;</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>not</span> <span class='word'>possible</span> <span class='word'>to</span> <span class='word'>retrieve</span> <span class='word'>the</span> <span class='word'>value</span> <span class='word'>associated</span> <span class='word'>with</span> <span class='word'>a</span> <span class='word'>given</span> <span class='word'>identifier</span><span class='ignore'>.</span> <span class='word'>To</span> <span class='word'>solve</span> <span class='word'>this</span> <span class='word'>issue</span> <span class='word'>I</span> <span class='word'>serialized</span> <span class='word'>the</span> <span class='word'>key</span> <span class='word'>pair</span> <span class='word'>into</span> <span class='word'>a</span> <span class='word'>string</span> <span class='word'>on</span> <span class='word'>each</span> <span class='word'>lookup</span> <span class='word'>and</span> <span class='word'>insert</span> <span class='ignore'>(</span><span class='word'>which</span><span class='ignore'>,</span> <span class='word'>being</span> <span class='word'>immutable</span> <span class='word'>in</span> <span class='word'>Javascript</span> <span class='word'>are</span> <span class='word'>compared</span> <span class='word'>by</span> <span class='word'>content</span> <span class='word'>rather</span> <span class='word'>than</span> <span class='word'>pointer</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>At</span> <span class='word'>that</span> <span class='word'>point</span> <span class='word'>Maps</span> <span class='word'>have</span> <span class='word'>no</span> <span class='word'>more</span> <span class='word'>advantages</span> <span class='word'>over</span> <span class='word'>Objects</span> <span class='word'>and</span> <span class='word'>a</span> <span class='word'>distinct</span> <span class='word'>disadvantage</span> <span class='word'>in</span> <span class='word'>terms</span> <span class='word'>of</span> <span class='word'>serializing</span> <span class='word'>to</span> <span class='word'>JSON</span><span class='ignore'>.</span> <span class='word'>Thus</span><span class='ignore'>,</span> <span class='word'>I</span> <span class='word'>eventually</span> <span class='word'>settled</span> <span class='word'>on</span> <span class='word'>CRDTs</span> <span class='word'>implemented</span> <span class='word'>using</span> <span class='word'>Objects</span> <span class='word'>as</span> <span class='word'>lookup</span> <span class='word'>structures</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>From</span> <span class='word'>now</span> <span class='word'>on</span><span class='ignore'>,</span> <span class='ignore'>`</span><span class='ignore'>`</span><span class='word'>CRDT</span><span class='ignore'>'</span><span class='ignore'>'</span> <span class='word'>and</span> <span class='ignore'>`</span><span class='ignore'>`</span><span class='word'>linked-list</span><span class='ignore'>'</span><span class='ignore'>'</span> <span class='word'>will</span> <span class='word'>be</span> <span class='word'>used</span> <span class='word'>interchangeably</span><span class='ignore'>.</span><br>
	<br>
&nbsp; <span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Identifiers</span><span class='ignore'>}</span><br>
		<br>
&nbsp; <span class='word'>Recall</span> <span class='word'>that</span> <span class='word'>CRDT</span> <span class='word'>identifiers</span> <span class='word'>are</span> <span class='word'>required</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>globally</span> <span class='word'>unique</span> <span class='word'>and</span> <span class='word'>totally</span> <span class='word'>ordered</span><span class='ignore'>.</span> <span class='word'>My</span> <span class='word'>CRDT</span> <span class='word'>is</span> <span class='word'>advantageous</span> <span class='word'>over</span> <span class='word'>tree-based</span> <span class='word'>CRDTs</span> <span class='word'>in</span> <span class='word'>that</span> <span class='word'>generating</span> <span class='word'>identifiers</span> <span class='word'>is</span> <span class='word'>straightforward</span><span class='ignore'>.</span> <span class='word'>Each</span> <span class='word'>client</span> <span class='word'>has</span> <span class='word'>a</span> <span class='word'>unique</span> <span class='word'>ID</span> <span class='ignore'>(</span><span class='word'>referred</span> <span class='word'>to</span> <span class='word'>as</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>cid</span><span class='ignore'>}</span><span class='ignore'>)</span> <span class='word'>which</span> <span class='word'>forms</span> <span class='word'>one</span> <span class='word'>part</span> <span class='word'>of</span> <span class='word'>each</span> <span class='word'>identifier</span><span class='ignore'>.</span> <span class='word'>A</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>cid</span><span class='ignore'>}</span> <span class='word'>can</span> <span class='word'>either</span> <span class='word'>be</span> <span class='word'>randomly</span> <span class='word'>generated</span> <span class='word'>or</span> <span class='word'>provided</span> <span class='word'>by</span> <span class='word'>the</span> <span class='word'>bootstrapping</span> <span class='word'>server</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>P2P</span> <span class='word'>network</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>this</span> <span class='word'>project</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>simulation</span> <span class='word'>provides</span> <span class='word'>unique</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>cid</span><span class='ignore'>}</span><span class='word'>s</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>Define</span> <span class='word'>an</span> <span class='word'>identifier</span> <span class='word'>generated</span> <span class='word'>by</span> <span class='word'>client</span> <span class='mathgroup'>$</span><span class='math'>i</span><span class='mathgroup'>$</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>a</span> <span class='word'>pair</span> <span class='mathgroup'>$</span><span class='math'>(</span><span class='math'>t</span><span class='math'>_</span><span class='math'>i</span><span class='math'>,</span> <span class='math'>cid</span><span class='math'>_</span><span class='math'>i</span><span class='math'>)</span><span class='mathgroup'>$</span> <span class='word'>where</span> <span class='mathgroup'>$</span><span class='math'>t</span><span class='math'>_</span><span class='math'>i</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>the</span> <span class='word'>value</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>local</span> <span class='word'>counter</span> <span class='word'>incremented</span> <span class='word'>on</span> <span class='word'>every</span> <span class='word'>insert</span><span class='ignore'>.</span> <span class='mathgroup'>$</span><span class='math'>cid</span><span class='math'>_</span><span class='math'>i</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>globally</span> <span class='word'>unique</span> <span class='word'>identifier</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>client</span><span class='ignore'>.</span> <span class='word'>Since</span> <span class='word'>each</span> <span class='word'>client</span> <span class='word'>provides</span> <span class='word'>a</span> <span class='word'>monotonically</span> <span class='word'>increasing</span> <span class='mathgroup'>$</span><span class='math'>t</span><span class='mathgroup'>$</span> <span class='word'>per</span> <span class='word'>identifier</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='mathgroup'>$</span><span class='math'>cid</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>globally</span> <span class='word'>unique</span><span class='ignore'>,</span> <span class='word'>every</span> <span class='word'>pair</span> <span class='word'>generated</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>system</span> <span class='word'>is</span> <span class='word'>guaranteed</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>unique</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>The</span> <span class='word'>counter</span> <span class='mathgroup'>$</span><span class='math'>t</span><span class='math'>_</span><span class='math'>i</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>maintained</span> <span class='word'>as</span> <span class='word'>a</span> <span class='word'>Lamport</span> <span class='word'>clock</span><span class='ignore'>~</span><span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>lamport1978</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>If</span> <span class='word'>an</span> <span class='word'>incoming</span> <span class='word'>operation</span> <span class='word'>has</span> <span class='word'>a</span> <span class='word'>greater</span> <span class='mathgroup'>$</span><span class='math'>t</span><span class='math'>_</span><span class='math'>j</span><span class='mathgroup'>$</span> <span class='word'>than</span> <span class='word'>the</span> <span class='word'>local</span> <span class='word'>clock</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>value</span> <span class='word'>of</span> <span class='mathgroup'>$</span><span class='math'>t</span><span class='math'>_</span><span class='math'>i</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>set</span> <span class='word'>to</span> <span class='mathgroup'>$</span><span class='math'>t</span><span class='math'>_</span><span class='math'>j</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>guarantees</span> <span class='word'>that</span> <span class='word'>any</span> <span class='word'>operation</span> <span class='word'>that</span> <span class='word'>is</span> <span class='word'>causally</span> <span class='word'>generated</span> <span class='word'>after</span> <span class='word'>another</span> <span class='ignore'>(</span><span class='word'>defined</span> <span class='word'>in</span> <span class='word'>more</span> <span class='word'>detail</span> <span class='word'>later</span><span class='ignore'>)</span> <span class='word'>has</span> <span class='word'>a</span> <span class='word'>higher</span> <span class='word'>clock</span> <span class='word'>value</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>in</span> <span class='word'>turn</span> <span class='word'>guarantees</span> <span class='word'>that</span> <span class='word'>only</span> <span class='word'>concurrent</span> <span class='word'>operations</span> <span class='word'>can</span> <span class='word'>have</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>clock</span> <span class='word'>value</span><span class='ignore'>.</span> <span class='word'>Note</span> <span class='word'>that</span> <span class='word'>this</span> <span class='word'>does</span> <span class='word'>not</span> <span class='word'>mean</span> <span class='word'>all</span> <span class='word'>concurrent</span> <span class='word'>operations</span> <span class='word'>have</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>clock</span> <span class='word'>value</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>only</span> <span class='word'>meaningful</span> <span class='word'>deduction</span> <span class='word'>we</span> <span class='word'>can</span> <span class='word'>make</span> <span class='word'>is</span> <span class='word'>that</span> <span class='word'>a</span> <span class='word'>remote</span><span class='ignore'>,</span> <span class='word'>incoming</span> <span class='word'>operation</span> <span class='word'>that</span> <span class='word'>has</span> <span class='word'>a</span> <span class='word'>lower</span> <span class='mathgroup'>$</span><span class='math'>t</span><span class='mathgroup'>$</span> <span class='word'>than</span> <span class='word'>the</span> <span class='word'>local</span> <span class='word'>clock</span><span class='ignore'>,</span> <span class='word'>must</span> <span class='word'>have</span> <span class='word'>been</span> <span class='word'>concurrent</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>key</span> <span class='word'>idea</span> <span class='word'>utilized</span> <span class='word'>when</span> <span class='word'>inserting</span> <span class='word'>characters</span> <span class='word'>concurrently</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>We</span> <span class='word'>can</span> <span class='word'>now</span> <span class='word'>define</span> <span class='word'>a</span> <span class='word'>total</span> <span class='word'>order</span> <span class='word'>over</span> <span class='word'>the</span> <span class='word'>identifiers</span><span class='ignore'>:</span><br>
&nbsp; <br>
&nbsp; <span class='mathgroup'>\[</span><span class='math'>(</span><span class='math'>t</span><span class='math'>_</span><span class='math'>1</span><span class='math'>,</span> <span class='math'>cid</span><span class='math'>_</span><span class='math'>1</span><span class='math'>)</span> <span class='math'>&lt;</span> <span class='math'>(</span><span class='math'>t</span><span class='math'>_</span><span class='math'>2</span><span class='math'>,</span> <span class='math'>cid</span><span class='math'>_</span><span class='math'>2</span><span class='math'>)</span> <span class='mathcmd'>\Leftrightarrow</span> <span class='math'>t</span><span class='math'>_</span><span class='math'>1</span> <span class='math'>&lt;</span> <span class='math'>t</span><span class='math'>_</span><span class='math'>2</span> <span class='mathcmd'>\lor</span> <span class='math'>(</span><span class='math'>t</span><span class='math'>_</span><span class='math'>1</span> <span class='math'>=</span> <span class='math'>t</span><span class='math'>_</span><span class='math'>2</span> <span class='mathcmd'>\land</span> <span class='math'>cid</span><span class='math'>_</span><span class='math'>1</span> <span class='math'>&lt;</span> <span class='math'>cid</span><span class='math'>_</span><span class='math'>2</span><span class='math'>)</span><span class='mathgroup'>\]</span><br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Operations</span><span class='ignore'>}</span><br>
		<span class='word'>The</span> <span class='word'>text</span> <span class='word'>CRDT</span> <span class='word'>supports</span> <span class='word'>two</span> <span class='word'>core</span> <span class='word'>modifying</span> <span class='word'>operations</span><span class='ignore'>:</span> <span class='word'>insert</span> <span class='word'>and</span> <span class='word'>delete</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; 	<span class='cmd'>\paragraph</span><span class='ignore'>{</span><span class='hword'>Insert</span><span class='ignore'>}</span><br>
				<span class='word'>Inserting</span> <span class='word'>a</span> <span class='word'>character</span> <span class='word'>into</span> <span class='word'>the</span> <span class='word'>text</span> <span class='word'>document</span> <span class='word'>generates</span> <span class='word'>an</span> <span class='word'>insert</span> <span class='word'>operation</span><span class='ignore'>.</span> <span class='word'>An</span> <span class='word'>insert</span> <span class='word'>operation</span> <span class='word'>is</span> <span class='word'>stored</span> <span class='word'>and</span> <span class='word'>transmitted</span> <span class='word'>as</span> <span class='word'>a</span> <span class='word'>bundle</span><span class='ignore'>.</span><br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <span class='word'>An</span> <span class='word'>insert</span> <span class='word'>bundle</span> <span class='mathgroup'>$</span><span class='math'>B</span><span class='mathgroup'>$</span> <span class='word'>contains</span><br>
&nbsp; &nbsp; <span class='envir'>\begin</span><span class='envir'>{itemize}</span><br>
					<span class='cmd'>\item</span> <span class='word'>A</span> <span class='word'>unique</span> <span class='word'>identifier</span> <span class='mathgroup'>$</span><span class='math'>id</span><span class='mathgroup'>$</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>character</span><br>
&nbsp; &nbsp; 	<span class='cmd'>\item</span> <span class='word'>The</span> <span class='word'>character</span> <span class='mathgroup'>$</span><span class='math'>char</span><span class='mathgroup'>$</span> <span class='word'>itself</span><br>
&nbsp; &nbsp; 	<span class='cmd'>\item</span> <span class='word'>The</span> <span class='word'>node</span> <span class='word'>after</span> <span class='word'>which</span> <span class='word'>to</span> <span class='word'>insert</span> <span class='word'>the</span> <span class='word'>character</span> <span class='word'>denoted</span> <span class='mathgroup'>$</span><span class='math'>after</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>corresponds</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>position</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>linked</span> <span class='word'>list</span> <span class='word'>at</span> <span class='word'>which</span> <span class='word'>the</span> <span class='word'>character</span> <span class='word'>needs</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>spliced</span> <span class='word'>in</span><span class='ignore'>.</span> <span class='mathgroup'>$</span><span class='math'>after</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>another</span> <span class='word'>unique</span> <span class='word'>identifier</span><br>
&nbsp; &nbsp; <span class='envir'>\end</span><span class='envir'>{itemize}</span><br>
&nbsp; 	<br>
<span class='cmd'>\vspace</span><span class='ignore'>{</span><span class='ignore'>3mm</span><span class='ignore'>}</span>	<br>
<span class='envir'>\begin</span><span class='envir'>{lstlisting}</span><span class='option'>[caption=Insert Bundle Type Signature]</span><br>
<span class='ignore'>interface</span><span class='ignore'> </span><span class='ignore'>InsertMessage</span><span class='ignore'> </span><span class='ignore'>{</span><br>
<span class='ignore'>&nbsp; &nbsp; </span><span class='ignore'>id</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>string</span><span class='ignore'>,</span><br>
<span class='ignore'>&nbsp; &nbsp; </span><span class='ignore'>char</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>string</span><span class='ignore'>,</span><br>
<span class='ignore'>&nbsp; &nbsp; </span><span class='ignore'>after</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>string</span><br>
<span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'></span><span class='envir'>{lstlisting}</span><br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <span class='word'>Incorporating</span> <span class='word'>an</span> <span class='word'>insert</span> <span class='word'>bundle</span> <span class='mathgroup'>$</span><span class='math'>B</span><span class='mathgroup'>$</span> <span class='word'>into</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>following</span> <span class='word'>sequence</span> <span class='word'>of</span> <span class='word'>steps</span><br>
&nbsp; &nbsp; <span class='envir'>\begin</span><span class='envir'>{enumerate}</span><br>
					<span class='cmd'>\item</span> <span class='word'>Locate</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>hash</span> <span class='word'>table</span> <span class='word'>the</span> <span class='word'>node</span> <span class='mathgroup'>$</span><span class='math'>Prev</span><span class='mathgroup'>$</span> <span class='word'>corresponding</span> <span class='word'>to</span> <span class='word'>the</span> <span class='mathgroup'>$</span><span class='math'>B.after</span><span class='mathgroup'>$</span> <span class='word'>identifier</span><br>
&nbsp; &nbsp; 	<span class='cmd'>\item</span> <span class='word'>While</span> <span class='mathgroup'>$</span><span class='math'>Prev.next</span> <span class='mathcmd'>\geq</span> <span class='math'>B.id</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>do</span> <span class='mathgroup'>$</span><span class='math'>Prev</span> <span class='math'>=</span> <span class='math'>get</span><span class='math'>(</span><span class='math'>Prev.next</span><span class='math'>)</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>skips</span> <span class='word'>over</span> <span class='word'>local</span> <span class='word'>concurrently</span> <span class='word'>inserted</span> <span class='word'>nodes</span><br>
&nbsp; &nbsp; 	<span class='cmd'>\item</span> <span class='word'>Create</span> <span class='word'>a</span> <span class='word'>new</span> <span class='word'>node</span> <span class='mathgroup'>$</span><span class='math'>Node</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>with</span> <span class='mathgroup'>$</span><span class='math'>Node.char</span> <span class='math'>=</span> <span class='math'>B.char</span><span class='mathgroup'>$</span> <span class='word'>and</span> <span class='mathgroup'>$</span><span class='math'>Node.next</span> <span class='math'>=</span> <span class='math'>Prev.next</span><span class='mathgroup'>$</span><br>
&nbsp; &nbsp; 	<span class='cmd'>\item</span> <span class='word'>Create</span> <span class='word'>a</span> <span class='word'>new</span> <span class='word'>hash</span> <span class='word'>table</span> <span class='word'>entry</span> <span class='word'>with</span> <span class='word'>key</span> <span class='mathgroup'>$</span><span class='math'>B.id</span><span class='mathgroup'>$</span> <span class='word'>and</span> <span class='word'>value</span> <span class='mathgroup'>$</span><span class='math'>Node</span><span class='mathgroup'>$</span> <span class='mathgroup'>$</span><span class='math'>B.id</span><span class='mathgroup'>$</span><br>
&nbsp; &nbsp; 	<span class='cmd'>\item</span> <span class='word'>Rewrite</span> <span class='mathgroup'>$</span><span class='math'>Prev.next</span> <span class='math'>=</span> <span class='math'>B.id</span><span class='mathgroup'>$</span> <span class='word'>pointer</span> <span class='word'>to</span> <span class='word'>point</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>new</span> <span class='mathgroup'>$</span><span class='math'>Node</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>repairing</span> <span class='word'>the</span> <span class='word'>linked</span> <span class='word'>list</span><br>
&nbsp; &nbsp; <span class='envir'>\end</span><span class='envir'>{enumerate}</span><br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <span class='word'>This</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>standard</span> <span class='word'>procedure</span> <span class='word'>to</span> <span class='word'>insert</span> <span class='word'>a</span> <span class='word'>new</span> <span class='word'>node</span> <span class='word'>into</span> <span class='word'>a</span> <span class='word'>linked</span> <span class='word'>list</span><span class='ignore'>,</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>exception</span> <span class='word'>of</span> <span class='word'>step</span> <span class='word'>2</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>key</span> <span class='word'>step</span> <span class='word'>to</span> <span class='word'>ensure</span> <span class='word'>that</span> <span class='word'>all</span> <span class='word'>clients</span> <span class='word'>converge</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>string</span><span class='ignore'>,</span> <span class='word'>no</span> <span class='word'>matter</span> <span class='word'>what</span> <span class='word'>order</span> <span class='word'>the</span> <span class='word'>concurrent</span> <span class='word'>inserts</span> <span class='word'>are</span> <span class='word'>incorporated</span><span class='ignore'>.</span><br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <span class='word'>To</span> <span class='word'>understand</span> <span class='word'>the</span> <span class='word'>intuition</span> <span class='word'>behind</span> <span class='word'>why</span> <span class='word'>this</span> <span class='word'>works</span><span class='ignore'>,</span> <span class='word'>recall</span> <span class='word'>the</span> <span class='word'>reason</span> <span class='word'>for</span> <span class='word'>utilizing</span> <span class='word'>a</span> <span class='word'>Lamport</span> <span class='word'>clock</span><span class='ignore'>:</span> <span class='word'>we</span> <span class='word'>can</span> <span class='word'>deduce</span> <span class='word'>that</span> <span class='word'>a</span> <span class='word'>remote</span><span class='ignore'>,</span> <span class='word'>incoming</span> <span class='word'>identifier</span> <span class='mathgroup'>$</span><span class='math'>id</span><span class='math'>_</span><span class='math'>a</span><span class='mathgroup'>$</span> <span class='word'>and</span> <span class='word'>some</span> <span class='word'>locally</span> <span class='word'>generated</span> <span class='mathgroup'>$</span><span class='math'>id</span><span class='math'>_</span><span class='math'>b</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>are</span> <span class='word'>concurrent</span> <span class='word'>if</span> <span class='mathgroup'>$</span><span class='math'>id</span><span class='math'>_</span><span class='math'>a</span> <span class='mathcmd'>\leq</span> <span class='math'>id</span><span class='math'>_</span><span class='math'>b</span><span class='mathgroup'>$</span> <span class='ignore'>.</span> <span class='word'>Thus</span><span class='ignore'>,</span> <span class='word'>when</span> <span class='word'>incorporating</span> <span class='mathgroup'>$</span><span class='math'>id</span><span class='math'>_</span><span class='math'>a</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>we</span> <span class='word'>skip</span> <span class='word'>over</span> <span class='word'>local</span><span class='ignore'>,</span> <span class='word'>concurrent</span> <span class='word'>identifiers</span> <span class='word'>until</span> <span class='word'>finding</span> <span class='word'>one</span> <span class='word'>where</span> <span class='word'>the</span> <span class='word'>condition</span> <span class='mathgroup'>$</span><span class='mathcmd'>\leq</span><span class='mathgroup'>$</span> <span class='word'>fails</span> <span class='word'>and</span> <span class='word'>insert</span> <span class='word'>there</span><span class='ignore'>.</span> <span class='word'>Reciprocally</span><span class='ignore'>,</span> <span class='word'>once</span> <span class='word'>local</span> <span class='word'>operations</span> <span class='word'>arrive</span> <span class='word'>at</span> <span class='word'>the</span> <span class='word'>sender</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>algorithm</span> <span class='word'>will</span> <span class='word'>be</span> <span class='word'>applied</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>arrived</span> <span class='word'>operations</span> <span class='word'>will</span> <span class='word'>have</span> <span class='word'>greater</span> <span class='word'>identifiers</span><span class='ignore'>,</span> <span class='mathgroup'>$</span><span class='math'>id</span><span class='math'>_</span><span class='math'>b</span> <span class='math'>&gt;</span> <span class='math'>id</span><span class='math'>_</span><span class='math'>a</span><span class='mathgroup'>$</span> <span class='ignore'>(</span><span class='word'>same</span> <span class='word'>identifiers</span> <span class='word'>of</span> <span class='word'>concern</span> <span class='word'>as</span> <span class='word'>before</span><span class='ignore'>,</span> <span class='word'>just</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>other</span> <span class='word'>client</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>so</span> <span class='word'>step</span> <span class='word'>2</span> <span class='word'>will</span> <span class='word'>iterate</span> <span class='word'>over</span> <span class='word'>nothing</span> <span class='word'>and</span> <span class='word'>insert</span> <span class='word'>them</span> <span class='word'>before</span> <span class='mathgroup'>$</span><span class='math'>id</span><span class='math'>_</span><span class='math'>a</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <span class='word'>Thus</span> <span class='word'>on</span> <span class='word'>both</span> <span class='word'>clients</span><span class='ignore'>,</span> <span class='mathgroup'>$</span><span class='math'>id</span><span class='math'>_</span><span class='math'>a</span><span class='mathgroup'>$</span> <span class='word'>will</span> <span class='word'>be</span> <span class='word'>reside</span> <span class='word'>after</span> <span class='mathgroup'>$</span><span class='math'>id</span><span class='math'>_</span><span class='math'>b</span><span class='mathgroup'>$</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>linked</span> <span class='word'>list</span><span class='ignore'>.</span><br>
&nbsp; &nbsp; <br>
&nbsp; 	<span class='cmd'>\paragraph</span><span class='ignore'>{</span><span class='hword'>Delete</span><span class='ignore'>}</span><br>
				<span class='word'>Deleting</span> <span class='word'>a</span> <span class='word'>character</span> <span class='word'>from</span> <span class='word'>the</span> <span class='word'>text</span> <span class='word'>document</span> <span class='word'>generates</span> <span class='word'>a</span> <span class='word'>delete</span> <span class='word'>operation</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>is</span> <span class='word'>transmitted</span> <span class='word'>as</span> <span class='word'>a</span> <span class='word'>bundle</span> <span class='mathgroup'>$</span><span class='math'>B</span><span class='mathgroup'>$</span> <span class='word'>containing</span><br>
&nbsp; &nbsp; <span class='envir'>\begin</span><span class='envir'>{itemize}</span><br>
					<span class='cmd'>\item</span> <span class='word'>The</span> <span class='word'>target</span> <span class='word'>character's</span> <span class='word'>identifier</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>deleted</span> <span class='mathgroup'>$</span><span class='math'>deleteId</span><span class='mathgroup'>$</span><br>
&nbsp; &nbsp; <span class='envir'>\end</span><span class='envir'>{itemize}</span><br>
&nbsp; &nbsp; <br>
<span class='cmd'>\vspace</span><span class='ignore'>{</span><span class='ignore'>3mm</span><span class='ignore'>}</span><br>
<span class='envir'>\begin</span><span class='envir'>{lstlisting}</span><span class='option'>[caption=Delete Bundle Type Signature]</span><br>
<span class='ignore'>interface</span><span class='ignore'> </span><span class='ignore'>DeleteMessage</span><span class='ignore'> </span><span class='ignore'>{</span><br>
<span class='ignore'>&nbsp; &nbsp; </span><span class='ignore'>deleteId</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>string</span><br>
<span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'></span><span class='envir'>{lstlisting}</span><br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <span class='word'>Incorporating</span> <span class='word'>a</span> <span class='word'>delete</span> <span class='word'>bundle</span> <span class='word'>into</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>is</span> <span class='word'>straightforward</span><br>
&nbsp; &nbsp; <span class='envir'>\begin</span><span class='envir'>{enumerate}</span><br>
					<span class='cmd'>\item</span> <span class='word'>Locate</span> <span class='word'>the</span> <span class='word'>node</span> <span class='mathgroup'>$</span><span class='math'>N</span><span class='mathgroup'>$</span> <span class='word'>corresponding</span> <span class='word'>to</span> <span class='mathgroup'>$</span><span class='math'>B.deleteId</span><span class='mathgroup'>$</span><br>
&nbsp; &nbsp; 	<span class='cmd'>\item</span> <span class='word'>Set</span> <span class='word'>a</span> <span class='word'>boolean</span> <span class='word'>flag</span> <span class='word'>in</span> <span class='mathgroup'>$</span><span class='math'>N.d</span><span class='mathgroup'>$</span> <span class='word'>to</span> <span class='word'>true</span><br>
&nbsp; &nbsp; <span class='envir'>\end</span><span class='envir'>{enumerate}</span><br>
&nbsp; &nbsp; <br>
&nbsp; <span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Tombstones</span><span class='ignore'>}</span><br>
			<span class='word'>The</span> <span class='word'>delete</span> <span class='word'>operation</span> <span class='word'>described</span> <span class='word'>previously</span> <span class='word'>never</span> <span class='word'>removes</span> <span class='word'>nodes</span><span class='ignore'>,</span> <span class='word'>but</span> <span class='word'>leaves</span> <span class='word'>them</span> <span class='word'>behind</span> <span class='word'>as</span> <span class='word'>tombstones</span><span class='ignore'>.</span> <span class='word'>Some</span> <span class='word'>CRDTs</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>Logoot</span> <span class='word'>described</span> <span class='word'>in</span> <span class='word'>section</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span><span class='ignore'>,</span> <span class='word'>are</span> <span class='word'>structured</span> <span class='word'>such</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>document</span> <span class='word'>is</span> <span class='word'>series</span> <span class='word'>of</span> <span class='word'>independent</span> <span class='word'>nodes</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>are</span> <span class='word'>arranged</span> <span class='word'>solely</span> <span class='word'>according</span> <span class='word'>to</span> <span class='word'>their</span> <span class='word'>identifiers</span><span class='ignore'>.</span> <span class='word'>Thus</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>node</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>fully</span> <span class='word'>removed</span> <span class='word'>without</span> <span class='word'>consequence</span> <span class='word'>to</span> <span class='word'>other</span> <span class='word'>nodes</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>my</span> <span class='word'>CRDT</span><span class='ignore'>,</span> <span class='word'>each</span> <span class='word'>node</span> <span class='word'>depends</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>prior</span> <span class='word'>node</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>linked</span> <span class='word'>list</span><span class='ignore'>.</span> <span class='word'>Unless</span> <span class='word'>we</span> <span class='word'>can</span> <span class='word'>establish</span> <span class='word'>that</span> <span class='word'>each</span> <span class='word'>client</span> <span class='word'>has</span> <span class='word'>received</span> <span class='word'>and</span> <span class='word'>executed</span> <span class='word'>a</span> <span class='word'>delete</span> <span class='word'>operation</span><span class='ignore'>,</span> <span class='word'>we</span> <span class='word'>cannot</span> <span class='word'>remove</span> <span class='word'>our</span> <span class='word'>node</span> <span class='word'>from</span> <span class='word'>the</span> <span class='word'>linked</span> <span class='word'>list</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>other</span> <span class='word'>clients</span> <span class='word'>may</span> <span class='word'>be</span> <span class='word'>executing</span> <span class='word'>concurrent</span> <span class='word'>edits</span> <span class='word'>which</span> <span class='word'>depend</span> <span class='word'>on</span> <span class='word'>that</span> <span class='word'>node</span><span class='ignore'>,</span> <span class='word'>are</span> <span class='word'>working</span> <span class='word'>on</span> <span class='word'>a</span> <span class='word'>document</span> <span class='word'>offline</span><span class='ignore'>,</span> <span class='word'>or</span> <span class='word'>on</span> <span class='word'>a</span> <span class='word'>very</span> <span class='word'>high</span> <span class='word'>latency</span> <span class='word'>link</span><span class='ignore'>.</span><br>
&nbsp; 	<br>
&nbsp; 	<span class='word'>The</span> <span class='word'>process</span> <span class='word'>of</span> <span class='word'>establishing</span> <span class='word'>that</span> <span class='word'>each</span> <span class='word'>client</span> <span class='word'>has</span> <span class='word'>received</span> <span class='word'>and</span> <span class='word'>executed</span> <span class='word'>an</span> <span class='word'>operation</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>achieved</span> <span class='word'>using</span> <span class='word'>an</span> <span class='word'>expensive</span> <span class='word'>commitment</span> <span class='word'>protocol</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>is</span> <span class='word'>what</span> <span class='word'>is</span> <span class='word'>suggested</span> <span class='word'>in</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>preguica2009</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>effect</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>system</span> <span class='word'>periodically</span> <span class='word'>executes</span> <span class='word'>a</span> <span class='word'>distributed</span> <span class='word'>garbage</span> <span class='word'>collection</span><span class='ignore'>.</span> <span class='word'>While</span> <span class='word'>possible</span><span class='ignore'>,</span> <span class='word'>I</span> <span class='word'>have</span> <span class='word'>not</span> <span class='word'>implemented</span> <span class='word'>this</span> <span class='word'>protocol</span><span class='ignore'>.</span> <span class='word'>While</span> <span class='word'>remove</span> <span class='word'>tombstones</span> <span class='word'>may</span> <span class='word'>be</span> <span class='word'>necessary</span> <span class='word'>after</span> <span class='word'>the</span> <span class='word'>data</span> <span class='word'>structure</span> <span class='word'>becomes</span> <span class='word'>too</span> <span class='word'>large</span><span class='ignore'>,</span> <span class='word'>until</span> <span class='word'>such</span> <span class='word'>a</span> <span class='word'>point</span> <span class='word'>tombstones</span> <span class='word'>are</span> <span class='word'>useful</span> <span class='word'>in</span> <span class='word'>implementing</span> <span class='word'>undo</span> <span class='word'>functionality</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>text</span> <span class='word'>editor</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>is</span> <span class='word'>discussed</span> <span class='word'>in</span> <span class='word'>section</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span><span class='ignore'>.</span><br>
&nbsp; 	<br>
&nbsp; 	<span class='ignore'>[</span><span class='word'>TODO</span> <span class='word'>make</span> <span class='word'>reference</span> <span class='word'>to</span> <span class='word'>another</span> <span class='word'>section</span><span class='ignore'>,</span> <span class='word'>perhaps</span> <span class='word'>after</span> <span class='word'>vector</span> <span class='word'>clock</span> <span class='word'>addition</span><span class='ignore'>,</span> <span class='word'>to</span> <span class='word'>garbage</span> <span class='word'>collecting</span> <span class='word'>the</span> <span class='word'>tombstones</span> <span class='word'>using</span> <span class='word'>the</span> <span class='word'>vectors</span><span class='ignore'>]</span><br>
&nbsp; <br>
&nbsp; <span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Optimizations</span><span class='ignore'>}</span><br>
			<span class='word'>The</span> <span class='word'>insert</span> <span class='word'>operation</span> <span class='word'>produces</span> <span class='word'>a</span> <span class='word'>bundle</span> <span class='word'>which</span> <span class='word'>contains</span> <span class='word'>exactly</span> <span class='word'>one</span> <span class='word'>character</span><span class='ignore'>,</span> <span class='word'>one</span> <span class='word'>identifier</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>one</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>after</span><span class='ignore'>}</span> <span class='word'>tag</span><span class='ignore'>.</span> <span class='word'>We</span> <span class='word'>can</span> <span class='word'>drastically</span> <span class='word'>cut</span> <span class='word'>the</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>operations</span> <span class='word'>generated</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>thus</span> <span class='word'>packets</span> <span class='word'>sent</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>network</span><span class='ignore'>,</span> <span class='word'>by</span> <span class='word'>allowing</span> <span class='word'>an</span> <span class='word'>insert</span> <span class='word'>bundle</span> <span class='word'>to</span> <span class='word'>contain</span> <span class='word'>a</span> <span class='word'>contiguous</span> <span class='word'>sequence</span> <span class='word'>of</span> <span class='word'>characters</span><span class='ignore'>.</span> <br>
&nbsp; 	<br>
&nbsp; 	<span class='word'>An</span> <span class='word'>optimized</span> <span class='word'>insert</span> <span class='word'>bundle</span> <span class='word'>contains</span><br>
&nbsp; 	<span class='envir'>\begin</span><span class='envir'>{itemize}</span><br>
				<span class='cmd'>\item</span> <span class='word'>A</span> <span class='word'>unique</span> <span class='word'>identifier</span>&nbsp; <span class='mathgroup'>$</span><span class='math'>(</span><span class='math'>t</span><span class='math'>,</span> <span class='math'>cid</span><span class='math'>)</span><span class='mathgroup'>$</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>first</span> <span class='word'>character</span><br>
&nbsp; &nbsp; <span class='cmd'>\item</span> <span class='word'>The</span> <span class='word'>character</span> <span class='word'>sequence</span> <span class='mathgroup'>$</span><span class='math'>s</span><span class='mathgroup'>$</span> <span class='word'>itself</span><br>
&nbsp; &nbsp; <span class='cmd'>\item</span> <span class='word'>The</span> <span class='word'>node</span> <span class='word'>after</span> <span class='word'>which</span> <span class='word'>to</span> <span class='word'>insert</span> <span class='word'>the</span> <span class='word'>character</span> <span class='word'>sequence</span> <span class='word'>denoted</span> <span class='mathgroup'>$</span><span class='math'>(</span><span class='math'>t</span><span class='math'>_</span><span class='ignore'>{</span><span class='math'>after</span><span class='ignore'>}</span><span class='math'>,</span> <span class='math'>c</span><span class='math'>)</span><span class='mathgroup'>$</span><br>
&nbsp; 	<span class='envir'>\end</span><span class='envir'>{itemize}</span><br>
&nbsp; 	<span class='word'>The</span> <span class='word'>receiver</span> <span class='word'>CRDT</span> <span class='word'>incorporates</span> <span class='word'>the</span> <span class='word'>bundle</span> <span class='word'>by</span> <span class='word'>generating</span> <span class='word'>a</span> <span class='word'>new</span> <span class='word'>node</span> <span class='word'>for</span> <span class='word'>each</span> <span class='word'>character</span> <span class='mathgroup'>$</span><span class='math'>s</span><span class='math'>_</span><span class='math'>i</span><span class='mathgroup'>$</span> <span class='word'>with</span> <span class='word'>identifier</span> <span class='mathgroup'>$</span><span class='math'>(</span><span class='math'>t</span> <span class='math'>+</span> <span class='math'>i</span><span class='math'>,</span> <span class='math'>cid</span><span class='math'>)</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>first</span> <span class='word'>node</span> <span class='word'>is</span> <span class='word'>pointed</span> <span class='word'>to</span> <span class='word'>by</span> <span class='word'>the</span> <span class='mathgroup'>$</span><span class='math'>(</span><span class='math'>t</span><span class='math'>_</span><span class='ignore'>{</span><span class='math'>after</span><span class='ignore'>}</span><span class='math'>,</span> <span class='math'>c</span><span class='math'>)</span><span class='mathgroup'>$</span> <span class='mathgroup'>$</span><span class='math'>after</span><span class='mathgroup'>$</span> <span class='word'>pointer</span> <span class='word'>and</span> <span class='word'>each</span> <span class='word'>new</span> <span class='word'>node</span> <span class='word'>points</span> <span class='word'>to</span> <span class='mathgroup'>$</span><span class='math'>(</span><span class='math'>t</span> <span class='math'>+</span> <span class='math'>(</span><span class='math'>i</span><span class='math'>+</span><span class='math'>1</span><span class='math'>)</span><span class='math'>,</span> <span class='math'>c</span><span class='math'>)</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>final</span> <span class='word'>node</span> <span class='word'>points</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>original</span> <span class='word'>target</span> <span class='word'>of</span> <span class='mathgroup'>$</span><span class='math'>(</span><span class='math'>t</span><span class='math'>_</span><span class='ignore'>{</span><span class='math'>after</span><span class='ignore'>}</span><span class='math'>,</span> <span class='math'>c</span><span class='mathgroup'>$</span><span class='ignore'>.</span><br>
&nbsp; 	<br>
&nbsp; 	<span class='word'>This</span> <span class='word'>insert</span> <span class='word'>optimization</span> <span class='word'>has</span> <span class='word'>potentially</span> <span class='word'>massive</span> <span class='word'>gains</span> <span class='word'>in</span> <span class='word'>terms</span> <span class='word'>of</span> <span class='word'>network</span> <span class='word'>efficiency</span><span class='ignore'>.</span> <span class='word'>With</span> <span class='word'>the</span> <span class='word'>optimization</span><span class='ignore'>,</span> <span class='word'>at</span> <span class='word'>best</span><span class='ignore'>,</span> <span class='word'>an</span> <span class='word'>entire</span> <span class='word'>document</span> <span class='word'>could</span> <span class='word'>be</span> <span class='word'>inserted</span> <span class='word'>at</span> <span class='word'>once</span><span class='ignore'>,</span> <span class='word'>sending</span> <span class='word'>exactly</span> <span class='word'>one</span> <span class='word'>identifier</span> <span class='word'>plus</span> <span class='word'>a</span> <span class='word'>string</span> <span class='word'>of</span> <span class='word'>length</span> <span class='mathgroup'>$</span><span class='math'>n</span><span class='mathgroup'>$</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>single</span> <span class='word'>packet</span><span class='ignore'>.</span> <span class='word'>A</span> <span class='word'>more</span> <span class='word'>likely</span> <span class='word'>scenario</span> <span class='word'>is</span> <span class='word'>word-by-word</span> <span class='word'>or</span> <span class='word'>line-by-line</span> <span class='word'>insertion</span><span class='ignore'>.</span> <span class='word'>At</span> <span class='word'>worst</span><span class='ignore'>,</span> <span class='word'>we</span> <span class='word'>revert</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>unoptimized</span> <span class='word'>case</span><span class='ignore'>:</span> <span class='mathgroup'>$</span><span class='math'>n</span><span class='mathgroup'>$</span> <span class='word'>characters</span> <span class='word'>and</span> <span class='word'>identifiers</span> <span class='word'>are</span> <span class='word'>sent</span> <span class='word'>in</span> <span class='mathgroup'>$</span><span class='math'>n</span><span class='mathgroup'>$</span> <span class='word'>packets</span><span class='ignore'>.</span> <span class='word'>If</span> <span class='word'>we</span> <span class='word'>assume</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>protocol</span> <span class='word'>can</span> <span class='word'>send</span> <span class='word'>arbitrarily</span> <span class='word'>long</span> <span class='word'>packets</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>application-layer</span> <span class='word'>network</span> <span class='word'>capacity</span> <span class='word'>requirement</span> <span class='word'>is</span> <span class='word'>reduced</span> <span class='word'>to</span> <span class='word'>between</span> <span class='mathgroup'>$</span><span class='math'>\Omega</span> <span class='math'>(</span><span class='math'>n</span><span class='math'>)</span><span class='mathgroup'>$</span> <span class='word'>and</span> <span class='mathgroup'>$</span><span class='math'>O</span><span class='math'>(</span><span class='math'>nlog</span><span class='math'>(</span><span class='math'>n</span><span class='math'>)</span><span class='math'>)</span><span class='mathgroup'>$</span> <span class='word'>from</span> <span class='mathgroup'>$</span><span class='math'>\Theta</span><span class='math'>(</span><span class='math'>nlog</span><span class='math'>(</span><span class='math'>n</span><span class='math'>)</span><span class='math'>)</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <span class='word'>Written</span> <span class='word'>another</span> <span class='word'>way</span><span class='ignore'>,</span> <span class='word'>if</span> <span class='word'>an</span> <span class='word'>average</span> <span class='word'>of</span> <span class='mathgroup'>$</span><span class='math'>m</span><span class='mathgroup'>$</span> <span class='word'>characters</span> <span class='word'>is</span> <span class='word'>sent</span> <span class='word'>per</span> <span class='word'>packet</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>capacity</span> <span class='word'>needed</span> <span class='word'>is</span> <span class='mathgroup'>$</span><span class='math'>\Theta </span><span class='math'>(</span><span class='math'>(</span><span class='math'>m</span><span class='math'>+</span><span class='math'>log</span><span class='math'>(</span><span class='math'>n</span><span class='math'>)</span><span class='math'>)</span> <span class='math'>*</span> <span class='math'>n</span><span class='math'>/</span><span class='math'>m</span><span class='math'>)</span><span class='mathgroup'>$</span> <span class='ignore'>=</span> <span class='mathgroup'>$</span><span class='math'>\Theta </span><span class='math'>(</span><span class='math'>n</span> <span class='math'>+</span> <span class='math'>nlog</span><span class='math'>(</span><span class='math'>n</span><span class='math'>)</span><span class='math'>/</span><span class='math'>m</span><span class='math'>)</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>packets</span> <span class='word'>is</span> <span class='word'>reduced</span> <span class='word'>to</span> <span class='mathgroup'>$</span><span class='math'>\Theta </span><span class='math'>(</span><span class='math'>n</span><span class='math'>/</span><span class='math'>m</span><span class='math'>)</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>reduction</span> <span class='word'>in</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>packets</span> <span class='word'>is</span> <span class='word'>desirable</span> <span class='word'>since</span> <span class='word'>standard</span> <span class='word'>protocols</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>TCP</span> <span class='word'>have</span> <span class='word'>high</span> <span class='word'>per-packet</span> <span class='word'>dissemination</span> <span class='word'>overheads</span><span class='ignore'>.</span><br>
&nbsp; 	<br>
&nbsp; 	<span class='word'>Another</span> <span class='word'>optimization</span> <span class='word'>I</span> <span class='word'>added</span> <span class='word'>was</span> <span class='word'>renaming</span> <span class='word'>tags</span> <span class='word'>and</span> <span class='word'>names</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>as</span> <span class='word'>short</span> <span class='word'>as</span> <span class='word'>possible</span> <span class='ignore'>(</span><span class='word'>often</span> <span class='word'>single</span> <span class='word'>characters</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>so</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>resulting</span> <span class='word'>serialized</span> <span class='word'>JSON</span> <span class='word'>string</span> <span class='word'>sent</span> <span class='word'>over</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>is</span> <span class='word'>as</span> <span class='word'>short</span> <span class='word'>as</span> <span class='word'>possible</span><span class='ignore'>.</span> <span class='word'>As</span> <span class='word'>discussed</span> <span class='word'>before</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span> <span class='word'>TODO</span><span class='ignore'>]</span><span class='ignore'>,</span> <span class='word'>alternatives</span> <span class='word'>to</span> <span class='word'>JSON</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>Protocol</span> <span class='word'>Buffers</span> <span class='word'>would</span> <span class='word'>eliminate</span> <span class='word'>almost</span> <span class='word'>all</span> <span class='word'>of</span> <span class='word'>these</span> <span class='word'>overheads</span><span class='ignore'>,</span> <span class='word'>but</span> <span class='word'>this</span> <span class='word'>would</span> <span class='word'>make</span> <span class='word'>comparison</span> <span class='word'>with</span> <span class='word'>ShareJS</span> <span class='word'>less</span> <span class='word'>fair</span><span class='ignore'>.</span><br>
	<br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Network</span> <span class='hword'>simulation</span><span class='ignore'>}</span><br>
<br>
	<br>
&nbsp; <span class='word'>The</span> <span class='word'>section</span> <span class='word'>describes</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>simulation</span> <span class='word'>that</span> <span class='word'>delivers</span> <span class='word'>operation</span> <span class='word'>bundles</span> <span class='word'>from</span> <span class='word'>one</span> <span class='word'>client</span> <span class='word'>to</span> <span class='word'>another</span><span class='ignore'>.</span> <span class='word'>First</span><span class='ignore'>,</span> <span class='word'>I</span> <span class='word'>will</span> <span class='word'>detail</span> <span class='word'>the</span> <span class='word'>initial</span> <span class='word'>assumptions</span> <span class='word'>I</span> <span class='word'>made</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>is</span> <span class='word'>followed</span> <span class='word'>by</span> <span class='word'>the</span> <span class='word'>abstractions</span> <span class='word'>the</span> <span class='word'>simulation</span> <span class='word'>provides</span> <span class='word'>to</span> <span class='word'>each</span> <span class='word'>client</span><span class='ignore'>.</span> <span class='word'>Next</span> <span class='word'>I</span> <span class='word'>describe</span> <span class='word'>the</span> <span class='word'>core</span> <span class='word'>difficulty</span> <span class='word'>in</span> <span class='word'>implementing</span> <span class='word'>a</span> <span class='word'>simulation</span><span class='ignore'>:</span> <span class='word'>the</span> <span class='word'>scheduler</span><span class='ignore'>.</span> <span class='word'>Lastly</span><span class='ignore'>,</span> <span class='word'>I</span> <span class='word'>will</span> <span class='word'>relax</span> <span class='word'>the</span> <span class='word'>assumptions</span> <span class='word'>made</span> <span class='word'>to</span> <span class='word'>more</span> <span class='word'>closely</span> <span class='word'>mirror</span> <span class='word'>real</span> <span class='word'>world</span> <span class='word'>situations</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>Note</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>term</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>simulation</span><span class='ignore'>}</span> <span class='word'>is</span> <span class='word'>not</span> <span class='word'>fully</span> <span class='word'>correct</span><span class='ignore'>,</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>networking</span> <span class='word'>component</span> <span class='word'>does</span> <span class='word'>not</span> <span class='word'>model</span> <span class='word'>a</span> <span class='word'>real</span> <span class='word'>network</span> <span class='word'>protocol</span> <span class='word'>but</span> <span class='word'>is</span> <span class='word'>in</span> <span class='word'>use</span> <span class='word'>to</span> <span class='word'>allow</span> <span class='word'>analysis</span> <span class='word'>and</span> <span class='word'>some</span> <span class='word'>detail</span> <span class='word'>is</span> <span class='word'>included</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>a</span> <span class='word'>specific</span> <span class='word'>network</span> <span class='word'>topology</span><span class='ignore'>.</span> <span class='word'>An</span> <span class='word'>alternative</span> <span class='word'>might</span> <span class='word'>be</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>emulation</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>as</span> <span class='word'>I</span> <span class='word'>use</span> <span class='word'>implement</span> <span class='word'>a</span> <span class='word'>replacement</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>functionality</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>protocol</span><span class='ignore'>,</span> <span class='word'>without</span> <span class='word'>implementing</span> <span class='word'>the</span> <span class='word'>protocol</span> <span class='word'>itself</span><span class='ignore'>.</span> <span class='word'>For</span> <span class='word'>simplicity</span> <span class='word'>I</span> <span class='word'>will</span> <span class='word'>continue</span> <span class='word'>with</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>simulation</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Assumptions</span><span class='ignore'>}</span> <br>
		<span class='word'>The</span> <span class='word'>CRDT</span> <span class='word'>I</span> <span class='word'>implemented</span> <span class='word'>requires</span> <span class='word'>that</span> <span class='word'>messages</span> <span class='word'>be</span> <span class='word'>delivered</span> <span class='word'>causally</span><span class='ignore'>~</span><span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>concdistsystems</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>We</span> <span class='word'>define</span> <span class='word'>the</span> <span class='word'>happens-before</span> <span class='word'>relation</span> <span class='mathgroup'>\(</span><span class='math'>a</span> <span class='mathcmd'>\rightarrow</span> <span class='math'>b</span><span class='mathgroup'>\)</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>true</span> <span class='word'>whenever</span> <span class='mathgroup'>$</span><span class='math'>a</span><span class='mathgroup'>$</span> <span class='word'>happens</span> <span class='word'>before</span> <span class='mathgroup'>$</span><span class='math'>b</span><span class='mathgroup'>$</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>process</span><span class='ignore'>,</span> <span class='word'>for</span> <span class='word'>example</span> <span class='mathgroup'>\[</span><span class='math'>Receive</span><span class='mathcmd'>\ </span><span class='math'>Insert</span><span class='mathcmd'>\ </span><span class='math'>`</span><span class='math'>`</span><span class='math'>Hello</span><span class='math'>'</span><span class='math'>'</span> <span class='mathcmd'>\rightarrow</span> <span class='math'>Insert</span><span class='mathcmd'>\ </span><span class='math'>`</span><span class='math'>`</span> <span class='math'>World</span><span class='math'>'</span><span class='math'>'</span><span class='mathgroup'>\]</span><br>
&nbsp; <span class='word'>We</span> <span class='word'>then</span> <span class='word'>require</span> <span class='word'>that</span> <span class='word'>all</span> <span class='word'>events</span> <span class='word'>ordered</span> <span class='word'>by</span> <span class='mathgroup'>$</span><span class='mathcmd'>\rightarrow</span><span class='mathgroup'>$</span> <span class='word'>be</span> <span class='word'>delivered</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>valid</span> <span class='word'>ordering</span> <span class='word'>according</span> <span class='word'>to</span> <span class='mathgroup'>$</span><span class='mathcmd'>\rightarrow</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <span class='word'>We</span> <span class='word'>call</span> <span class='word'>this</span> <span class='ignore'>`</span><span class='ignore'>`</span><span class='word'>Causal</span> <span class='word'>Order</span><span class='ignore'>'</span><span class='ignore'>'</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>defines</span> <span class='word'>a</span> <span class='word'>partial</span> <span class='word'>order</span><span class='ignore'>,</span> <span class='word'>since</span> <span class='word'>there</span> <span class='word'>may</span> <span class='word'>be</span> <span class='word'>some</span> <span class='mathgroup'>$</span><span class='math'>A</span><span class='mathgroup'>$</span> <span class='word'>and</span> <span class='mathgroup'>$</span><span class='math'>B</span><span class='mathgroup'>$</span> <span class='word'>such</span> <span class='word'>that</span> <span class='word'>neither</span> <span class='mathgroup'>$</span><span class='math'>A</span> <span class='mathcmd'>\rightarrow</span> <span class='math'>B</span><span class='mathgroup'>$</span> <span class='word'>nor</span> <span class='mathgroup'>$</span><span class='math'>B</span> <span class='mathcmd'>\rightarrow</span> <span class='math'>A</span><span class='mathgroup'>$</span> <span class='word'>holds</span><span class='ignore'>.</span> <span class='word'>Concurrent</span> <span class='word'>operations</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>delivered</span> <span class='word'>in</span> <span class='word'>any</span> <span class='word'>order</span> <span class='word'>since</span> <span class='word'>they</span> <span class='word'>are</span> <span class='word'>guaranteed</span> <span class='word'>to</span> <span class='word'>commute</span> <span class='word'>by</span> <span class='word'>the</span> <span class='word'>properties</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>CRDT</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>To</span> <span class='word'>justify</span> <span class='word'>the</span> <span class='word'>causal</span> <span class='word'>order</span> <span class='word'>delivery</span> <span class='word'>requirement</span><span class='ignore'>,</span> <span class='word'>simply</span> <span class='word'>take</span> <span class='word'>the</span> <span class='word'>case</span> <span class='word'>of</span> <span class='word'>inserting</span> <span class='word'>a</span> <span class='word'>link</span> <span class='word'>into</span> <span class='word'>a</span> <span class='word'>linked</span> <span class='word'>list</span> <span class='word'>after</span> <span class='word'>a</span> <span class='word'>node</span> <span class='word'>that</span> <span class='word'>does</span> <span class='word'>not</span> <span class='word'>exist</span> <span class='word'>yet</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>the</span> <span class='word'>CRDT</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>links</span> <span class='word'>embed</span> <span class='word'>the</span> <span class='word'>causal</span> <span class='word'>ordering</span> <span class='word'>thus</span> <span class='word'>we</span> <span class='word'>require</span> <span class='word'>causal</span> <span class='word'>delivery</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='cmd'>\underline</span><span class='ignore'>{</span><span class='word'>Network</span> <span class='word'>Assumptions</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>These</span> <span class='word'>are</span> <span class='word'>guaranteed</span> <span class='word'>by</span> <span class='word'>the</span> <span class='word'>simulation</span><span class='ignore'>.</span><br>
&nbsp; <span class='envir'>\begin</span><span class='envir'>{enumerate}</span><br>
			<span class='cmd'>\item</span> <span class='word'>Unchanging</span> <span class='word'>network</span> <span class='word'>topology</span><br>
&nbsp; 	<span class='cmd'>\item</span> <span class='word'>In</span> <span class='word'>order</span> <span class='word'>delivery</span> <span class='word'>on</span> <span class='word'>any</span> <span class='word'>single</span> <span class='word'>link</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>network</span><br>
&nbsp; 	<span class='cmd'>\item</span> <span class='word'>No</span> <span class='word'>packets</span> <span class='word'>are</span> <span class='word'>lost</span><br>
&nbsp; <span class='envir'>\end</span><span class='envir'>{enumerate}</span><br>
&nbsp; <br>
&nbsp; <span class='word'>Along</span> <span class='word'>with</span> <span class='word'>this</span><span class='ignore'>,</span> <span class='word'>my</span> <span class='word'>implementation</span> <span class='word'>of</span> <span class='word'>individual</span> <span class='word'>clients</span> <span class='word'>guarantees</span><span class='ignore'>:</span><br>
&nbsp; <span class='envir'>\begin</span><span class='envir'>{enumerate}</span><br>
			<span class='cmd'>\item</span> <span class='word'>Received</span> <span class='word'>packets</span> <span class='word'>are</span> <span class='word'>forwarded</span> <span class='word'>in</span> <span class='word'>order</span><span class='ignore'>,</span> <span class='word'>i.e</span><span class='ignore'>.</span> <span class='word'>if</span> <span class='mathgroup'>$</span><span class='math'>A</span><span class='mathgroup'>$</span> <span class='word'>arrives</span> <span class='word'>before</span> <span class='mathgroup'>$</span><span class='math'>B</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>then</span> <span class='mathgroup'>$</span><span class='math'>A</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>forwarded</span> <span class='word'>before</span> <span class='mathgroup'>$</span><span class='math'>B</span><span class='mathgroup'>$</span><span class='ignore'>.</span><br>
&nbsp; 	<span class='cmd'>\item</span> <span class='word'>Received</span> <span class='word'>packets</span> <span class='word'>are</span> <span class='word'>broadcast</span> <span class='word'>to</span> <span class='word'>peers</span> <span class='word'>before</span> <span class='word'>the</span> <span class='word'>client</span> <span class='word'>generates</span> <span class='word'>and</span> <span class='word'>broadcasts</span> <span class='word'>potentially</span> <span class='word'>dependent</span> <span class='word'>operations</span><span class='ignore'>.</span><br>
&nbsp; <span class='envir'>\end</span><span class='envir'>{enumerate}</span><br>
&nbsp; <br>
&nbsp; <span class='word'>The</span> <span class='word'>simulation</span> <span class='word'>and</span> <span class='word'>client</span> <span class='word'>guarantees</span> <span class='word'>provide</span> <span class='word'>causal</span> <span class='word'>delivery</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='envir'>\begin</span><span class='envir'>{proof}</span><span class='optparm'>[</span><span class='word'>Guarantee</span> <span class='word'>of</span> <span class='word'>Causal</span> <span class='word'>Delivery</span><span class='optparm'>]</span><br>
		<br>
&nbsp; <span class='word'>Assume</span> <span class='word'>there</span> <span class='word'>is</span> <span class='word'>some</span> <span class='word'>packet</span> <span class='mathgroup'>$</span><span class='math'>A</span><span class='mathgroup'>$</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>network</span><span class='ignore'>.</span> <span class='word'>A</span> <span class='word'>packet</span> <span class='mathgroup'>$</span><span class='math'>B</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>sent</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>causally</span> <span class='word'>dependent</span> <span class='word'>manner</span><span class='ignore'>,</span> <span class='word'>i.e</span><span class='ignore'>.</span> <span class='mathgroup'>$</span><span class='math'>A</span> <span class='mathcmd'>\rightarrow</span> <span class='math'>B</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>thus</span> <span class='mathgroup'>$</span><span class='math'>B</span><span class='mathgroup'>$</span> <span class='word'>must</span> <span class='word'>be</span> <span class='word'>delivered</span> <span class='word'>after</span> <span class='mathgroup'>$</span><span class='math'>A</span><span class='mathgroup'>$</span> <span class='word'>on</span> <span class='word'>every</span> <span class='word'>client</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>network</span><span class='ignore'>.</span> <span class='word'>Denote</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>node</span> <span class='word'>which</span> <span class='word'>generated</span> <span class='mathgroup'>$</span><span class='math'>B</span><span class='mathgroup'>$</span> <span class='word'>as</span> <span class='mathgroup'>$</span><span class='math'>sender</span><span class='math'>_</span><span class='math'>B</span><span class='mathgroup'>$</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>Proof</span> <span class='word'>by</span> <span class='word'>induction</span> <span class='word'>on</span> <span class='word'>any</span> <span class='word'>shortest</span> <span class='word'>path</span> <span class='mathgroup'>$</span><span class='math'>p</span><span class='mathgroup'>$</span> <span class='word'>from</span> <span class='mathgroup'>$</span><span class='math'>sender</span><span class='math'>_</span><span class='math'>B</span><span class='mathgroup'>$</span> <span class='word'>to</span> <span class='word'>another</span> <span class='word'>node</span> <span class='word'>on</span> <span class='mathgroup'>$</span><span class='math'>p</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <span class='word'>Denote</span> <span class='word'>the</span> <span class='mathgroup'>$</span><span class='math'>i</span><span class='mathgroup'>$</span><span class='cmd'>\textsuperscript</span><span class='ignore'>{</span><span class='word'>th</span><span class='ignore'>}</span> <span class='word'>node</span> <span class='word'>on</span> <span class='mathgroup'>$</span><span class='math'>p</span><span class='mathgroup'>$</span> <span class='word'>as</span> <span class='mathgroup'>$</span><span class='math'>p</span><span class='math'>_</span><span class='math'>i</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <span class='word'>Use</span> <span class='mathgroup'>$</span><span class='math'>i</span><span class='mathgroup'>$</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>induction</span> <span class='word'>variable</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>broadcast</span> <span class='word'>dispersal</span> <span class='word'>mechanism</span> <span class='word'>used</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>simulation</span> <span class='word'>delivers</span> <span class='word'>packets</span> <span class='word'>to</span> <span class='word'>every</span> <span class='word'>node</span> <span class='word'>via</span> <span class='word'>the</span> <span class='word'>shortest</span> <span class='word'>path</span> <span class='word'>from</span> <span class='word'>a</span> <span class='word'>sender</span> <span class='word'>as</span> <span class='word'>long</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>is</span> <span class='word'>static</span> <span class='word'>and</span> <span class='word'>no</span> <span class='word'>packets</span> <span class='word'>are</span> <span class='word'>lost</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>are</span> <span class='word'>guaranteed</span> <span class='word'>by</span> <span class='word'>network</span> <span class='word'>assumptions</span> <span class='word'>1</span> <span class='word'>and</span> <span class='word'>3</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>Base</span> <span class='word'>case</span><span class='ignore'>,</span> <span class='mathgroup'>$</span><span class='math'>i</span> <span class='math'>=</span> <span class='math'>1</span><span class='mathgroup'>$</span><span class='ignore'>.</span><span class='cmd'>\\</span><br>
		<span class='word'>As</span> <span class='mathgroup'>$</span><span class='math'>p</span><span class='math'>_</span><span class='math'>1</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>exactly</span> <span class='word'>one</span> <span class='word'>hop</span> <span class='word'>from</span> <span class='mathgroup'>$</span><span class='math'>sender</span><span class='math'>_</span><span class='math'>B</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='mathgroup'>$</span><span class='math'>sender</span><span class='math'>_</span><span class='math'>B</span><span class='mathgroup'>$</span> <span class='word'>must</span> <span class='word'>have</span> <span class='word'>put</span> <span class='word'>the</span> <span class='word'>packets</span> <span class='word'>onto</span> <span class='word'>the</span> <span class='word'>link</span> <span class='word'>in</span> <span class='word'>order</span> <span class='word'>by</span> <span class='word'>client</span> <span class='word'>assumption</span> <span class='word'>2</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>packets</span> <span class='word'>are</span> <span class='word'>delivered</span> <span class='word'>in</span> <span class='word'>order</span> <span class='word'>over</span> <span class='word'>any</span> <span class='word'>link</span><span class='ignore'>,</span> <span class='mathgroup'>$</span><span class='math'>p</span><span class='math'>_</span><span class='math'>1</span><span class='mathgroup'>$</span> <span class='word'>must</span> <span class='word'>receive</span> <span class='word'>the</span> <span class='word'>packets</span> <span class='word'>in</span> <span class='word'>order</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>Inductive</span> <span class='word'>case</span><span class='ignore'>,</span> <span class='mathgroup'>$</span><span class='math'>i</span> <span class='math'>=</span> <span class='math'>m</span><span class='mathgroup'>$</span><span class='ignore'>.</span><span class='cmd'>\\</span><br>
		<span class='word'>Assume</span> <span class='mathgroup'>$</span><span class='math'>p</span><span class='math'>_</span><span class='math'>m</span><span class='mathgroup'>$</span> <span class='word'>receives</span> <span class='word'>packet</span> <span class='mathgroup'>$</span><span class='math'>A</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>then</span> <span class='mathgroup'>$</span><span class='math'>B</span><span class='mathgroup'>$</span> <span class='word'>i.e</span><span class='ignore'>.</span> <span class='word'>in</span> <span class='word'>order</span><span class='ignore'>.</span> <span class='word'>By</span> <span class='word'>client</span> <span class='word'>assumption</span> <span class='word'>1</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>in</span> <span class='word'>order</span> <span class='word'>forwarding</span> <span class='ignore'>-</span><span class='ignore'>-</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>network</span> <span class='word'>assumption</span> <span class='word'>2</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>in</span> <span class='word'>order</span> <span class='word'>delivery</span> <span class='word'>on</span> <span class='word'>individual</span> <span class='word'>links</span> <span class='ignore'>-</span><span class='ignore'>-</span><span class='ignore'>,</span> <span class='word'>node</span> <span class='mathgroup'>$</span><span class='math'>p</span><span class='math'>_</span><span class='ignore'>{</span><span class='math'>m</span><span class='math'>+</span><span class='math'>1</span><span class='ignore'>}</span><span class='mathgroup'>$</span> <span class='word'>must</span> <span class='word'>receive</span> <span class='mathgroup'>$</span><span class='math'>A</span><span class='mathgroup'>$</span> <span class='word'>followed</span> <span class='word'>by</span> <span class='mathgroup'>$</span><span class='math'>B</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <span class='word'>Because</span> <span class='mathgroup'>$</span><span class='math'>p</span><span class='math'>_</span><span class='ignore'>{</span><span class='math'>m</span><span class='math'>+</span><span class='math'>1</span><span class='ignore'>}</span><span class='mathgroup'>$</span> <span class='word'>lies</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>shortest</span> <span class='word'>path</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>cannot</span> <span class='word'>have</span> <span class='word'>received</span> <span class='word'>the</span> <span class='word'>packets</span> <span class='word'>before</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>Thus</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>guarantees</span> <span class='word'>causally</span> <span class='word'>ordered</span> <span class='word'>delivery</span> <span class='word'>to</span> <span class='word'>every</span> <span class='word'>node</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>network</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
<span class='comment'>%&nbsp; \begin{proof}[Guarantee of Causal Delivery]</span><br>
<span class='comment'>%&nbsp; 	Part 1. Assume a single packet $A$ is in the network. In order to generate a second packet $B$ such that $A \rightarrow B$, a client must have received $A$, then sent a packet $B$. This process must send $A$ followed by $B$ to all neighbors by client guarantee 2. Thus causally dependent packets are guaranteed to be sent in order initially.</span><br>
	<span class='comment'>%&nbsp; </span><br>
<span class='comment'>%&nbsp; 	Part 2. Proof by contradiction.</span><br>
	<span class='comment'>%&nbsp; </span><br>
<span class='comment'>%&nbsp; 	Assume that at some point in the network, a client receives: $B$ before $A$. Also assume and that $A \rightarrow B$. By Part 1, if $A \rightarrow B$, it must initially have been that $A$ was sent before $B$. This means $B$ overtook $A$ at some point. So, one of the following must have occurred:</span><br>
	<span class='comment'>%&nbsp; </span><br>
<span class='comment'>%&nbsp; 	The packets were delivered out of order on a single link. This cannot happen by assumption 2 of the network guarantees.</span><br>
	<span class='comment'>%&nbsp; </span><br>
<span class='comment'>%&nbsp; 	$A$ was lost on a link, $B$ was delivered, and $A$ arrived on a different route. This cannot happen by assumption 3 of the network guarantees.</span><br>
	<span class='comment'>%&nbsp; </span><br>
<span class='comment'>%&nbsp; 	The topology changed between a client forwarded $A$ and $B$ such that $B$ took a faster route than $A$. This cannot happen by assumption 1 of the network guarantees.</span><br>
<span class='comment'>%&nbsp; 	</span><br>
<span class='comment'>%&nbsp; 	A client forwarded $B$ before $A$. This cannot happen by assumption 1 of the client guarantees.</span><br>
<span class='comment'>%&nbsp; 	</span><br>
<span class='comment'>%&nbsp; 	All possible ways $B$ could overtake $A$ have been contradicted. Thus, the original assumption must be false. And $B$ can never be received before $A$.</span><br>
&nbsp; 	<br>
&nbsp; 	<br>
&nbsp;  <br>
&nbsp; 	<br>
&nbsp; <br>
&nbsp; 	<span class='comment'>%Proof by contradiction. Assume a client receives some packets $A$ and $B$ and that at some prior point, it must have been the case that $A \rightarrow B$. This implies that somewhere in the network $A$ and $B$ switched order. However, on any individual link, $A$ and $B$ stay in order by network assumption 2 above. At any node, packets cannot switch order either, since the implementation immediately forwards an incoming packet to its neighbors (If a particular client generated $B$, it is put on a link after $A$ by the same condition). Lastly, because the network does not change topology and the protocol is deterministic flooding, packets do not dynamically adjust routes and so any packet that begins in order $A$, then $B$ stays in order $A$, $B$. Thus, in no case can $A$ and $B$ switch order and our assumption must be incorrect. Either $A \rightarrow B$ or it must have been the case that $A \not\rightarrow B$ to begin with. The first case proves our goal and the second is irrelevant.</span><br>
&nbsp; <span class='envir'>\end</span><span class='envir'>{proof}</span><br>
&nbsp; <br>
&nbsp; <span class='word'>That</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>is</span> <span class='word'>able</span> <span class='word'>to</span> <span class='word'>guarantee</span> <span class='word'>causal</span> <span class='word'>delivery</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>strong</span> <span class='word'>assumption</span> <span class='word'>and</span> <span class='word'>cannot</span> <span class='word'>be</span> <span class='word'>made</span> <span class='word'>in</span> <span class='word'>general</span><span class='ignore'>.</span> <span class='word'>We</span> <span class='word'>will</span> <span class='word'>see</span> <span class='word'>in</span> <span class='word'>section</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span> <span class='word'>how</span> <span class='word'>to</span> <span class='word'>relax</span> <span class='word'>network</span> <span class='word'>assumptions</span> <span class='word'>1</span> <span class='word'>and</span> <span class='word'>2</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Abstraction</span><span class='ignore'>}</span><br>
		<span class='word'>My</span> <span class='word'>network</span> <span class='word'>simulation</span> <span class='word'>is</span> <span class='word'>implemented</span> <span class='word'>in</span> <span class='word'>two</span> <span class='word'>parts</span><span class='ignore'>:</span> <span class='word'>a</span> <span class='word'>manager</span> <span class='word'>which</span> <span class='word'>is</span> <span class='word'>shared</span> <span class='word'>between</span> <span class='word'>all</span> <span class='word'>simulated</span> <span class='word'>clients</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>a</span> <span class='word'>Network</span> <span class='word'>Interface</span><span class='ignore'>,</span> <span class='word'>of</span> <span class='word'>which</span> <span class='word'>each</span> <span class='word'>client</span> <span class='word'>has</span> <span class='word'>a</span> <span class='word'>copy</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>Network</span> <span class='word'>Interface</span> <span class='word'>essentially</span> <span class='word'>emulates</span> <span class='word'>the</span> <span class='word'>top</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>classic</span> <span class='word'>network</span> <span class='word'>stack</span><span class='ignore'>,</span> <span class='word'>whereas</span> <span class='word'>the</span> <span class='word'>manager</span> <span class='word'>abstracts</span> <span class='word'>away</span> <span class='word'>the</span> <span class='word'>bottom</span> <span class='word'>layers</span><span class='ignore'>.</span> <br>
<br>
&nbsp; <span class='cmd'>\paragraph</span><span class='ignore'>{</span><span class='hword'>Network</span> <span class='hword'>Interface</span><span class='ignore'>}</span> <span class='word'>The</span> <span class='word'>essential</span> <span class='word'>parts</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>Network</span> <span class='word'>Interface</span> <span class='word'>type</span> <span class='word'>signature</span> <span class='word'>are</span> <span class='word'>shown</span> <span class='word'>below</span><span class='ignore'>.</span><br>
&nbsp; <br>
<span class='envir'>\begin</span><span class='envir'>{lstlisting}</span><span class='option'>[caption=NetworkInterface Type Signature (cleaned)]</span><br>
<span class='ignore'>interface</span><span class='ignore'> </span><span class='ignore'>NetworkInterface</span><span class='ignore'> </span><span class='ignore'>{</span><br>
<span class='ignore'>	</span><span class='ignore'>isEnabled</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>(</span><span class='ignore'>)</span><span class='ignore'> </span><span class='ignore'>=</span><span class='ignore'>&gt;</span><span class='ignore'> </span><span class='ignore'>boolean</span><span class='ignore'>;</span><br>
<span class='ignore'>	</span><span class='ignore'>enable</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>(</span><span class='ignore'>)</span><span class='ignore'> </span><span class='ignore'>=</span><span class='ignore'>&gt;</span><span class='ignore'> </span><span class='ignore'>void</span><span class='ignore'>;</span><br>
<span class='ignore'>	</span><span class='ignore'>setClientId</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>(</span><span class='ignore'>ClientId</span><span class='ignore'>)</span><span class='ignore'> </span><span class='ignore'>=</span><span class='ignore'>&gt;</span><span class='ignore'> </span><span class='ignore'>void</span><span class='ignore'>;</span><br>
<span class='ignore'>	</span><span class='ignore'>setManager</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>(</span><span class='ignore'>NetworkManager</span><span class='ignore'>)</span><span class='ignore'> </span><span class='ignore'>=</span><span class='ignore'>&gt;</span><span class='ignore'> </span><span class='ignore'>void</span><span class='ignore'>;</span><br>
<span class='ignore'>	</span><span class='ignore'>requestCRDT</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>(</span><span class='ignore'>ClientId</span><span class='ignore'>)</span><span class='ignore'> </span><span class='ignore'>=</span><span class='ignore'>&gt;</span><span class='ignore'> </span><span class='ignore'>void</span><span class='ignore'>;</span><br>
<span class='ignore'>	</span><span class='ignore'>returnCRDT</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>(</span><span class='ignore'>ClientId</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>MapCRDTStore</span><span class='ignore'>)</span><span class='ignore'> </span><span class='ignore'>=</span><span class='ignore'>&gt;</span><span class='ignore'> </span><span class='ignore'>void</span><span class='ignore'>;</span><br>
<span class='ignore'>	</span><span class='ignore'>broadcast</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>(</span><span class='ignore'>PreparedPacket</span><span class='ignore'>)</span><span class='ignore'> </span><span class='ignore'>=</span><span class='ignore'>&gt;</span><span class='ignore'> </span><span class='ignore'>void</span><span class='ignore'>;</span><br>
<span class='ignore'>	</span><span class='ignore'>receive</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>(</span><span class='ignore'>NetworkPacket</span><span class='ignore'>)</span><span class='ignore'> </span><span class='ignore'>=</span><span class='ignore'>&gt;</span><span class='ignore'> </span><span class='ignore'>void</span><span class='ignore'>;</span><br>
<span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'></span><span class='envir'>{lstlisting}</span><br>
<br>
&nbsp; <span class='word'>The</span> <span class='word'>primary</span> <span class='word'>mechanism</span> <span class='word'>for</span> <span class='word'>disseminating</span> <span class='word'>a</span> <span class='word'>packet</span> <span class='word'>to</span> <span class='word'>other</span> <span class='word'>clients</span> <span class='word'>is</span> <span class='word'>via</span> <span class='word'>the</span> <span class='cmd'>\lstinline</span><span class='ignore'>|</span><span class='word'>NetworkInterface.broadcast</span><span class='ignore'>|</span> <span class='word'>method</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>in</span> <span class='word'>turn</span> <span class='word'>calls</span> <span class='word'>the</span> <span class='cmd'>\lstinline</span><span class='ignore'>|</span><span class='word'>broadcast</span><span class='ignore'>|</span> <span class='word'>method</span> <span class='word'>of</span> <span class='word'>the</span> <span class='cmd'>\lstinline</span><span class='ignore'>|</span><span class='word'>NetworkManager</span><span class='ignore'>|</span> <span class='ignore'>(</span><span class='word'>see</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>It</span> <span class='word'>accepts</span> <span class='word'>a</span> <span class='cmd'>\lstinline</span><span class='ignore'>|</span><span class='word'>PreparedPacket</span><span class='ignore'>|</span> <span class='word'>which</span> <span class='word'>is</span> <span class='word'>an</span> <span class='word'>object</span> <span class='word'>that</span> <span class='word'>contains</span> <span class='word'>a</span> <span class='word'>bundle</span> <span class='ignore'>(</span><span class='word'>such</span> <span class='word'>as</span> <span class='cmd'>\lstinline</span><span class='ignore'>|</span><span class='word'>InsertMessage</span><span class='ignore'>|</span> <span class='word'>or</span> <span class='cmd'>\lstinline</span><span class='ignore'>|</span><span class='word'>DeleteMessage</span><span class='ignore'>|</span> <span class='word'>from</span> <span class='word'>section</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span><span class='ignore'>)</span> <span class='word'>and</span> <span class='word'>a</span> <span class='word'>tag</span> <span class='word'>which</span> <span class='word'>the</span> <span class='word'>receiver</span> <span class='word'>uses</span> <span class='word'>to</span> <span class='word'>disambiguate</span> <span class='word'>the</span> <span class='word'>type</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>incoming</span> <span class='word'>packet</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>is</span> <span class='word'>required</span> <span class='word'>since</span> <span class='word'>packets</span> <span class='word'>are</span> <span class='word'>serialized</span> <span class='word'>to</span> <span class='word'>strings</span> <span class='word'>when</span> <span class='word'>sent</span> <span class='word'>over</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>and</span> <span class='word'>all</span> <span class='word'>type</span> <span class='word'>information</span> <span class='word'>is</span> <span class='word'>lost</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>process</span><span class='ignore'>.</span><br>
<span class='envir'>\begin</span><span class='envir'>{lstlisting}</span><br>
<span class='ignore'>interface</span><span class='ignore'> </span><span class='ignore'>PreparedPacket</span><span class='ignore'> </span><span class='ignore'>{</span><br>
<span class='ignore'>	</span><span class='ignore'>type</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>"</span><span class='ignore'>i</span><span class='ignore'>"</span><span class='ignore'> </span><span class='ignore'>|</span><span class='ignore'> </span><span class='ignore'>"</span><span class='ignore'>d</span><span class='ignore'>"</span><span class='ignore'> </span><span class='ignore'>|</span><span class='ignore'> </span><span class='ignore'>"</span><span class='ignore'>reqCRDT</span><span class='ignore'>"</span><span class='ignore'> </span><span class='ignore'>|</span><span class='ignore'> </span><span class='ignore'>"</span><span class='ignore'>retCRDT</span><span class='ignore'>"</span><span class='ignore'>,</span><span class='ignore'>&nbsp; &nbsp; </span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'> </span><span class='ignore'>insert</span><span class='ignore'> </span><span class='ignore'>or</span><span class='ignore'> </span><span class='ignore'>delete</span><span class='ignore'> </span><span class='ignore'>message</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>or</span><span class='ignore'> </span><span class='ignore'>request</span><span class='ignore'> </span><span class='ignore'>CRDT</span><span class='ignore'> </span><span class='ignore'>or</span><span class='ignore'> </span><span class='ignore'>return</span><span class='ignore'> </span><span class='ignore'>CRDT</span><br>
<span class='ignore'>	</span><span class='ignore'>bundle</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>CRDTTypes.InsertMessage</span><span class='ignore'> </span><span class='ignore'>|</span><span class='ignore'> </span><span class='ignore'>CRDTTypes.DeleteMessage</span><span class='ignore'> </span><span class='ignore'>|</span><span class='ignore'> </span><span class='ignore'>RequestCRDTMessage</span><span class='ignore'> </span><span class='ignore'>|</span><span class='ignore'> </span><span class='ignore'>ReturnCRDTMessage</span><span class='ignore'>;</span><br>
<span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'></span><span class='envir'>{lstlisting}</span><br>
&nbsp; <br>
&nbsp; <span class='word'>Other</span> <span class='word'>types</span> <span class='word'>of</span> <span class='word'>bundles</span> <span class='word'>that</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>sent</span> <span class='word'>are</span> <span class='cmd'>\lstinline</span><span class='ignore'>|</span><span class='word'>RequestCRDTMessage</span><span class='ignore'>|</span> <span class='word'>and</span> <span class='cmd'>\lstinline</span><span class='ignore'>|</span><span class='word'>ReturnCRDTMessage</span><span class='ignore'>|</span><span class='ignore'>.</span> <span class='word'>These</span> <span class='word'>are</span> <span class='word'>special</span> <span class='word'>messages</span> <span class='word'>which</span> <span class='word'>clients</span> <span class='word'>use</span> <span class='word'>when</span> <span class='word'>joining</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>and</span> <span class='word'>requesting</span> <span class='word'>a</span> <span class='word'>copy</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>be</span> <span class='word'>sent</span> <span class='word'>from</span> <span class='word'>an</span> <span class='word'>active</span> <span class='word'>client</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='cmd'>\paragraph</span><span class='ignore'>{</span><span class='hword'>Joining</span> <span class='hword'>the</span> <span class='hword'>Network</span><span class='ignore'>}</span><br>
		<span class='word'>During</span> <span class='word'>the</span> <span class='word'>execution</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>simulation</span><span class='ignore'>,</span> <span class='word'>clients</span> <span class='word'>may</span> <span class='word'>join</span> <span class='word'>the</span> <span class='word'>network</span> <span class='ignore'>(</span><span class='word'>but</span> <span class='word'>not</span> <span class='word'>leave</span><span class='ignore'>)</span> <span class='word'>at</span> <span class='word'>any</span> <span class='word'>time</span><span class='ignore'>.</span> <span class='word'>Only</span> <span class='word'>the</span> <span class='word'>first</span> <span class='word'>client</span> <span class='word'>gets</span> <span class='word'>to</span> <span class='word'>create</span> <span class='word'>a</span> <span class='word'>new</span> <span class='word'>CRDT</span><span class='ignore'>.</span> <span class='word'>Any</span> <span class='word'>other</span> <span class='word'>client</span> <span class='word'>must</span> <span class='word'>request</span> <span class='word'>a</span> <span class='word'>copy</span> <span class='word'>of</span> <span class='word'>that</span> <span class='word'>CRDT</span> <span class='word'>when</span> <span class='word'>joining</span> <span class='word'>via</span> <span class='cmd'>\lstinline</span><span class='ignore'>|</span><span class='word'>RequestCRDTMessage</span><span class='ignore'>|</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>means</span> <span class='word'>that</span> <span class='word'>there</span> <span class='word'>is</span> <span class='word'>at</span> <span class='word'>least</span> <span class='word'>1</span> <span class='word'>round</span> <span class='word'>trip</span> <span class='word'>time</span> <span class='word'>before</span> <span class='word'>a</span> <span class='word'>new</span> <span class='word'>editor</span> <span class='word'>can</span> <span class='word'>come</span> <span class='word'>online</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='cmd'>\lstinline</span><span class='ignore'>|</span><span class='word'>ReturnCRDTMessage</span><span class='ignore'>|</span><span class='word'>s</span> <span class='word'>become</span> <span class='word'>quite</span> <span class='word'>large</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>the</span> <span class='word'>later</span> <span class='word'>a</span> <span class='word'>client</span> <span class='word'>joins</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>larger</span> <span class='word'>the</span> <span class='word'>CRDT</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>larger</span> <span class='word'>the</span> <span class='word'>packet</span><span class='ignore'>.</span> <span class='word'>However</span><span class='ignore'>,</span> <span class='word'>they</span> <span class='word'>would</span> <span class='word'>also</span> <span class='word'>have</span> <span class='word'>avoided</span> <span class='word'>many</span> <span class='word'>individual</span> <span class='word'>packets</span> <span class='word'>being</span> <span class='word'>delivered</span> <span class='word'>to</span> <span class='word'>them</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>meantime</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>An</span> <span class='word'>alternative</span> <span class='word'>method</span> <span class='word'>to</span> <span class='word'>requesting</span> <span class='word'>an</span> <span class='word'>up-to-date</span> <span class='word'>CRDT</span> <span class='word'>is</span> <span class='word'>to</span> <span class='word'>begin</span> <span class='word'>with</span> <span class='word'>a</span> <span class='word'>empty</span> <span class='word'>CRDT</span> <span class='word'>and</span> <span class='word'>replay</span> <span class='word'>all</span> <span class='word'>subsequent</span> <span class='word'>operations</span> <span class='word'>on</span> <span class='word'>it</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>would</span> <span class='word'>however</span> <span class='word'>be</span> <span class='word'>even</span> <span class='word'>less</span> <span class='word'>efficient</span> <span class='word'>as</span> <span class='word'>it</span> <span class='word'>would</span> <span class='word'>require</span> <span class='word'>all</span> <span class='word'>remote</span> <span class='word'>clients</span> <span class='word'>to</span> <span class='word'>store</span> <span class='word'>all</span> <span class='word'>of</span> <span class='word'>their</span> <span class='word'>previous</span> <span class='word'>operations</span> <span class='word'>forever</span> <span class='ignore'>(</span><span class='word'>or</span> <span class='word'>have</span> <span class='word'>a</span> <span class='word'>server</span> <span class='word'>store</span> <span class='word'>them</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>local</span> <span class='word'>client</span> <span class='word'>would</span> <span class='word'>have</span> <span class='word'>to</span> <span class='word'>spend</span> <span class='word'>computational</span> <span class='word'>time</span> <span class='word'>reintegrating</span> <span class='word'>all</span> <span class='word'>the</span> <span class='word'>changes</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>downside</span> <span class='word'>to</span> <span class='word'>obtaining</span> <span class='word'>an</span> <span class='word'>up</span> <span class='word'>to</span> <span class='word'>date</span> <span class='word'>copy</span> <span class='word'>is</span> <span class='word'>that</span> <span class='word'>there</span> <span class='word'>is</span> <span class='word'>no</span> <span class='word'>straightforward</span> <span class='word'>way</span> <span class='word'>to</span> <span class='word'>do</span> <span class='word'>a</span> <span class='word'>partial</span> <span class='word'>replay</span><span class='ignore'>.</span> <span class='word'>If</span> <span class='word'>a</span> <span class='word'>client</span> <span class='word'>simply</span> <span class='word'>has</span> <span class='word'>an</span> <span class='word'>out</span> <span class='word'>of</span> <span class='word'>date</span> <span class='word'>CRDT</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>must</span> <span class='word'>request</span> <span class='word'>an</span> <span class='word'>entire</span> <span class='word'>new</span> <span class='word'>copy</span> <span class='word'>as</span> <span class='word'>if</span> <span class='word'>rejoining</span> <span class='word'>the</span> <span class='word'>network</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>At</span> <span class='word'>this</span> <span class='word'>point</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>important</span> <span class='word'>to</span> <span class='word'>acknowledge</span> <span class='word'>that</span> <span class='word'>introducing</span> <span class='word'>dynamic</span> <span class='word'>network</span> <span class='word'>joining</span> <span class='word'>violates</span> <span class='word'>one</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>guarantees</span> <span class='word'>of</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span><span class='ignore'>.</span> <span class='word'>Namely</span><span class='ignore'>,</span> <span class='word'>incorporating</span> <span class='word'>new</span> <span class='word'>clients</span> <span class='word'>over</span> <span class='word'>time</span> <span class='word'>changes</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>topology</span> <span class='word'>and</span> <span class='word'>thus</span> <span class='word'>the</span> <span class='word'>guarantee</span> <span class='word'>of</span> <span class='word'>causal</span> <span class='word'>delivery</span> <span class='word'>no</span> <span class='word'>longer</span> <span class='word'>holds</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>introduction</span> <span class='word'>of</span> <span class='word'>vector</span> <span class='word'>clocks</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span> <span class='word'>will</span> <span class='word'>restore</span> <span class='word'>this</span> <span class='word'>guarantee</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='cmd'>\paragraph</span><span class='ignore'>{</span><span class='hword'>Network</span> <span class='hword'>Manager</span><span class='ignore'>}</span><br>
		<span class='word'>The</span> <span class='word'>lower</span> <span class='word'>layers</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>stack</span> <span class='word'>are</span> <span class='word'>provided</span> <span class='word'>by</span> <span class='word'>the</span> <span class='word'>Network</span> <span class='word'>Manager</span><span class='ignore'>.</span> <span class='word'>It</span> <span class='word'>has</span> <span class='word'>two</span> <span class='word'>key</span> <span class='word'>methods</span><span class='ignore'>:</span> <span class='cmd'>\lstinline</span><span class='ignore'>|</span><span class='word'>NetworkManager.transmit</span><span class='ignore'>(</span><span class='word'>sender</span><span class='ignore'>,</span> <span class='word'>packet</span><span class='ignore'>)</span><span class='ignore'>|</span> <span class='word'>and</span> <span class='cmd'>\lstinline</span><span class='ignore'>|</span><span class='word'>NetworkManager.unicast</span><span class='ignore'>(</span><span class='word'>from</span><span class='ignore'>,</span> <span class='word'>to</span><span class='ignore'>,</span> <span class='word'>packet</span><span class='ignore'>)</span><span class='ignore'>|</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>simulation</span> <span class='word'>is</span> <span class='word'>given</span> <span class='word'>a</span> <span class='word'>predefined</span> <span class='word'>topology</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>contains</span> <span class='word'>connectivity</span> <span class='word'>and</span> <span class='word'>latency</span> <span class='word'>information</span> <span class='ignore'>(</span><span class='word'>discussed</span> <span class='word'>further</span> <span class='word'>in</span> <span class='word'>section</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>Thus</span><span class='ignore'>,</span> <span class='word'>when</span> <span class='word'>a</span> <span class='word'>client's</span> <span class='cmd'>\lstinline</span><span class='ignore'>|</span><span class='word'>NetworkInterface</span><span class='ignore'>|</span> <span class='word'>calls</span> <span class='cmd'>\lstinline</span><span class='ignore'>|</span><span class='word'>NetworkManager.broadcast</span><span class='ignore'>|</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>manager</span> <span class='word'>knows</span> <span class='word'>which</span> <span class='word'>clients</span> <span class='word'>are</span> <span class='word'>neighbors</span> <span class='word'>and</span> <span class='word'>corresponding</span> <span class='word'>link</span> <span class='word'>latencies</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>can</span> <span class='word'>schedule</span> <span class='word'>a</span> <span class='word'>delivery</span> <span class='word'>event</span> <span class='word'>for</span> <span class='word'>each</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='cmd'>\lstinline</span><span class='ignore'>|</span><span class='word'>NetworkManager.unicast</span><span class='ignore'>|</span> <span class='word'>is</span> <span class='word'>used</span> <span class='word'>for</span> <span class='word'>point</span> <span class='word'>to</span> <span class='word'>point</span><span class='ignore'>,</span> <span class='word'>single</span> <span class='word'>hop</span> <span class='word'>communication</span> <span class='word'>when</span> <span class='word'>joining</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>and</span> <span class='word'>requesting</span> <span class='word'>or</span> <span class='word'>sending</span> <span class='word'>copies</span> <span class='word'>of</span> <span class='word'>CRDTs</span><span class='ignore'>.</span> <span class='word'>Overall</span><span class='ignore'>,</span> <span class='word'>this</span> <span class='word'>module</span> <span class='word'>replaces</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>and</span> <span class='word'>data</span> <span class='word'>layer</span> <span class='word'>of</span> <span class='word'>most</span> <span class='word'>network</span> <span class='word'>stacks</span> <span class='word'>and</span> <span class='word'>abstracts</span> <span class='word'>away</span> <span class='word'>how</span> <span class='word'>packets</span> <span class='word'>get</span> <span class='word'>exchanged</span> <span class='word'>between</span> <span class='word'>neighboring</span> <span class='word'>clients</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Scheduler</span><span class='ignore'>}</span><br>
		<span class='word'>Although</span> <span class='word'>this</span> <span class='word'>subsection</span> <span class='word'>falls</span> <span class='word'>under</span> <span class='word'>the</span> <span class='word'>Network</span> <span class='word'>Simulation</span> <span class='word'>section</span> <span class='word'>of</span> <span class='word'>this</span> <span class='word'>document</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>scheduler</span> <span class='word'>is</span> <span class='word'>an</span> <span class='word'>altogether</span> <span class='word'>more</span> <span class='word'>general</span> <span class='word'>driver</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>simulation</span><span class='ignore'>.</span> <span class='word'>However</span><span class='ignore'>,</span> <span class='word'>its</span> <span class='word'>main</span> <span class='word'>task</span> <span class='word'>during</span> <span class='word'>an</span> <span class='word'>experiment</span> <span class='word'>is</span> <span class='word'>to</span> <span class='word'>deliver</span> <span class='word'>packets</span> <span class='word'>between</span> <span class='word'>nodes</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>is</span> <span class='word'>why</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>listed</span> <span class='word'>here</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>A</span> <span class='word'>simulation</span> <span class='word'>scheduler</span> <span class='word'>is</span> <span class='word'>responsible</span> <span class='word'>for</span> <span class='word'>mutating</span> <span class='word'>system</span> <span class='word'>state</span><span class='ignore'>,</span> <span class='word'>based</span> <span class='word'>on</span> <span class='word'>events</span> <span class='word'>given</span> <span class='word'>to</span> <span class='word'>it</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>executed</span> <span class='word'>at</span> <span class='word'>specific</span> <span class='word'>times</span><span class='ignore'>.</span> <span class='word'>To</span> <span class='word'>schedule</span> <span class='word'>an</span> <span class='word'>event</span><span class='ignore'>,</span> <span class='word'>an</span> <span class='word'>object</span> <span class='word'>needs</span> <span class='word'>to</span> <span class='word'>call</span> <span class='word'>the</span> <span class='cmd'>\lstinline</span><span class='ignore'>|</span><span class='word'>Scheduler.addEvent</span><span class='ignore'>|</span> <span class='word'>method</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>is</span> <span class='word'>listed</span> <span class='word'>below</span><span class='ignore'>.</span><br>
<span class='envir'>\begin</span><span class='envir'>{lstlisting}</span><span class='option'>[caption=The Scheduler.addEvent method]</span><br>
<span class='ignore'>public</span><span class='ignore'> </span><span class='ignore'>addEvent</span><span class='ignore'>(</span><span class='ignore'>time</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>number</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>clock</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>number</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>action</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>any</span><span class='ignore'>)</span><span class='ignore'> </span><span class='ignore'>{</span><br>
<span class='ignore'>&nbsp; &nbsp; </span><span class='ignore'>let</span><span class='ignore'> </span><span class='ignore'>heapElem</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>DualKeyHeapElement</span><span class='ignore'> </span><span class='ignore'>=</span><span class='ignore'> </span><span class='ignore'>{</span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>pKey</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>time</span><span class='ignore'>,</span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>sKey</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>clock</span><span class='ignore'>,</span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>payload</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>action</span><br>
<span class='ignore'>&nbsp; &nbsp; </span><span class='ignore'>}</span><span class='ignore'>;</span><br>
<span class='ignore'>&nbsp; &nbsp; </span><span class='ignore'>this.heap.insert</span><span class='ignore'>(</span><span class='ignore'>heapElem</span><span class='ignore'>)</span><span class='ignore'>;</span><br>
<span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'></span><span class='envir'>{lstlisting}</span><br>
<br>
&nbsp; <span class='word'>My</span> <span class='word'>scheduler</span> <span class='word'>is</span> <span class='word'>somewhat</span> <span class='word'>more</span> <span class='word'>sophisticated</span> <span class='word'>than</span> <span class='word'>might</span> <span class='word'>be</span> <span class='word'>expected</span> <span class='word'>in</span> <span class='word'>that</span> <span class='word'>it</span> <span class='word'>takes</span> <span class='word'>two</span> <span class='word'>keys</span> <span class='word'>for</span> <span class='word'>scheduling</span><span class='ignore'>:</span> <span class='word'>a</span> <span class='word'>primary</span> <span class='word'>key</span> <span class='mathgroup'>$</span><span class='math'>pKey</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>a</span> <span class='word'>secondary</span> <span class='word'>key</span> <span class='mathgroup'>$</span><span class='math'>sKey</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>need</span> <span class='word'>for</span> <span class='word'>this</span> <span class='word'>arose</span> <span class='word'>when</span> <span class='word'>submitting</span> <span class='word'>multiple</span> <span class='word'>packets</span> <span class='word'>from</span> <span class='word'>a</span> <span class='word'>single</span> <span class='word'>client</span> <span class='word'>at</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>time</span> <span class='ignore'>-</span> <span class='word'>the</span> <span class='word'>original</span> <span class='word'>underlying</span> <span class='word'>data</span> <span class='word'>structure</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>heap</span> <span class='word'>with</span> <span class='word'>a</span> <span class='word'>single</span> <span class='word'>key</span><span class='ignore'>,</span> <span class='word'>makes</span> <span class='word'>no</span> <span class='word'>first-in</span> <span class='word'>first-out</span> <span class='word'>assurances</span><span class='ignore'>.</span> <span class='word'>Thus</span><span class='ignore'>,</span> <span class='word'>packets</span> <span class='word'>on</span> <span class='word'>a</span> <span class='word'>link</span> <span class='word'>could</span> <span class='word'>arrive</span> <span class='word'>out</span> <span class='word'>of</span> <span class='word'>order</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>violated</span> <span class='word'>one</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>guarantees</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>has</span> <span class='word'>to</span> <span class='word'>provide</span> <span class='ignore'>[</span><span class='word'>reference</span> <span class='word'>needed</span><span class='ignore'>]</span><span class='ignore'>.</span> <span class='word'>To</span> <span class='word'>fix</span> <span class='word'>this</span><span class='ignore'>,</span> <span class='word'>my</span> <span class='word'>scheduler</span> <span class='word'>breaks</span> <span class='word'>ties</span> <span class='word'>using</span> <span class='mathgroup'>$</span><span class='math'>sKey</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>monotonically</span> <span class='word'>increasing</span> <span class='word'>counter</span> <span class='word'>provided</span> <span class='word'>by</span> <span class='word'>the</span> <span class='word'>caller</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>The</span> <span class='word'>key</span> <span class='word'>property</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>correct</span> <span class='word'>scheduler</span><span class='ignore'>,</span> <span class='word'>as</span> <span class='word'>noted</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>Part</span> <span class='word'>II</span> <span class='word'>Computer</span> <span class='word'>Systems</span> <span class='word'>Modeling</span> <span class='cmd'>\cite</span><span class='optparm'>[</span><span class='word'>slide</span> <span class='word'>120</span><span class='optparm'>]</span><span class='ignore'>{</span><span class='ignore'>compsysmodeling</span><span class='ignore'>}</span> <span class='word'>course</span><span class='ignore'>,</span> <span class='word'>is</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>next</span> <span class='word'>executed</span> <span class='word'>event</span> <span class='word'>be</span> <span class='word'>the</span> <span class='word'>one</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>least</span> <span class='word'>remaining</span> <span class='word'>time</span><span class='ignore'>.</span> <span class='word'>To</span> <span class='word'>do</span> <span class='word'>this</span> <span class='word'>efficiently</span><span class='ignore'>,</span> <span class='word'>I</span> <span class='word'>implemented</span> <span class='word'>a</span> <span class='word'>heap</span> <span class='word'>that</span> <span class='word'>orders</span> <span class='word'>elements</span> <span class='word'>based</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>two</span> <span class='word'>keys</span> <span class='word'>discussed</span> <span class='word'>above</span><span class='ignore'>.</span> <span class='word'>Using</span> <span class='word'>a</span> <span class='word'>heap</span><span class='ignore'>,</span> <span class='word'>we</span> <span class='word'>get</span> <span class='mathgroup'>$</span><span class='math'>\Theta </span><span class='math'>(</span><span class='math'>log</span><span class='math'>(</span><span class='math'>n</span><span class='math'>)</span><span class='math'>)</span><span class='mathgroup'>$</span> <span class='word'>retrieval</span> <span class='word'>per</span> <span class='word'>element</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>When</span> <span class='word'>the</span> <span class='word'>simulation</span> <span class='word'>is</span> <span class='word'>running</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>scheduler</span> <span class='word'>removes</span> <span class='word'>the</span> <span class='word'>top</span> <span class='word'>event</span> <span class='mathgroup'>$</span><span class='math'>E</span><span class='mathgroup'>$</span> <span class='word'>off</span> <span class='word'>the</span> <span class='word'>heap</span><span class='ignore'>,</span> <span class='word'>decreases</span> <span class='word'>all</span> <span class='word'>remaining</span> <span class='word'>events</span><span class='ignore'>'</span> <span class='word'>primary</span> <span class='word'>keys</span> <span class='word'>by</span> <span class='mathgroup'>$</span><span class='math'>E.pKey</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>executes</span> <span class='mathgroup'>$</span><span class='math'>E.payload</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>may</span> <span class='word'>in</span> <span class='word'>turn</span> <span class='word'>generate</span> <span class='word'>more</span> <span class='word'>events</span> <span class='word'>which</span> <span class='word'>are</span> <span class='word'>added</span> <span class='word'>back</span> <span class='word'>into</span> <span class='word'>the</span> <span class='word'>heap</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>scheduler</span> <span class='word'>continues</span> <span class='word'>this</span> <span class='word'>until</span> <span class='word'>paused</span> <span class='word'>or</span> <span class='word'>the</span> <span class='word'>event</span> <span class='word'>queue</span> <span class='word'>is</span> <span class='word'>empty</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>Because</span> <span class='word'>the</span> <span class='word'>simulation</span> <span class='word'>needs</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>seeded</span> <span class='word'>with</span> <span class='word'>events</span> <span class='word'>and</span> <span class='word'>simulated</span> <span class='word'>action</span> <span class='word'>in</span> <span class='word'>order</span> <span class='word'>to</span> <span class='word'>do</span> <span class='word'>anything</span> <span class='word'>useful</span><span class='ignore'>,</span> <span class='word'>before</span> <span class='word'>letting</span> <span class='word'>the</span> <span class='word'>execution</span> <span class='word'>begin</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>scheduler</span> <span class='word'>is</span> <span class='word'>also</span> <span class='word'>used</span> <span class='word'>to</span> <span class='word'>add</span> <span class='word'>a</span> <span class='word'>set</span> <span class='word'>of</span> <span class='word'>mock</span> <span class='word'>insert</span> <span class='word'>and</span> <span class='word'>delete</span> <span class='word'>events</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>together</span> <span class='word'>constitute</span> <span class='word'>an</span> <span class='word'>experiment</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>is</span> <span class='word'>discussed</span> <span class='word'>in</span> <span class='word'>more</span> <span class='word'>detail</span> <span class='word'>in</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span><span class='ignore'>.</span> <span class='word'>Once</span> <span class='word'>running</span><span class='ignore'>,</span> <span class='word'>its</span> <span class='word'>primary</span> <span class='word'>use</span> <span class='word'>is</span> <span class='word'>delivering</span> <span class='word'>packets</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='cmd'>\paragraph</span><span class='ignore'>{</span><span class='hword'>Time</span><span class='ignore'>}</span><br>
		<span class='word'>The</span> <span class='word'>concept</span> <span class='word'>of</span> <span class='word'>time</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>simulation</span> <span class='word'>is</span> <span class='word'>generally</span> <span class='word'>taken</span> <span class='word'>to</span> <span class='word'>be</span> <span class='ignore'>`</span><span class='ignore'>`</span><span class='word'>logical</span> <span class='word'>time</span><span class='ignore'>'</span><span class='ignore'>'</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>system</span> <span class='word'>begins</span> <span class='word'>in</span> <span class='mathgroup'>$</span><span class='math'>t</span> <span class='math'>=</span> <span class='math'>0</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>each</span> <span class='word'>subsequent</span> <span class='word'>event</span> <span class='word'>moves</span> <span class='word'>the</span> <span class='mathgroup'>$</span><span class='math'>t</span><span class='mathgroup'>$</span> <span class='word'>variable</span> <span class='word'>forward</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>works</span> <span class='word'>perfectly</span> <span class='word'>well</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>CRDT-based</span> <span class='word'>system</span><span class='ignore'>,</span> <span class='word'>since</span> <span class='word'>the</span> <span class='word'>latency</span> <span class='word'>on</span> <span class='word'>any</span> <span class='word'>individual</span> <span class='word'>network</span> <span class='word'>link</span> <span class='word'>is</span> <span class='word'>well</span> <span class='word'>defined</span> <span class='word'>and</span> <span class='word'>known</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>The</span> <span class='word'>alternative</span> <span class='ignore'>`</span><span class='word'>time</span><span class='ignore'>'</span> <span class='word'>that</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>used</span> <span class='word'>is</span> <span class='word'>real</span> <span class='word'>time</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>amount</span> <span class='word'>of</span> <span class='word'>time</span> <span class='word'>until</span> <span class='word'>some</span> <span class='word'>next</span> <span class='word'>event</span> <span class='word'>is</span> <span class='word'>given</span> <span class='word'>in</span> <span class='word'>milliseconds</span> <span class='word'>to</span> <span class='word'>wait</span><span class='ignore'>,</span> <span class='word'>rather</span> <span class='word'>than</span> <span class='word'>a</span> <span class='word'>logical</span> <span class='word'>delta</span> <span class='word'>which</span> <span class='word'>is</span> <span class='word'>skipped</span> <span class='word'>over</span><span class='ignore'>.</span> <span class='word'>Using</span> <span class='word'>this</span> <span class='word'>concept</span> <span class='word'>of</span> <span class='word'>time</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>simulation</span> <span class='word'>introduces</span> <span class='word'>extra</span> <span class='word'>complexity</span><span class='ignore'>,</span> <span class='word'>primarily</span> <span class='word'>stemming</span> <span class='word'>from</span> <span class='word'>inaccuracy</span> <span class='word'>in</span> <span class='word'>timers</span> <span class='word'>provided</span> <span class='word'>by</span> <span class='word'>the</span> <span class='word'>host</span> <span class='word'>platform</span><span class='ignore'>.</span> <span class='word'>Indeed</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>likely</span> <span class='word'>that</span> <span class='word'>some</span> <span class='word'>events</span> <span class='word'>will</span> <span class='word'>have</span> <span class='word'>very</span> <span class='word'>small</span> <span class='word'>deltas</span><span class='ignore'>,</span> <span class='word'>for</span> <span class='word'>which</span> <span class='word'>starting</span> <span class='word'>and</span> <span class='word'>stopping</span> <span class='word'>a</span> <span class='word'>timer</span> <span class='word'>would</span> <span class='word'>be</span> <span class='word'>impossible</span><span class='ignore'>.</span> <span class='word'>To</span> <span class='word'>handle</span> <span class='word'>this</span> <span class='word'>difficulty</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>scheduler</span> <span class='word'>runs</span><span class='ignore'>,</span> <span class='word'>in</span> <span class='word'>order</span><span class='ignore'>,</span> <span class='word'>all</span> <span class='word'>ready</span> <span class='word'>events</span> <span class='word'>whenever</span> <span class='word'>it</span> <span class='word'>wakes</span> <span class='word'>up</span> <span class='word'>rather</span> <span class='word'>than</span> <span class='word'>just</span> <span class='word'>one</span> <span class='word'>at</span> <span class='word'>a</span> <span class='word'>time</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>In</span> <span class='word'>this</span> <span class='word'>project</span><span class='ignore'>,</span> <span class='word'>I</span> <span class='word'>implemented</span> <span class='word'>both</span> <span class='word'>an</span> <span class='word'>event-driven</span> <span class='word'>scheduler</span> <span class='word'>and</span> <span class='word'>a</span> <span class='word'>timer-driven</span> <span class='word'>scheduler</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>timer-driven</span> <span class='word'>version</span> <span class='word'>is</span> <span class='word'>useful</span> <span class='word'>when</span> <span class='word'>debugging</span> <span class='word'>and</span> <span class='word'>watching</span> <span class='word'>the</span> <span class='word'>simulation</span> <span class='word'>unfold</span> <span class='word'>in</span> <span class='word'>real</span> <span class='word'>time</span><span class='ignore'>,</span> <span class='word'>whereas</span> <span class='word'>the</span> <span class='word'>event-driven</span> <span class='word'>version</span> <span class='word'>runs</span> <span class='word'>as</span> <span class='word'>fast</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>hardware</span> <span class='word'>lets</span> <span class='word'>it</span><span class='ignore'>.</span> <span class='word'>However</span><span class='ignore'>,</span> <span class='word'>I</span> <span class='word'>found</span> <span class='word'>that</span> <span class='word'>I</span> <span class='word'>could</span><span class='ignore'>,</span> <span class='word'>to</span> <span class='word'>an</span> <span class='word'>extent</span><span class='ignore'>,</span> <span class='word'>emulate</span> <span class='word'>the</span> <span class='word'>timer-driven</span> <span class='word'>scheduler</span> <span class='word'>using</span> <span class='word'>the</span> <span class='word'>event-driven</span> <span class='word'>scheduler</span> <span class='word'>by</span> <span class='word'>adding</span> <span class='word'>a</span> <span class='word'>sleep</span> <span class='word'>proportional</span> <span class='word'>to</span> <span class='word'>the</span> <span class='mathgroup'>$</span><span class='math'>\Delta t</span><span class='mathgroup'>$</span> <span class='word'>until</span> <span class='word'>the</span> <span class='word'>next</span> <span class='word'>event</span><span class='ignore'>.</span> <span class='word'>As</span> <span class='word'>the</span> <span class='word'>event-driven</span> <span class='word'>version</span> <span class='word'>is</span> <span class='word'>more</span> <span class='word'>flexible</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>simpler</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>the</span> <span class='word'>driver</span> <span class='word'>is</span> <span class='word'>simple</span> <span class='word'>while</span> <span class='word'>loop</span><span class='ignore'>,</span> <span class='word'>rather</span> <span class='word'>than</span> <span class='word'>recursively</span> <span class='word'>set</span> <span class='word'>timers</span> <span class='word'>with</span> <span class='word'>callbacks</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>I</span> <span class='word'>decided</span> <span class='word'>to</span> <span class='word'>use</span> <span class='word'>it</span> <span class='word'>when</span> <span class='word'>executing</span> <span class='word'>experiments</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>CRDT-based</span> <span class='word'>system</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>Luckily</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>timer-driven</span> <span class='word'>scheduler</span> <span class='word'>is</span> <span class='word'>useful</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>comparative</span> <span class='word'>system</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>it</span><span class='ignore'>,</span> <span class='word'>packets</span> <span class='word'>are</span> <span class='word'>actually</span> <span class='word'>delivered</span> <span class='word'>via</span> <span class='word'>sockets</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>operating</span> <span class='word'>system</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>means</span> <span class='word'>that</span> <span class='word'>logical</span> <span class='word'>time</span> <span class='word'>can</span> <span class='word'>no</span> <span class='word'>longer</span> <span class='word'>be</span> <span class='word'>used</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>is</span> <span class='word'>discussed</span> <span class='word'>further</span> <span class='word'>in</span> <span class='word'>section</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Causal</span> <span class='hword'>Delivery</span><span class='ignore'>}</span><br>
		<span class='word'>Until</span> <span class='word'>this</span> <span class='word'>point</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>has</span> <span class='word'>guaranteed</span> <span class='word'>causal</span> <span class='word'>delivery</span> <span class='word'>of</span> <span class='word'>packets</span> <span class='word'>based</span> <span class='word'>on</span> <span class='word'>very</span> <span class='word'>strong</span> <span class='word'>assumptions</span> <span class='word'>and</span> <span class='word'>knowledge</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>system</span> <span class='word'>implementation</span> <span class='ignore'>[</span><span class='word'>reference</span> <span class='word'>needed</span><span class='ignore'>]</span><span class='ignore'>.</span> <span class='word'>We</span> <span class='word'>can</span> <span class='word'>relax</span> <span class='word'>these</span> <span class='word'>to</span> <span class='word'>allow</span> <span class='word'>out</span> <span class='word'>of</span> <span class='word'>order</span> <span class='word'>delivery</span> <span class='word'>and</span> <span class='word'>a</span> <span class='word'>changing</span> <span class='word'>network</span> <span class='word'>topology</span> <span class='word'>without</span> <span class='word'>a</span> <span class='word'>specific</span> <span class='word'>implementation</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>done</span> <span class='word'>by</span> <span class='word'>ensuring</span> <span class='word'>causal</span> <span class='word'>delivery</span> <span class='word'>using</span> <span class='word'>vector</span> <span class='word'>clocks</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>fidge1987</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>In</span> <span class='word'>addition</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>two</span> <span class='word'>part</span> <span class='word'>network</span> <span class='word'>stack</span><span class='ignore'>,</span> <span class='word'>there</span> <span class='word'>is</span> <span class='word'>now</span> <span class='word'>an</span> <span class='word'>additional</span> <span class='word'>layer</span> <span class='word'>between</span> <span class='word'>a</span> <span class='word'>client</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>interface</span><span class='ignore'>.</span> <span class='word'>We</span> <span class='word'>make</span> <span class='word'>a</span> <span class='word'>distinction</span> <span class='word'>between</span> <span class='word'>receiving</span> <span class='word'>and</span> <span class='word'>delivering</span> <span class='word'>a</span> <span class='word'>message</span><span class='ignore'>.</span> <span class='word'>Receiving</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>arrival</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>message</span> <span class='word'>at</span> <span class='word'>a</span> <span class='word'>client</span><span class='ignore'>,</span> <span class='word'>whereas</span> <span class='word'>delivery</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>step</span> <span class='word'>of</span> <span class='word'>passing</span> <span class='word'>the</span> <span class='word'>message</span> <span class='word'>from</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>stack</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>application</span> <span class='word'>itself</span><span class='ignore'>.</span> <span class='word'>Causal</span> <span class='word'>delivery</span> <span class='word'>guarantees</span> <span class='word'>that</span> <span class='word'>messages</span> <span class='word'>are</span> <span class='word'>delivered</span> <span class='word'>such</span> <span class='word'>that</span> <span class='mathgroup'>$</span><span class='math'>A</span> <span class='mathcmd'>\rightarrow</span> <span class='math'>B</span> <span class='mathcmd'>\Rightarrow</span><span class='mathcmd'>\ </span><span class='math'>deliver</span><span class='math'>(</span><span class='math'>A</span><span class='math'>)</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='mathgroup'>$</span><span class='math'>deliver</span><span class='math'>(</span><span class='math'>B</span><span class='math'>)</span><span class='mathgroup'>$</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; &nbsp; <br>
	<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
	<span class='exclcmd'>\centering</span><br>
	<span class='exclcmd'>\includegraphics</span><span class='option'>[width=1\linewidth]</span><span class='ignore'>{</span><span class='ignore'>figs</span><span class='ignore'>/</span><span class='ignore'>causal</span><span class='ignore'>_</span><span class='ignore'>arch.eps</span><span class='ignore'>}</span><br>
	<span class='cmd'>\caption</span><span class='option'>[Ensuring Causal Delivery]</span><span class='ignore'>{</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>causal</span><span class='ignore'>}</span><br>
	<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
&nbsp; <br>
&nbsp; <span class='cmd'>\paragraph</span><span class='ignore'>{</span><span class='hword'>Vector</span> <span class='hword'>Clocks</span><span class='ignore'>}</span><br>
		<span class='word'>A</span> <span class='word'>vector</span> <span class='word'>clock</span> <span class='word'>is</span> <span class='word'>an</span> <span class='word'>list</span> <span class='word'>of</span> <span class='word'>sequence</span> <span class='word'>numbers</span><span class='ignore'>,</span> <span class='word'>one</span> <span class='word'>per</span> <span class='word'>distributed</span> <span class='word'>process</span><span class='ignore'>.</span> <span class='word'>At</span> <span class='word'>the</span> <span class='word'>time</span> <span class='word'>the</span> <span class='word'>system</span> <span class='word'>is</span> <span class='word'>initialized</span><span class='ignore'>,</span> <span class='word'>all</span> <span class='word'>clients</span> <span class='word'>have</span> <span class='word'>a</span> <span class='word'>vector</span> <span class='word'>of</span> <span class='word'>zeros</span><span class='ignore'>.</span> <span class='word'>According</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>original</span> <span class='word'>paper</span> <span class='word'>by</span> <span class='word'>Fidge</span><span class='ignore'>,</span> <span class='word'>there</span> <span class='word'>are</span> <span class='word'>5</span> <span class='word'>rules</span> <span class='word'>for</span> <span class='word'>updating</span> <span class='word'>which</span> <span class='word'>ensure</span> <span class='word'>that</span> <span class='word'>causal</span> <span class='word'>order</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>determined</span> <span class='word'>by</span> <span class='word'>comparing</span> <span class='word'>vectors</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>specifics</span> <span class='word'>of</span> <span class='word'>vector</span> <span class='word'>clocks</span> <span class='word'>are</span> <span class='word'>outlined</span> <span class='word'>in</span> <span class='word'>Appendix</span><span class='ignore'>~</span><span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>appendix</span><span class='ignore'>:</span><span class='ignore'>vectorclocks</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>properties</span> <span class='word'>of</span> <span class='word'>vector</span> <span class='word'>clocks</span> <span class='word'>guarantee</span> <span class='word'>that</span> <span class='mathgroup'>\[</span> <span class='math'>A</span> <span class='mathcmd'>\rightarrow</span> <span class='math'>B</span><span class='mathcmd'>\ </span><span class='mathcmd'>\Leftrightarrow</span> <span class='math'>Vector</span><span class='math'>(</span><span class='math'>A</span><span class='math'>)</span> <span class='math'>&lt;</span> <span class='math'>Vector</span><span class='math'>(</span><span class='math'>B</span><span class='math'>)</span><span class='mathgroup'>\]</span> <span class='word'>where</span> <span class='mathgroup'>$</span><span class='math'>&lt;</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>defined</span> <span class='word'>to</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>appendix</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>Fidge's</span> <span class='word'>nth</span><span class='ignore'>[</span><span class='word'>TODO</span><span class='ignore'>]</span> <span class='word'>rule</span> <span class='word'>indicates</span> <span class='word'>that</span> <span class='word'>a</span> <span class='word'>receiver</span> <span class='word'>should</span> <span class='word'>increment</span> <span class='word'>its</span> <span class='word'>own</span> <span class='word'>local</span> <span class='word'>clock</span> <span class='word'>value</span> <span class='word'>on</span> <span class='word'>receipt</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>message</span><span class='ignore'>,</span> <span class='word'>as</span> <span class='word'>well</span> <span class='word'>as</span> <span class='word'>on</span> <span class='word'>sending</span> <span class='word'>its</span> <span class='word'>own</span> <span class='word'>messages</span><span class='ignore'>.</span> <span class='word'>While</span> <span class='word'>this</span> <span class='word'>rule</span> <span class='word'>makes</span> <span class='word'>it</span> <span class='word'>easy</span> <span class='word'>to</span> <span class='word'>determine</span> <span class='word'>whether</span> <span class='word'>a</span> <span class='word'>message</span> <span class='word'>comes</span> <span class='word'>before</span> <span class='word'>or</span> <span class='word'>after</span> <span class='word'>or</span> <span class='word'>occurred</span> <span class='word'>concurrently</span> <span class='word'>with</span> <span class='word'>another</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>not</span> <span class='word'>so</span> <span class='word'>straightforward</span> <span class='word'>to</span> <span class='word'>determine</span><span class='ignore'>,</span> <span class='word'>for</span> <span class='word'>instance</span><span class='ignore'>,</span> <span class='word'>if</span> <span class='word'>a</span> <span class='word'>message</span> <span class='word'>overtook</span> <span class='word'>another</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>link</span><span class='ignore'>,</span> <span class='word'>or</span> <span class='word'>how</span> <span class='word'>many</span> <span class='word'>messages</span> <span class='word'>occurred</span> <span class='word'>between</span> <span class='word'>two</span> <span class='word'>given</span> <span class='word'>vectors</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='cmd'>\paragraph</span><span class='ignore'>{</span><span class='hword'>Modified</span> <span class='hword'>Vector</span> <span class='hword'>Clocks</span><span class='ignore'>}</span><br>
		<span class='word'>Causal</span> <span class='word'>delivery</span> <span class='word'>layers</span> <span class='word'>delay</span> <span class='word'>messages</span> <span class='word'>that</span> <span class='word'>arrive</span> <span class='word'>before</span> <span class='word'>all</span> <span class='word'>of</span> <span class='word'>their</span> <span class='word'>causal</span> <span class='word'>dependencies</span> <span class='word'>are</span> <span class='word'>delivered</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>requires</span> <span class='word'>calculating</span> <span class='word'>exactly</span> <span class='word'>which</span> <span class='word'>messages</span> <span class='word'>are</span> <span class='word'>missing</span><span class='ignore'>,</span> <span class='word'>before</span> <span class='word'>a</span> <span class='word'>delayed</span> <span class='word'>message</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>passed</span> <span class='word'>from</span> <span class='word'>the</span> <span class='word'>buffer</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>client</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>To</span> <span class='word'>do</span> <span class='word'>this</span> <span class='word'>simply</span><span class='ignore'>,</span> <span class='word'>I</span> <span class='word'>modified</span> <span class='word'>the</span> <span class='word'>rule</span> <span class='word'>of</span> <span class='word'>incrementing</span> <span class='word'>local</span> <span class='word'>clocks</span> <span class='word'>on</span> <span class='word'>receipt</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>only</span> <span class='word'>increment</span> <span class='word'>locally</span> <span class='word'>whenever</span> <span class='word'>a</span> <span class='word'>message</span> <span class='word'>is</span> <span class='word'>generated</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>way</span><span class='ignore'>,</span> <span class='word'>each</span> <span class='word'>value</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>vector</span> <span class='word'>represents</span> <span class='word'>exactly</span> <span class='word'>how</span> <span class='word'>many</span> <span class='word'>messages</span> <span class='word'>have</span> <span class='word'>been</span> <span class='word'>sent</span> <span class='word'>by</span> <span class='word'>the</span> <span class='word'>corresponding</span> <span class='word'>client</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>avoids</span> <span class='word'>conflating</span> <span class='ignore'>`</span><span class='word'>how</span> <span class='word'>many</span> <span class='word'>messages</span> <span class='word'>this</span> <span class='word'>client</span> <span class='word'>has</span> <span class='word'>seen</span><span class='ignore'>'</span> <span class='word'>with</span> <span class='ignore'>`</span><span class='word'>how</span> <span class='word'>many</span> <span class='word'>messages</span> <span class='word'>this</span> <span class='word'>client</span> <span class='word'>has</span> <span class='word'>generated</span><span class='ignore'>'</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>We</span> <span class='word'>can</span> <span class='word'>now</span> <span class='word'>determine</span> <span class='word'>concurrent</span><span class='ignore'>,</span> <span class='word'>causally</span> <span class='word'>dependent</span> <span class='word'>and</span> <span class='word'>causally</span> <span class='word'>prior</span> <span class='word'>messages</span> <span class='word'>by</span> <span class='word'>comparing</span> <span class='word'>vectors</span><span class='ignore'>.</span> <span class='word'>We</span> <span class='word'>define</span> <span class='word'>the</span> <span class='word'>latter</span> <span class='word'>two</span> <span class='word'>about</span> <span class='mathgroup'>$</span><span class='math'>&lt;</span><span class='mathgroup'>$</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>Concurrent</span><span class='ignore'>.</span> <span class='word'>Given</span> <span class='word'>two</span> <span class='word'>vectors</span> <span class='mathgroup'>$</span><span class='math'>v1</span><span class='mathgroup'>$</span> <span class='word'>and</span> <span class='mathgroup'>$</span><span class='math'>v2</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>they</span> <span class='word'>occurred</span> <span class='word'>concurrently</span> <span class='word'>iff</span> <span class='mathgroup'>\[</span><span class='mathcmd'>\exists</span> <span class='math'>c</span><span class='math'>,</span><span class='math'>c</span><span class='math'>'</span> <span class='mathcmd'>\in</span> <span class='math'>v1</span><span class='math'>,</span><span class='mathcmd'>\ </span><span class='math'>v2</span><span class='math'>.</span><span class='mathcmd'>\ </span><span class='math'>v1.c</span> <span class='math'>&gt;</span> <span class='math'>v2.c</span><span class='mathcmd'>\ </span><span class='mathcmd'>\land</span><span class='mathcmd'>\ </span><span class='math'>v1.c</span><span class='math'>'</span> <span class='math'>&gt;</span> <span class='math'>v2.c</span><span class='math'>'</span><span class='mathgroup'>\]</span><br>
&nbsp; <br>
&nbsp; <span class='word'>Causally</span> <span class='word'>Dependent</span> <span class='word'>and</span> <span class='word'>Causally</span> <span class='word'>Prior</span><span class='ignore'>.</span> <span class='word'>Given</span> <span class='word'>vectors</span> <span class='mathgroup'>$</span><span class='math'>v1</span><span class='mathgroup'>$</span> <span class='word'>and</span> <span class='mathgroup'>$</span><span class='math'>v2</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='mathgroup'>\[</span><span class='math'>v1</span><span class='mathcmd'>\ </span><span class='math'>&lt;</span><span class='mathcmd'>\ </span><span class='math'>v2</span> <span class='mathcmd'>\iff</span><span class='mathcmd'>\ </span><span class='mathcmd'>\forall</span> <span class='math'>c</span> <span class='mathcmd'>\in</span> <span class='math'>v1</span><span class='math'>,</span> <span class='math'>v2</span><span class='math'>.</span><span class='mathcmd'>\ </span><span class='math'>v1.c</span> <span class='mathcmd'>\leq</span> <span class='math'>v2.c</span><span class='mathcmd'>\ </span><span class='mathcmd'>\land</span><span class='mathcmd'>\ </span><span class='mathcmd'>\exists</span> <span class='math'>c</span><span class='math'>'</span> <span class='mathcmd'>\in</span> <span class='math'>v1</span><span class='math'>,</span> <span class='math'>v2</span><span class='math'>.</span><span class='mathcmd'>\ </span><span class='math'>v1.c</span><span class='math'>'</span> <span class='math'>&lt;</span> <span class='math'>v2.c</span><span class='math'>'</span><span class='mathgroup'>\]</span><br>
&nbsp; <span class='word'>In</span> <span class='word'>this</span> <span class='word'>definition</span><span class='ignore'>,</span> <span class='mathgroup'>$</span><span class='math'>v2</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>causally</span> <span class='word'>dependent</span> <span class='word'>on</span> <span class='mathgroup'>$</span><span class='math'>v1</span><span class='mathgroup'>$</span> <span class='word'>and</span> <span class='mathgroup'>$</span><span class='math'>v1</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>causally</span> <span class='word'>prior</span> <span class='word'>to</span> <span class='mathgroup'>$</span><span class='math'>v2</span><span class='mathgroup'>$</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>If</span> <span class='word'>a</span> <span class='word'>client</span> <span class='word'>receives</span> <span class='word'>a</span> <span class='word'>vector</span> <span class='mathgroup'>$</span><span class='math'>v</span><span class='mathgroup'>$</span> <span class='word'>that</span> <span class='word'>is</span> <span class='word'>concurrent</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>client's</span> <span class='word'>current</span> <span class='word'>vector</span> <span class='mathgroup'>$</span><span class='math'>s</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>causal</span> <span class='word'>network</span> <span class='word'>layer</span> <span class='word'>immediately</span> <span class='word'>delivers</span> <span class='word'>the</span> <span class='word'>message</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>client</span><span class='ignore'>.</span> <span class='word'>If</span> <span class='mathgroup'>$</span><span class='math'>v</span> <span class='math'>&lt;</span> <span class='math'>s</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>then</span> <span class='word'>the</span> <span class='word'>message</span> <span class='word'>has</span> <span class='word'>been</span> <span class='word'>seen</span> <span class='word'>before</span> <span class='word'>and</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>discarded</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>the</span> <span class='word'>case</span> <span class='word'>that</span> <span class='mathgroup'>$</span><span class='math'>s</span> <span class='math'>&lt;</span> <span class='math'>v</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>Delta</span> <span class='word'>Vector</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>computed</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>A</span> <span class='word'>Delta</span> <span class='word'>Vector</span> <span class='mathgroup'>$</span><span class='math'>dv</span><span class='mathgroup'>$</span> <span class='word'>between</span> <span class='mathgroup'>$</span><span class='math'>v1</span><span class='mathgroup'>$</span> <span class='word'>and</span> <span class='mathgroup'>$</span><span class='math'>v2</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>their</span> <span class='word'>element-wise</span> <span class='word'>difference</span><span class='ignore'>.</span> <span class='word'>If</span> <span class='word'>the</span> <span class='word'>sizes</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>vectors</span> <span class='word'>mismatch</span><span class='ignore'>,</span> <span class='word'>treat</span> <span class='word'>the</span> <span class='word'>missing</span> <span class='word'>vector</span> <span class='word'>elements</span> <span class='word'>as</span> <span class='word'>being</span> <span class='word'>equal</span> <span class='word'>to</span> <span class='word'>0</span><span class='ignore'>.</span> <span class='word'>Delta</span> <span class='word'>vectors</span> <span class='word'>are</span> <span class='word'>useful</span> <span class='word'>for</span> <span class='word'>delivering</span> <span class='word'>messages</span> <span class='word'>efficiently</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <span class='cmd'>\paragraph</span><span class='ignore'>{</span><span class='hword'>Efficient</span> <span class='hword'>Delivery</span><span class='ignore'>}</span><br>
		<span class='word'>The</span> <span class='word'>causal</span> <span class='word'>delivery</span> <span class='word'>middleware</span> <span class='word'>must</span> <span class='word'>buffer</span> <span class='word'>all</span> <span class='word'>messages</span> <span class='word'>with</span> <span class='word'>dependencies</span> <span class='word'>that</span> <span class='word'>have</span> <span class='word'>not</span> <span class='word'>arrived</span> <span class='word'>yet</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>means</span><span class='ignore'>,</span> <span class='word'>that</span> <span class='word'>on</span> <span class='word'>each</span> <span class='word'>new</span> <span class='word'>message</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>buffer</span> <span class='word'>must</span> <span class='word'>be</span> <span class='word'>searched</span> <span class='word'>for</span> <span class='word'>messages</span> <span class='word'>that</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>delivered</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>could</span> <span class='word'>lead</span> <span class='word'>to</span> <span class='word'>a</span> <span class='word'>cascade</span> <span class='word'>of</span> <span class='word'>deliveries</span> <span class='word'>which</span> <span class='word'>if</span> <span class='word'>implemented</span> <span class='word'>naiively</span> <span class='word'>is</span> <span class='word'>quadratic</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>buffered</span> <span class='word'>messages</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>Instead</span><span class='ignore'>,</span> <span class='word'>using</span> <span class='word'>Delta</span> <span class='word'>Vectors</span> <span class='word'>we</span> <span class='word'>can</span> <span class='word'>form</span> <span class='word'>a</span> <span class='word'>dependency</span> <span class='word'>graph</span> <span class='word'>which</span> <span class='word'>allows</span> <span class='word'>more</span> <span class='word'>efficient</span> <span class='word'>delivery</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
		<span class='exclcmd'>\centering</span><br>
		<span class='exclcmd'>\includegraphics</span><span class='option'>[width=1\linewidth]</span><span class='ignore'>{</span><span class='ignore'>figs</span><span class='ignore'>/</span><span class='ignore'>efficient</span><span class='ignore'>_</span><span class='ignore'>message</span><span class='ignore'>_</span><span class='ignore'>buffer.eps</span><span class='ignore'>}</span><br>
&nbsp; <span class='cmd'>\caption</span><span class='option'>[Dependency Graph in Message Buffer]</span><span class='ignore'>{</span><span class='oword'>A</span> <span class='oword'>representation</span> <span class='oword'>of</span> <span class='oword'>the</span> <span class='oword'>graph</span> <span class='oword'>structure</span> <span class='oword'>used</span> <span class='oword'>to</span> <span class='oword'>efficiently</span> <span class='oword'>deliver</span> <span class='oword'>packets</span><span class='ignore'>.</span> <span class='oword'>When</span> <span class='oword'>a</span> <span class='oword'>new</span> <span class='oword'>packet</span> <span class='oword'>arrives</span> <span class='oword'>from</span> <span class='oword'>some</span> <span class='oword'>destination</span> <span class='oword'>D</span><span class='ignore'>,</span> <span class='oword'>all</span> <span class='oword'>outgoing</span> <span class='oword'>links</span> <span class='oword'>from</span> <span class='oword'>D</span> <span class='oword'>are</span> <span class='oword'>decremented</span><span class='ignore'>.</span> <span class='oword'>The</span> <span class='oword'>target</span> <span class='oword'>of</span> <span class='oword'>each</span> <span class='oword'>link</span> <span class='oword'>checks</span> <span class='oword'>the</span> <span class='oword'>head</span> <span class='oword'>of</span> <span class='oword'>its</span> <span class='oword'>queue</span> <span class='oword'>for</span> <span class='oword'>potential</span> <span class='oword'>delivery</span><span class='ignore'>.</span> <span class='oword'>The</span> <span class='oword'>efficiency</span> <span class='oword'>gain</span> <span class='oword'>relies</span> <span class='oword'>on</span> <span class='oword'>the</span> <span class='oword'>fact</span> <span class='oword'>that</span> <span class='oword'>messages</span> <span class='oword'>from</span> <span class='oword'>the</span> <span class='oword'>same</span> <span class='oword'>client</span> <span class='oword'>must</span> <span class='oword'>be</span> <span class='oword'>delivered</span> <span class='oword'>sequentially</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
		<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>efficient</span><span class='ignore'>}</span><br>
&nbsp; <span class='envir'>\end</span><span class='envir'>{figure}</span><br>
	<br>
	<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>ShareJS</span> <span class='hword'>Comparative</span> <span class='hword'>Environment</span><span class='ignore'>}</span><br>
<br>
	<span class='word'>The</span> <span class='word'>main</span> <span class='word'>difficulty</span> <span class='word'>when</span> <span class='word'>building</span> <span class='word'>a</span> <span class='word'>ShareJS-based</span> <span class='word'>comparative</span> <span class='word'>system</span> <span class='word'>is</span> <span class='word'>adapting</span> <span class='word'>it</span> <span class='word'>to</span> <span class='word'>allow</span> <span class='word'>executing</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>format</span> <span class='word'>experiments</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>system</span> <span class='word'>built</span> <span class='word'>bottom</span> <span class='word'>up</span> <span class='word'>before</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>main</span> <span class='word'>components</span> <span class='word'>in</span> <span class='word'>enabling</span> <span class='word'>this</span> <span class='word'>were</span> <span class='word'>incorporating</span> <span class='word'>the</span> <span class='word'>real-time</span> <span class='word'>scheduler</span> <span class='word'>discussed</span> <span class='word'>in</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>inserting</span> <span class='word'>log</span> <span class='word'>statements</span> <span class='word'>to</span> <span class='word'>record</span> <span class='word'>data</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>logging</span> <span class='word'>server</span><span class='ignore'>.</span><br>
	<br>
	<span class='cmd'>\paragraph</span><span class='ignore'>{</span><span class='hword'>Scheduling</span><span class='ignore'>}</span><br>
	<span class='word'>An</span> <span class='word'>experiment</span> <span class='word'>consists</span><span class='ignore'>,</span> <span class='word'>at</span> <span class='word'>its</span> <span class='word'>most</span> <span class='word'>basic</span><span class='ignore'>,</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>set</span> <span class='word'>of</span> <span class='word'>simulated</span> <span class='word'>events</span> <span class='word'>that</span> <span class='word'>each</span> <span class='word'>client</span> <span class='word'>performs</span> <span class='word'>at</span> <span class='word'>given</span> <span class='word'>times</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>system</span><span class='ignore'>,</span> <span class='word'>these</span> <span class='word'>events</span> <span class='word'>could</span> <span class='word'>be</span> <span class='word'>scheduled</span> <span class='word'>in</span> <span class='word'>logical</span> <span class='word'>time</span><span class='ignore'>,</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>entire</span> <span class='word'>simulation</span> <span class='word'>was</span> <span class='word'>under</span> <span class='word'>the</span> <span class='word'>control</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>system</span> <span class='word'>and</span> <span class='word'>all</span> <span class='word'>event</span> <span class='word'>times</span> <span class='word'>and</span> <span class='word'>durations</span> <span class='word'>were</span> <span class='word'>deterministic</span><span class='ignore'>.</span> <span class='word'>Here</span><span class='ignore'>,</span> <span class='word'>ShareJS</span> <span class='word'>requires</span> <span class='word'>that</span> <span class='word'>sockets</span> <span class='word'>be</span> <span class='word'>used</span> <span class='word'>to</span> <span class='word'>transmit</span> <span class='word'>operations</span> <span class='word'>between</span> <span class='word'>clients</span><span class='ignore'>,</span> <span class='word'>even</span> <span class='word'>if</span> <span class='word'>they</span> <span class='word'>are</span> <span class='word'>all</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>machine</span><span class='ignore'>.</span> <span class='word'>Nondeterminism</span> <span class='word'>is</span> <span class='word'>introduced</span> <span class='word'>by</span> <span class='word'>going</span> <span class='word'>through</span> <span class='word'>a</span> <span class='word'>traditional</span> <span class='word'>networking</span> <span class='word'>stack</span><span class='ignore'>,</span> <span class='word'>so</span> <span class='word'>logical</span> <span class='word'>time</span> <span class='word'>is</span> <span class='word'>no</span> <span class='word'>longer</span> <span class='word'>applicable</span><span class='ignore'>.</span><br>
	<br>
	<span class='word'>The</span> <span class='word'>real-time</span> <span class='word'>scheduler</span> <span class='word'>takes</span> <span class='word'>the</span> <span class='word'>basic</span> <span class='word'>time</span> <span class='word'>unit</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>a</span> <span class='word'>millisecond</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>executes</span> <span class='word'>experiment</span> <span class='word'>events</span> <span class='word'>accordingly</span><span class='ignore'>.</span> <span class='word'>Of</span> <span class='word'>course</span><span class='ignore'>,</span> <span class='word'>this</span> <span class='word'>choice</span> <span class='word'>of</span> <span class='word'>unit</span> <span class='word'>is</span> <span class='word'>arbitrary</span> <span class='word'>and</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>sped</span> <span class='word'>up</span> <span class='word'>or</span> <span class='word'>slowed</span> <span class='word'>down</span> <span class='word'>by</span> <span class='word'>a</span> <span class='word'>constant</span> <span class='word'>multiplier</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>unchanging</span> <span class='word'>factor</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>time</span> <span class='word'>needed</span> <span class='word'>to</span> <span class='word'>deliver</span> <span class='word'>packets</span> <span class='word'>via</span> <span class='word'>a</span> <span class='word'>real</span> <span class='word'>network</span> <span class='word'>stack</span> <span class='word'>using</span> <span class='word'>TCP</span> <span class='ignore'>(</span><span class='word'>the</span> <span class='word'>standard</span> <span class='word'>protocol</span> <span class='word'>used</span> <span class='word'>by</span> <span class='word'>ShareJS</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>It</span> <span class='word'>makes</span> <span class='word'>sense</span> <span class='word'>to</span> <span class='word'>schedule</span> <span class='word'>events</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>order</span> <span class='word'>of</span> <span class='word'>magnitude</span> <span class='word'>as</span> <span class='word'>a</span> <span class='word'>network</span> <span class='word'>round</span> <span class='word'>trip</span> <span class='word'>time</span><span class='ignore'>:</span> <span class='word'>much</span> <span class='word'>less</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>all</span> <span class='word'>events</span> <span class='word'>occur</span> <span class='word'>nearly</span> <span class='word'>instantaneously</span> <span class='word'>and</span> <span class='word'>concurrently</span> <span class='word'>on</span> <span class='word'>all</span> <span class='word'>clients</span><span class='ignore'>.</span> <span class='word'>Much</span> <span class='word'>slower</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>there</span> <span class='word'>is</span> <span class='word'>little</span> <span class='word'>concurrency</span> <span class='word'>to</span> <span class='word'>explore</span><span class='ignore'>.</span> <span class='word'>Thus</span> <span class='word'>a</span> <span class='word'>middle</span> <span class='word'>ground</span><span class='ignore'>,</span> <span class='word'>similar</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>average</span> <span class='word'>link</span> <span class='word'>latency</span><span class='ignore'>,</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>best</span> <span class='word'>choice</span> <span class='word'>when</span> <span class='word'>designing</span> <span class='word'>experiments</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>core</span> <span class='word'>idea</span> <span class='word'>is</span> <span class='word'>used</span> <span class='word'>when</span> <span class='word'>automatic</span> <span class='word'>the</span> <span class='word'>creation</span> <span class='word'>of</span> <span class='word'>experiments</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span><span class='ignore'>.</span><br>
	<br>
	<span class='cmd'>\paragraph</span><span class='ignore'>{</span><span class='hword'>Logging</span><span class='ignore'>}</span><br>
	<span class='word'>Enabling</span> <span class='word'>data</span> <span class='word'>logging</span> <span class='word'>primarily</span> <span class='word'>consists</span> <span class='word'>of</span> <span class='word'>inserting</span> <span class='word'>log</span> <span class='word'>lines</span> <span class='word'>at</span> <span class='word'>critical</span> <span class='word'>points</span> <span class='word'>that</span> <span class='word'>reveal</span> <span class='word'>interesting</span> <span class='word'>information</span> <span class='word'>about</span> <span class='word'>the</span> <span class='word'>system</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>most</span> <span class='word'>important</span> <span class='word'>of</span> <span class='word'>these</span> <span class='word'>are</span> <span class='word'>the</span> <span class='word'>receiving</span> <span class='word'>or</span> <span class='word'>sending</span> <span class='word'>of</span> <span class='word'>any</span> <span class='word'>packets</span> <span class='word'>from</span> <span class='word'>a</span> <span class='word'>client</span> <span class='word'>or</span> <span class='word'>the</span> <span class='word'>server</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>total</span> <span class='word'>memory</span> <span class='word'>consumption</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>clients</span> <span class='word'>before</span> <span class='word'>and</span> <span class='word'>after</span> <span class='word'>the</span> <span class='word'>simulation</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>was</span> <span class='word'>done</span> <span class='word'>by</span> <span class='word'>reading</span> <span class='word'>the</span> <span class='word'>ShareJS</span> <span class='word'>source</span> <span class='word'>code</span> <span class='word'>and</span> <span class='word'>inserting</span> <span class='word'>references</span> <span class='word'>to</span> <span class='word'>a</span> <span class='word'>global</span> <span class='word'>logging</span> <span class='word'>class</span> <span class='word'>at</span> <span class='word'>the</span> <span class='word'>appropriate</span> <span class='word'>points</span><span class='ignore'>.</span><br>
	<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Experiment</span> <span class='hword'>Creation</span> <span class='hword'>and</span> <span class='hword'>Use</span><span class='ignore'>}</span><br>
<br>
	<span class='word'>This</span> <span class='word'>section</span> <span class='word'>deals</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>creation</span> <span class='word'>and</span> <span class='word'>analysis</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>experiments</span><span class='ignore'>.</span> <span class='word'>First</span> <span class='word'>I</span> <span class='word'>outline</span> <span class='word'>the</span> <span class='word'>overall</span> <span class='word'>system</span> <span class='word'>work</span> <span class='word'>flow</span><span class='ignore'>.</span> <span class='word'>Then</span><span class='ignore'>,</span> <span class='word'>I</span> <span class='word'>discuss</span> <span class='word'>the</span> <span class='word'>design</span> <span class='word'>of</span> <span class='word'>an</span> <span class='word'>individual</span> <span class='word'>experiment</span><span class='ignore'>.</span> <span class='word'>Lastly</span><span class='ignore'>,</span> <span class='word'>I</span> <span class='word'>examine</span> <span class='word'>why</span> <span class='word'>I</span> <span class='word'>decided</span> <span class='word'>to</span> <span class='word'>log</span> <span class='word'>to</span> <span class='word'>text</span> <span class='word'>files</span><span class='ignore'>,</span> <span class='word'>then</span> <span class='word'>separately</span> <span class='word'>parse</span> <span class='word'>and</span> <span class='word'>analyze</span> <span class='word'>these</span> <span class='word'>files</span><span class='ignore'>.</span><br>
<br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Work</span> <span class='hword'>Flow</span><span class='ignore'>}</span><br>
	<span class='word'>On</span> <span class='word'>the</span> <span class='word'>whole</span><span class='ignore'>,</span> <span class='word'>this</span> <span class='word'>project</span> <span class='word'>operates</span> <span class='word'>as</span> <span class='word'>in</span> <span class='word'>Figure</span><span class='ignore'>~</span><span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>workflow</span><span class='ignore'>}</span><span class='ignore'>.</span> <br>
	<br>
	<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[htb]</span><br>
	<span class='exclcmd'>\centering</span><br>
	<span class='exclcmd'>\includegraphics</span><span class='option'>[width=1\linewidth]</span><span class='ignore'>{</span><span class='ignore'>figs</span><span class='ignore'>/</span><span class='ignore'>workflow.eps</span><span class='ignore'>}</span><br>
	<span class='cmd'>\caption</span><span class='option'>[Workflow]</span><span class='ignore'>{</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>workflow</span><span class='ignore'>}</span><br>
	<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
	<br>
	<br>
	<span class='word'>Manually</span> <span class='word'>or</span> <span class='word'>with</span> <span class='word'>a</span> <span class='word'>custom</span> <span class='word'>script</span><span class='ignore'>,</span> <span class='word'>experiment</span> <span class='word'>setup</span> <span class='word'>files</span> <span class='word'>are</span> <span class='word'>created</span><span class='ignore'>,</span> <span class='word'>with</span> <span class='word'>specifications</span> <span class='word'>over</span> <span class='word'>which</span> <span class='word'>variations</span> <span class='word'>should</span> <span class='word'>be</span> <span class='word'>executed</span> <span class='ignore'>(</span><span class='word'>such</span> <span class='word'>as</span> <span class='word'>different</span> <span class='word'>topologies</span> <span class='word'>or</span> <span class='word'>optimizations</span> <span class='word'>enabled</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>An</span> <span class='word'>experiment</span> <span class='word'>server</span> <span class='word'>provides</span> <span class='word'>whichever</span> <span class='word'>experiment</span> <span class='word'>and</span> <span class='word'>variant</span> <span class='word'>is</span> <span class='word'>queued</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>requester</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>may</span> <span class='word'>be</span> <span class='word'>the</span> <span class='word'>CRDT-based</span> <span class='word'>system</span><span class='ignore'>,</span> <span class='word'>or</span> <span class='word'>the</span> <span class='word'>ShareJS-based</span> <span class='word'>one</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>either</span> <span class='word'>case</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>basic</span> <span class='word'>data</span> <span class='word'>is</span> <span class='word'>served</span><span class='ignore'>,</span> <span class='word'>though</span> <span class='word'>the</span> <span class='word'>experiment</span> <span class='word'>variations</span> <span class='word'>only</span> <span class='word'>apply</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>CRDT-based</span> <span class='word'>system</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>system</span> <span class='word'>then</span> <span class='word'>runs</span> <span class='word'>the</span> <span class='word'>experiment</span> <span class='word'>and</span> <span class='word'>submits</span> <span class='word'>the</span> <span class='word'>resulting</span> <span class='word'>log</span> <span class='word'>back</span> <span class='word'>to</span> <span class='word'>a</span> <span class='word'>logging</span> <span class='word'>server</span> <span class='word'>that</span> <span class='word'>then</span> <span class='word'>identifies</span> <span class='word'>which</span> <span class='word'>experiment</span> <span class='word'>was</span> <span class='word'>served</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>writes</span> <span class='word'>the</span> <span class='word'>log</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>correct</span> <span class='word'>file</span> <span class='word'>system</span> <span class='word'>directory</span><span class='ignore'>.</span> <span class='word'>Then</span> <span class='word'>at</span> <span class='word'>some</span> <span class='word'>future</span> <span class='word'>point</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>separate</span> <span class='word'>script</span> <span class='word'>collects</span> <span class='word'>logs</span> <span class='word'>and</span> <span class='word'>summarizes</span> <span class='word'>them</span> <span class='word'>into</span> <span class='word'>digestible</span> <span class='word'>formats</span><span class='ignore'>.</span><br>
<br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Experiment</span> <span class='hword'>Design</span><span class='ignore'>}</span><br>
	<br>
	<span class='word'>A</span> <span class='word'>basic</span> <span class='word'>experiment</span> <span class='word'>must</span> <span class='word'>specify</span> <span class='word'>the</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>clients</span> <span class='word'>participating</span> <span class='word'>and</span> <span class='word'>when</span> <span class='word'>they</span> <span class='word'>join</span> <span class='word'>the</span> <span class='word'>network</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>set</span> <span class='word'>of</span> <span class='word'>events</span> <span class='word'>for</span> <span class='word'>each</span> <span class='word'>client</span> <span class='word'>to</span> <span class='word'>execute</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>topology</span> <span class='word'>and</span> <span class='word'>link</span> <span class='word'>latencies</span><span class='ignore'>.</span> <span class='word'>I</span> <span class='word'>chose</span> <span class='word'>to</span> <span class='word'>save</span> <span class='word'>this</span> <span class='word'>data</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>JSON</span> <span class='word'>file</span> <span class='word'>which</span> <span class='word'>is</span> <span class='word'>easily</span> <span class='word'>served</span> <span class='word'>from</span> <span class='word'>an</span> <span class='word'>experiment</span> <span class='word'>server</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>web</span> <span class='word'>browser</span> <span class='ignore'>(</span><span class='word'>browsers</span> <span class='word'>do</span> <span class='word'>not</span> <span class='word'>have</span> <span class='word'>facilities</span> <span class='word'>for</span> <span class='word'>automatically</span> <span class='word'>accessing</span> <span class='word'>local</span> <span class='word'>files</span> <span class='word'>for</span> <span class='word'>security</span> <span class='word'>reasons</span><span class='ignore'>,</span> <span class='word'>otherwise</span> <span class='word'>the</span> <span class='word'>server</span> <span class='word'>would</span> <span class='word'>be</span> <span class='word'>redundant</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>Other</span> <span class='word'>options</span> <span class='word'>in</span> <span class='word'>experiment</span> <span class='word'>setups</span> <span class='word'>are</span> <span class='word'>variants</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>different</span> <span class='word'>network</span> <span class='word'>topologies</span> <span class='word'>to</span> <span class='word'>run</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>experiment</span> <span class='word'>on</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>type</span> <span class='word'>of</span> <span class='word'>scheduler</span> <span class='word'>to</span> <span class='word'>use</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>CRDT-based</span> <span class='word'>system</span><span class='ignore'>.</span>	<span class='word'>Listing</span><span class='ignore'>~</span><span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>lst</span><span class='ignore'>:</span><span class='ignore'>simple</span><span class='ignore'>}</span> <span class='word'>below</span> <span class='word'>makes</span> <span class='word'>all</span> <span class='word'>of</span> <span class='word'>these</span> <span class='word'>features</span> <span class='word'>visible</span> <span class='word'>for</span> <span class='word'>a</span> <span class='word'>simple</span> <span class='word'>experiment</span><span class='ignore'>.</span><br>
	<br>
<br>
<span class='envir'>\begin</span><span class='envir'>{lstlisting}</span><span class='option'>[caption={A simple JSON experiment setup. Comments added for explanation and not part of JSON syntax}, label={lst:simple}]</span><br>
<span class='ignore'>{</span><br>
<span class='ignore'>	</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'> </span><span class='ignore'>Experiment</span><span class='ignore'> </span><span class='ignore'>Name</span><br>
<span class='ignore'>&nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>experiment</span><span class='ignore'>_</span><span class='ignore'>name</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>"</span><span class='ignore'>experiment</span><span class='ignore'>_</span><span class='ignore'>1</span><span class='ignore'>"</span><span class='ignore'>,</span><span class='ignore'>&nbsp; </span><br>
<span class='ignore'>	</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'> </span><span class='ignore'>How</span><span class='ignore'> </span><span class='ignore'>many</span><span class='ignore'> </span><span class='ignore'>clients</span><span class='ignore'> </span><span class='ignore'>and</span><span class='ignore'> </span><span class='ignore'>when</span><span class='ignore'> </span><span class='ignore'>they</span><span class='ignore'> </span><span class='ignore'>join</span><br>
<span class='ignore'>&nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>clients</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>[</span><span class='ignore'>0</span><span class='ignore'>,</span><span class='ignore'>0</span><span class='ignore'>,</span><span class='ignore'>0</span><span class='ignore'>]</span><span class='ignore'>,</span><span class='ignore'>&nbsp; </span><br>
<span class='ignore'>	</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'> </span><span class='ignore'>CRDT-only</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>Per</span><span class='ignore'> </span><span class='ignore'>client</span><span class='ignore'> </span><span class='ignore'>values</span><span class='ignore'> </span><span class='ignore'>used</span><span class='ignore'> </span><span class='ignore'>to</span><span class='ignore'> </span><span class='ignore'>compute</span><span class='ignore'> </span><span class='ignore'>link</span><span class='ignore'> </span><span class='ignore'>latencies</span><span class='ignore'>	</span><br>
<span class='ignore'>&nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>network</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>{</span><span class='ignore'>&nbsp; &nbsp; </span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>0</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>{</span><span class='ignore'>"</span><span class='ignore'>latency</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>196.7632081023716</span><span class='ignore'>}</span><span class='ignore'>,</span><span class='ignore'> </span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>1</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>{</span><span class='ignore'>"</span><span class='ignore'>latency</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>220.01040150077455</span><span class='ignore'>}</span><span class='ignore'>,</span><span class='ignore'> </span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>2</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>{</span><span class='ignore'>"</span><span class='ignore'>latency</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>122.31541467483453</span><span class='ignore'>}</span><br>
<span class='ignore'>&nbsp; &nbsp; </span><span class='ignore'>}</span><span class='ignore'>,</span><br>
<span class='ignore'>	</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'> </span><span class='ignore'>CRDT-only</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>type</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>scheduler</span><span class='ignore'> </span><span class='ignore'>to</span><span class='ignore'> </span><span class='ignore'>use</span><br>
<span class='ignore'>&nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>execution</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>"</span><span class='ignore'>event-driven</span><span class='ignore'>"</span><span class='ignore'>,</span><span class='ignore'>&nbsp; </span><br>
<span class='ignore'>	</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'> </span><span class='ignore'>Scheduled</span><span class='ignore'> </span><span class='ignore'>events</span><br>
<span class='ignore'>&nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>events</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>{</span><span class='ignore'>&nbsp; &nbsp; &nbsp; </span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>0</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>{</span><span class='ignore'>&nbsp; &nbsp; 	</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'> </span><span class='ignore'>Events</span><span class='ignore'> </span><span class='ignore'>for</span><span class='ignore'> </span><span class='ignore'>client</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp;  </span><span class='ignore'>"</span><span class='ignore'>insert</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>{</span><span class='ignore'>&nbsp; &nbsp; </span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'> </span><span class='ignore'>Insert</span><span class='ignore'> </span><span class='ignore'>events</span><span class='ignore'> </span><span class='ignore'>for</span><span class='ignore'> </span><span class='ignore'>client</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>0</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>{</span><span class='ignore'>&nbsp; &nbsp; </span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'> </span><span class='ignore'>Insert</span><span class='ignore'> </span><span class='ignore'>"</span><span class='ignore'>coliseums</span><span class='ignore'>"</span><span class='ignore'> </span><span class='ignore'>at</span><span class='ignore'> </span><span class='ignore'>time</span><span class='ignore'> </span><span class='ignore'>0</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>index</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>chars</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>"</span><span class='ignore'>coliseums</span><span class='ignore'>"</span><span class='ignore'>,</span><span class='ignore'> </span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>after</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>}</span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>}</span><span class='ignore'>,</span><span class='ignore'> </span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>delete</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>{</span><span class='ignore'>}</span><span class='ignore'>&nbsp; 	</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'> </span><span class='ignore'>No</span><span class='ignore'> </span><span class='ignore'>delete</span><span class='ignore'> </span><span class='ignore'>events</span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>}</span><span class='ignore'>,</span><span class='ignore'> </span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>1</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>{</span><span class='ignore'>&nbsp; &nbsp; 	</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'> </span><span class='ignore'>Events</span><span class='ignore'> </span><span class='ignore'>for</span><span class='ignore'> </span><span class='ignore'>client</span><span class='ignore'> </span><span class='ignore'>1</span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>insert</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>{</span><span class='ignore'>&nbsp; &nbsp; </span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'> </span><span class='ignore'>Insert</span><span class='ignore'> </span><span class='ignore'>events</span><span class='ignore'> </span><span class='ignore'>for</span><span class='ignore'> </span><span class='ignore'>client</span><span class='ignore'> </span><span class='ignore'>1</span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>15</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>{</span><span class='ignore'>&nbsp; &nbsp; </span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'> </span><span class='ignore'>Insert</span><span class='ignore'> </span><span class='ignore'>"</span><span class='ignore'>tackling</span><span class='ignore'>"</span><span class='ignore'> </span><span class='ignore'>at</span><span class='ignore'> </span><span class='ignore'>time</span><span class='ignore'> </span><span class='ignore'>15</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>index</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>chars</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>"</span><span class='ignore'>tackling</span><span class='ignore'>"</span><span class='ignore'>,</span><span class='ignore'>&nbsp; 	</span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>after</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>}</span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>}</span><span class='ignore'>,</span><span class='ignore'> </span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>delete</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>{</span><span class='ignore'>}</span><span class='ignore'>&nbsp; 	</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'> </span><span class='ignore'>No</span><span class='ignore'> </span><span class='ignore'>delete</span><span class='ignore'> </span><span class='ignore'>events</span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>}</span><span class='ignore'>,</span><span class='ignore'> </span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>2</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>{</span><span class='ignore'>&nbsp; &nbsp; 	</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'> </span><span class='ignore'>Events</span><span class='ignore'> </span><span class='ignore'>for</span><span class='ignore'> </span><span class='ignore'>client</span><span class='ignore'> </span><span class='ignore'>1</span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>insert</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>{</span><span class='ignore'>&nbsp; &nbsp; </span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'> </span><span class='ignore'>Insert</span><span class='ignore'> </span><span class='ignore'>events</span><span class='ignore'> </span><span class='ignore'>for</span><span class='ignore'> </span><span class='ignore'>client</span><span class='ignore'> </span><span class='ignore'>1</span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>30</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>{</span><span class='ignore'>&nbsp; &nbsp; </span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'> </span><span class='ignore'>Insert</span><span class='ignore'> </span><span class='ignore'>"</span><span class='ignore'>freshening</span><span class='ignore'>"</span><span class='ignore'> </span><span class='ignore'>at</span><span class='ignore'> </span><span class='ignore'>time</span><span class='ignore'> </span><span class='ignore'>30</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>index</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>chars</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>"</span><span class='ignore'>freshening</span><span class='ignore'>"</span><span class='ignore'>,</span><span class='ignore'> </span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>after</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>}</span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>}</span><span class='ignore'>,</span><span class='ignore'> </span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>delete</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>{</span><span class='ignore'>}</span><span class='ignore'>&nbsp; 	</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'> </span><span class='ignore'>No</span><span class='ignore'> </span><span class='ignore'>delete</span><span class='ignore'> </span><span class='ignore'>events</span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>}</span><br>
<span class='ignore'>	</span><span class='ignore'>}</span><span class='ignore'>,</span><br>
<span class='ignore'>	</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'> </span><span class='ignore'>CRDT-only</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>Topologies</span><span class='ignore'> </span><span class='ignore'>over</span><span class='ignore'> </span><span class='ignore'>which</span><span class='ignore'> </span><span class='ignore'>to</span><span class='ignore'> </span><span class='ignore'>run</span><span class='ignore'> </span><span class='ignore'>the</span><span class='ignore'> </span><span class='ignore'>same</span><span class='ignore'> </span><span class='ignore'>experiment</span><br>
<span class='ignore'>&nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>topology</span><span class='ignore'>"</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>[</span><span class='ignore'>&nbsp; &nbsp; 	</span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>fully-connected</span><span class='ignore'>"</span><span class='ignore'>,</span><span class='ignore'> </span><br>
<span class='ignore'>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class='ignore'>"</span><span class='ignore'>star</span><span class='ignore'>"</span><br>
<span class='ignore'>&nbsp; &nbsp; </span><span class='ignore'>]</span><br>
<span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'></span><span class='envir'>{lstlisting}</span><br>
<br>
	<span class='word'>The</span> <span class='word'>choice</span> <span class='word'>to</span> <span class='word'>assign</span> <span class='word'>latencies</span> <span class='word'>per-node</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>calculate</span> <span class='word'>a</span> <span class='word'>link</span> <span class='word'>latency</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>average</span> <span class='word'>between</span> <span class='word'>two</span> <span class='word'>nodes</span><span class='ignore'>'</span> <span class='word'>values</span><span class='ignore'>,</span> <span class='word'>rather</span> <span class='word'>than</span> <span class='word'>assign</span> <span class='word'>per-link</span> <span class='word'>stems</span> <span class='word'>from</span> <span class='word'>the</span> <span class='word'>need</span> <span class='word'>to</span> <span class='word'>have</span> <span class='word'>one</span> <span class='word'>network</span> <span class='word'>description</span> <span class='word'>that</span> <span class='word'>fits</span> <span class='word'>any</span> <span class='word'>topology</span><span class='ignore'>.</span> <span class='word'>It</span> <span class='word'>also</span> <span class='word'>models</span> <span class='word'>the</span> <span class='word'>real</span> <span class='word'>world</span> <span class='word'>better</span> <span class='word'>on</span> <span class='word'>a</span> <span class='word'>conceptual</span> <span class='word'>level</span><span class='ignore'>:</span> <span class='word'>a</span> <span class='word'>device</span> <span class='word'>with</span> <span class='word'>one</span> <span class='word'>high</span> <span class='word'>latency</span> <span class='word'>link</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>a</span> <span class='word'>mobile</span> <span class='word'>phone</span><span class='ignore'>,</span> <span class='word'>will</span> <span class='word'>likely</span> <span class='word'>have</span> <span class='word'>only</span> <span class='word'>higher</span> <span class='word'>latency</span> <span class='word'>links</span> <span class='word'>rather</span> <span class='word'>than</span> <span class='word'>some</span> <span class='word'>fast</span> <span class='word'>and</span> <span class='word'>slow</span> <span class='word'>links</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='ignore'>`</span><span class='ignore'>`</span><span class='word'>higher</span> <span class='word'>on</span> <span class='word'>all</span> <span class='word'>connections</span><span class='ignore'>'</span><span class='ignore'>'</span> <span class='word'>is</span> <span class='word'>modeled</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>average</span> <span class='word'>between</span> <span class='word'>a</span> <span class='ignore'>(</span><span class='word'>high-valued</span><span class='ignore'>)</span> <span class='word'>node</span> <span class='word'>and</span> <span class='word'>its</span> <span class='word'>neighbors</span><span class='ignore'>.</span><br>
<br>
	<br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Separation</span> <span class='hword'>of</span> <span class='hword'>Concerns</span><span class='ignore'>}</span><br>
	<br>
	<span class='word'>A</span> <span class='word'>major</span> <span class='word'>decision</span> <span class='word'>that</span> <span class='word'>was</span> <span class='word'>made</span> <span class='word'>was</span> <span class='word'>to</span> <span class='word'>separate</span> <span class='word'>log</span> <span class='word'>analysis</span> <span class='word'>from</span> <span class='word'>the</span> <span class='word'>system</span> <span class='word'>generating</span> <span class='word'>the</span> <span class='word'>log</span> <span class='word'>itself</span><span class='ignore'>.</span> <span class='word'>One</span> <span class='word'>reason</span> <span class='word'>for</span> <span class='word'>this</span> <span class='word'>was</span> <span class='word'>that</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>good</span> <span class='word'>software</span> <span class='word'>engineering</span><span class='ignore'>:</span> <span class='word'>one</span> <span class='word'>component</span> <span class='word'>should</span> <span class='word'>do</span> <span class='word'>one</span> <span class='word'>task</span><span class='ignore'>.</span> <span class='word'>Another</span> <span class='word'>is</span> <span class='word'>that</span> <span class='word'>a</span> <span class='word'>separate</span> <span class='word'>analysis</span> <span class='word'>layer</span> <span class='word'>can</span> <span class='word'>analyze</span> <span class='word'>results</span> <span class='word'>from</span> <span class='word'>both</span> <span class='word'>the</span> <span class='word'>ShareJS</span> <span class='word'>and</span> <span class='word'>CRDT</span> <span class='word'>systems</span><span class='ignore'>,</span> <span class='word'>rather</span> <span class='word'>than</span> <span class='word'>duplicating</span> <span class='word'>functionality</span> <span class='word'>for</span> <span class='word'>each</span> <span class='word'>system</span><span class='ignore'>.</span> <span class='word'>On</span> <span class='word'>the</span> <span class='word'>other</span> <span class='word'>hand</span><span class='ignore'>,</span> <span class='word'>modules</span> <span class='word'>for</span> <span class='word'>examining</span> <span class='word'>logged</span> <span class='word'>packet</span> <span class='word'>departures</span> <span class='word'>and</span> <span class='word'>arrivals</span> <span class='word'>end</span> <span class='word'>up</span> <span class='word'>resembling</span> <span class='word'>a</span> <span class='word'>set</span> <span class='word'>of</span> <span class='ignore'>`</span><span class='word'>clients</span><span class='ignore'>'</span><span class='ignore'>,</span> <span class='word'>much</span> <span class='word'>like</span> <span class='word'>the</span> <span class='word'>original</span> <span class='word'>simulations</span><span class='ignore'>'</span> <span class='word'>and</span> <span class='word'>ShareJS's</span> <span class='word'>clients</span><span class='ignore'>.</span> <span class='word'>However</span><span class='ignore'>,</span> <span class='word'>I</span> <span class='word'>decided</span> <span class='word'>that</span> <span class='word'>having</span> <span class='word'>a</span> <span class='word'>system</span> <span class='word'>common</span> <span class='word'>to</span> <span class='word'>both</span> <span class='word'>that</span> <span class='word'>is</span> <span class='word'>separate</span> <span class='word'>and</span> <span class='word'>easily</span> <span class='word'>extensible</span> <span class='word'>is</span> <span class='word'>worth</span> <span class='word'>duplicating</span> <span class='word'>some</span> <span class='word'>high</span> <span class='word'>level</span> <span class='word'>functionality</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>result</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>Python</span> <span class='word'>script</span> <span class='word'>which</span> <span class='word'>parses</span> <span class='word'>and</span> <span class='word'>summarizes</span> <span class='word'>multiple</span> <span class='word'>log</span> <span class='word'>files</span> <span class='word'>from</span> <span class='word'>a</span> <span class='word'>single</span> <span class='word'>experiment</span><span class='ignore'>.</span><br>
	<br>
	<span class='word'>The</span> <span class='word'>analyzer</span> <span class='word'>pairs</span> <span class='word'>up</span> <span class='word'>send</span> <span class='word'>and</span> <span class='word'>receive</span> <span class='word'>log</span> <span class='word'>lines</span> <span class='word'>for</span> <span class='word'>each</span> <span class='word'>packet</span> <span class='word'>and</span> <span class='word'>calculates</span> <span class='word'>link</span> <span class='word'>latencies</span> <span class='ignore'>(</span><span class='word'>important</span> <span class='word'>for</span> <span class='word'>ShareJS</span> <span class='word'>where</span> <span class='word'>latencies</span> <span class='word'>are</span> <span class='word'>nondeterministic</span><span class='ignore'>)</span> <span class='word'>and</span> <span class='word'>length</span> <span class='word'>of</span> <span class='word'>packets</span><span class='ignore'>,</span> <span class='word'>records</span> <span class='word'>the</span> <span class='word'>increases</span> <span class='word'>in</span> <span class='word'>memory</span> <span class='word'>usage</span> <span class='word'>at</span> <span class='word'>checkpoints</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>log</span> <span class='word'>files</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>various</span> <span class='word'>other</span> <span class='word'>statistics</span><span class='ignore'>.</span> <span class='word'>A</span> <span class='word'>sample</span> <span class='word'>output</span> <span class='word'>is</span> <span class='word'>listed</span> <span class='word'>in</span> <span class='word'>Appendix</span><span class='ignore'>~</span><span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>appendix</span><span class='ignore'>:</span><span class='ignore'>simplelogsummary</span><span class='ignore'>}</span><span class='ignore'>.</span>	<br>
	<br>
	<br>
	<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Extension</span><span class='ignore'>:</span> <span class='hword'>Local</span> <span class='hword'>Undo</span><span class='ignore'>}</span><br>
	<br>
	<span class='word'>In</span> <span class='word'>interactive</span> <span class='word'>systems</span> <span class='word'>undo</span> <span class='word'>and</span> <span class='word'>redo</span> <span class='word'>are</span> <span class='word'>key</span> <span class='word'>features</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>shneiderman1982</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>As</span> <span class='word'>such</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>an</span> <span class='word'>interesting</span> <span class='word'>extension</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>capabilities</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>CRDT</span> <span class='word'>beyond</span> <span class='word'>basic</span> <span class='word'>insertion</span> <span class='word'>and</span> <span class='word'>deletion</span><span class='ignore'>.</span> <span class='word'>I</span> <span class='word'>chose</span> <span class='word'>to</span> <span class='word'>implement</span> <span class='word'>a</span> <span class='word'>local</span> <span class='word'>undo</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>that</span> <span class='word'>is</span><span class='ignore'>,</span> <span class='word'>only</span> <span class='word'>allow</span> <span class='word'>undoing</span> <span class='word'>and</span> <span class='word'>redoing</span> <span class='word'>operations</span> <span class='word'>that</span> <span class='word'>were</span> <span class='word'>performed</span> <span class='word'>locally</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>rather</span> <span class='word'>than</span> <span class='word'>a</span> <span class='word'>global</span> <span class='word'>undo</span><span class='ignore'>,</span> <span class='word'>where</span> <span class='word'>everyone</span> <span class='word'>can</span> <span class='word'>modify</span> <span class='word'>any</span> <span class='word'>operation</span><span class='ignore'>,</span> <span class='word'>at</span> <span class='word'>the</span> <span class='word'>suggestion</span> <span class='word'>of</span> <span class='word'>my</span> <span class='word'>supervisor</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>approaches</span> <span class='word'>detailed</span> <span class='word'>below</span> <span class='word'>were</span> <span class='word'>developed</span> <span class='word'>originally</span> <span class='word'>prior</span> <span class='word'>to</span> <span class='word'>reading</span> <span class='word'>related</span> <span class='word'>literature</span><span class='ignore'>,</span> <span class='word'>but</span> <span class='word'>one</span> <span class='word'>is</span> <span class='word'>very</span> <span class='word'>similar</span> <span class='word'>to</span> <span class='word'>that</span> <span class='word'>of</span> <span class='word'>Logoot</span> <span class='word'>Undo</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span> <span class='word'>needed</span><span class='ignore'>]</span><span class='ignore'>.</span><br>
	<br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Overview</span><span class='ignore'>}</span><br>
	<span class='word'>Each</span> <span class='word'>client</span> <span class='word'>keeps</span> <span class='word'>a</span> <span class='word'>local</span> <span class='word'>stack</span> <span class='word'>of</span> <span class='word'>operations</span> <span class='word'>that</span> <span class='word'>it</span> <span class='word'>produced</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>stack</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>truncated</span> <span class='word'>to</span> <span class='word'>a</span> <span class='word'>certain</span> <span class='word'>length</span> <span class='word'>to</span> <span class='word'>avoid</span> <span class='word'>ever-growing</span> <span class='word'>memory</span> <span class='word'>consumption</span><span class='ignore'>.</span> <span class='word'>When</span> <span class='word'>undoing</span> <span class='word'>an</span> <span class='word'>operation</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>pointer</span> <span class='word'>is</span> <span class='word'>moved</span> <span class='word'>back</span> <span class='word'>down</span> <span class='word'>the</span> <span class='word'>stack</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>inverse</span> <span class='word'>operation</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>corresponding</span> <span class='word'>item</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>stack</span> <span class='word'>is</span> <span class='word'>generated</span> <span class='word'>and</span> <span class='word'>broadcast</span> <span class='word'>to</span> <span class='word'>other</span> <span class='word'>clients</span><span class='ignore'>.</span><br>
	<br>
	<span class='word'>There</span> <span class='word'>are</span> <span class='word'>two</span> <span class='word'>operations</span> <span class='word'>that</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>undone</span> <span class='word'>or</span> <span class='word'>redone</span><span class='ignore'>:</span> <span class='word'>insert</span> <span class='word'>and</span> <span class='word'>delete</span><span class='ignore'>.</span> <span class='word'>Only</span> <span class='word'>one</span> <span class='word'>client</span> <span class='word'>can</span> <span class='word'>ever</span> <span class='word'>locally</span> <span class='word'>generate</span> <span class='word'>an</span> <span class='word'>insert</span> <span class='word'>event</span> <span class='ignore'>(</span><span class='word'>as</span> <span class='word'>each</span> <span class='word'>character</span> <span class='word'>is</span> <span class='word'>tagged</span> <span class='word'>with</span> <span class='word'>a</span> <span class='word'>globally</span> <span class='word'>unique</span> <span class='word'>identifier</span> <span class='word'>generated</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>client</span><span class='ignore'>)</span> <span class='word'>and</span> <span class='word'>thus</span> <span class='word'>it</span> <span class='word'>can</span> <span class='word'>undo</span> <span class='word'>and</span> <span class='word'>redo</span> <span class='word'>the</span> <span class='word'>operation</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>the</span> <span class='word'>other</span> <span class='word'>case</span><span class='ignore'>,</span> <span class='word'>two</span> <span class='word'>clients</span> <span class='word'>can</span> <span class='word'>concurrently</span> <span class='word'>delete</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>character</span> <span class='word'>and</span> <span class='word'>so</span> <span class='word'>have</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>operation</span> <span class='word'>on</span> <span class='word'>their</span> <span class='word'>local</span> <span class='word'>stack</span><span class='ignore'>.</span> <span class='word'>How</span> <span class='word'>undoing</span> <span class='word'>and</span> <span class='word'>redoing</span> <span class='word'>this</span> <span class='word'>concurrent</span> <span class='word'>case</span> <span class='word'>is</span> <span class='word'>handled</span> <span class='word'>leads</span> <span class='word'>to</span> <span class='word'>two</span> <span class='word'>different</span> <span class='word'>semantics</span> <span class='word'>and</span> <span class='word'>consistency</span> <span class='word'>models</span><span class='ignore'>.</span> <span class='word'>However</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>insert</span> <span class='word'>is</span> <span class='word'>handled</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>way</span> <span class='word'>in</span> <span class='word'>both</span> <span class='word'>cases</span><span class='ignore'>.</span><br>
	<br>
	<br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Insert</span><span class='ignore'>}</span><br>
	<span class='word'>The</span> <span class='word'>undoing</span> <span class='word'>of</span> <span class='word'>an</span> <span class='word'>insert</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>thought</span> <span class='word'>of</span> <span class='word'>as</span> <span class='word'>a</span> <span class='word'>deletion</span><span class='ignore'>,</span> <span class='word'>but</span> <span class='word'>this</span> <span class='word'>leads</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>idea</span> <span class='word'>undo</span><span class='ignore'>/</span><span class='word'>redo</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>implemented</span> <span class='word'>using</span> <span class='word'>the</span> <span class='word'>existing</span> <span class='word'>delete</span> <span class='word'>and</span> <span class='word'>insert</span> <span class='word'>operations</span><span class='ignore'>.</span> <span class='word'>However</span><span class='ignore'>,</span> <span class='word'>this</span> <span class='word'>is</span> <span class='word'>not</span> <span class='word'>feasible</span><span class='ignore'>:</span> <span class='word'>doing</span> <span class='word'>a</span> <span class='ignore'>`</span><span class='word'>redo</span> <span class='word'>insert</span><span class='ignore'>'</span> <span class='word'>by</span> <span class='word'>inserting</span> <span class='word'>a</span> <span class='word'>new</span> <span class='word'>character</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>value</span><span class='ignore'>,</span> <span class='word'>is</span> <span class='word'>not</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>thing</span> <span class='word'>as</span> <span class='word'>redoing</span> <span class='word'>the</span> <span class='word'>insertion</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>original</span> <span class='word'>character</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>this</span> <span class='word'>is</span> <span class='word'>especially</span> <span class='word'>obvious</span> <span class='word'>when</span> <span class='word'>looking</span> <span class='word'>at</span> <span class='word'>the</span> <span class='word'>structure</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>CRDT</span><span class='ignore'>.</span> <span class='word'>Since</span> <span class='word'>each</span> <span class='word'>character</span> <span class='word'>is</span> <span class='word'>identified</span> <span class='word'>uniquely</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>redo</span> <span class='word'>must</span> <span class='word'>reintroduce</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>character</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>unique</span> <span class='word'>identifier</span> <span class='word'>rather</span> <span class='word'>than</span> <span class='word'>creating</span> <span class='word'>a</span> <span class='word'>new</span> <span class='word'>one</span> <span class='word'>with</span> <span class='word'>a</span> <span class='word'>fresh</span> <span class='word'>tag</span><span class='ignore'>.</span> <span class='word'>Additionally</span><span class='ignore'>,</span> <span class='word'>other</span> <span class='word'>clients</span> <span class='word'>may</span> <span class='word'>have</span> <span class='word'>performed</span> <span class='word'>concurrent</span> <span class='word'>operations</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>character</span> <span class='word'>which</span> <span class='word'>must</span> <span class='word'>be</span> <span class='word'>brought</span> <span class='word'>back</span> <span class='word'>into</span> <span class='word'>effect</span> <span class='word'>on</span> <span class='word'>redo</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>solution</span> <span class='word'>to</span> <span class='word'>this</span> <span class='word'>is</span> <span class='word'>discussed</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>following</span> <span class='word'>subsections</span><span class='ignore'>.</span><br>
	<br>
&nbsp; <span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Undo</span><span class='ignore'>/</span><span class='hword'>Redo</span> <span class='hword'>Insert</span> <span class='hword'>Semantics</span><span class='ignore'>}</span><br>
		<span class='word'>The</span> <span class='word'>creator</span> <span class='word'>of</span> <span class='word'>an</span> <span class='word'>insert</span> <span class='word'>can</span> <span class='word'>choose</span> <span class='word'>to</span> <span class='word'>undo</span> <span class='word'>its</span> <span class='word'>creation</span> <span class='word'>at</span> <span class='word'>any</span> <span class='word'>point</span> <span class='word'>in</span> <span class='word'>time</span><span class='ignore'>.</span> <span class='word'>To</span> <span class='word'>satisfy</span> <span class='word'>the</span> <span class='word'>CCI</span> <span class='word'>consistency</span> <span class='word'>model</span> <span class='word'>and</span> <span class='word'>semantics</span> <span class='ignore'>(</span><span class='word'>defined</span> <span class='word'>in</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span> <span class='word'>and</span> <span class='word'>below</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>an</span> <span class='word'>undo</span> <span class='word'>and</span> <span class='word'>a</span> <span class='word'>redo</span> <span class='word'>should</span> <span class='word'>have</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>the</span> <span class='word'>same</span> <span class='word'>effect</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>visible</span> <span class='word'>text</span> <span class='word'>as</span> <span class='word'>if</span> <span class='word'>the</span> <span class='word'>prior</span> <span class='word'>creation</span> <span class='word'>or</span> <span class='word'>undo</span> <span class='word'>never</span> <span class='word'>occurred</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>For</span> <span class='word'>instance</span><span class='ignore'>,</span> <span class='word'>if</span> <span class='mathgroup'>$</span><span class='math'>A</span><span class='mathgroup'>$</span> <span class='word'>creates</span> <span class='word'>a</span> <span class='word'>character</span> <span class='word'>which</span> <span class='word'>is</span> <span class='word'>deleted</span> <span class='word'>by</span> <span class='mathgroup'>$</span><span class='math'>B</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>creation</span> <span class='word'>is</span> <span class='word'>undone</span> <span class='word'>and</span> <span class='word'>then</span> <span class='word'>redone</span> <span class='word'>by</span> <span class='mathgroup'>$</span><span class='math'>A</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>character</span> <span class='word'>should</span> <span class='word'>still</span> <span class='word'>not</span> <span class='word'>be</span> <span class='word'>visible</span><span class='ignore'>:</span> <span class='word'>the</span> <span class='word'>effect</span> <span class='word'>of</span> <span class='word'>client</span> <span class='mathgroup'>$</span><span class='math'>B</span><span class='mathgroup'>$</span><span class='word'>s</span> <span class='word'>delete</span> <span class='word'>come</span> <span class='word'>back</span> <span class='word'>into</span> <span class='word'>effect</span> <span class='word'>as</span> <span class='word'>if</span> <span class='mathgroup'>$</span><span class='math'>A</span><span class='mathgroup'>$</span> <span class='word'>never</span> <span class='word'>undid</span> <span class='word'>the</span> <span class='word'>insertion</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>Using</span> <span class='word'>this</span> <span class='word'>idea</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>evident</span> <span class='word'>that</span> <span class='ignore'>`</span><span class='word'>undo</span> <span class='word'>insert</span><span class='ignore'>'</span> <span class='word'>and</span> <span class='ignore'>`</span><span class='word'>delete</span><span class='ignore'>'</span> <span class='word'>operations</span> <span class='word'>need</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>kept</span> <span class='word'>separate</span><span class='ignore'>.</span> <span class='word'>Additionally</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>operation</span> <span class='word'>needs</span> <span class='word'>to</span> <span class='word'>take</span> <span class='word'>precedence</span> <span class='word'>over</span> <span class='word'>deletions</span> <span class='word'>that</span> <span class='word'>have</span> <span class='word'>occurred</span> <span class='word'>subsequently</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>along</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>fact</span> <span class='word'>that</span> <span class='word'>a</span> <span class='word'>redo</span> <span class='word'>needs</span> <span class='word'>to</span> <span class='word'>reintroduce</span> <span class='word'>the</span> <span class='word'>original</span> <span class='word'>character</span> <span class='word'>leads</span> <span class='word'>to</span> <span class='word'>an</span> <span class='word'>effective</span> <span class='word'>semantics</span> <span class='word'>and</span> <span class='word'>straightforward</span> <span class='word'>implementation</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Implementation</span><span class='ignore'>}</span><br>
		<br>
&nbsp; <span class='word'>To</span> <span class='word'>achieve</span> <span class='word'>the</span> <span class='word'>desired</span> <span class='word'>functionality</span><span class='ignore'>,</span> <span class='word'>I</span> <span class='word'>augmented</span> <span class='word'>links</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>with</span> <span class='word'>an</span> <span class='word'>extra</span> <span class='word'>boolean</span> <span class='ignore'>`</span><span class='word'>visible</span><span class='ignore'>'</span> <span class='word'>tag</span> <span class='ignore'>(</span><span class='word'>denoted</span> <span class='mathgroup'>$</span><span class='math'>v</span><span class='mathgroup'>$</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>two</span> <span class='word'>new</span> <span class='word'>bundles</span> <span class='word'>that</span> <span class='word'>need</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>created</span> <span class='word'>are</span> <span class='word'>undo-insert</span> <span class='word'>and</span> <span class='word'>redo-insert</span><span class='ignore'>,</span> <span class='word'>but</span> <span class='word'>these</span> <span class='word'>along</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>undo-delete</span> <span class='word'>and</span> <span class='word'>redo-delete</span> <span class='word'>bundles</span> <span class='ignore'>(</span><span class='word'>to</span> <span class='word'>be</span> <span class='word'>seen</span><span class='ignore'>)</span> <span class='word'>all</span> <span class='word'>have</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>functional</span> <span class='word'>form</span><span class='ignore'>.</span><br>
&nbsp;  <br>
&nbsp; <span class='word'>The</span> <span class='word'>bundle</span> <span class='word'>contains</span><br>
&nbsp; <span class='envir'>\begin</span><span class='envir'>{itemize}</span><br>
			<span class='cmd'>\item</span> <span class='word'>The</span> <span class='word'>unique</span> <span class='word'>identifier</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>character</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>operated</span> <span class='word'>upon</span><br>
&nbsp; <span class='envir'>\end</span><span class='envir'>{itemize}</span><br>
&nbsp; <br>
&nbsp; <span class='word'>Undo</span> <span class='word'>packets</span> <span class='word'>also</span> <span class='word'>contain</span><span class='ignore'>,</span> <span class='word'>besides</span> <span class='word'>the</span> <span class='word'>bundle</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>string</span> <span class='word'>disambiguator</span> <span class='word'>to</span> <span class='word'>differentiate</span> <span class='word'>undo</span><span class='ignore'>/</span><span class='word'>redo</span> <span class='word'>and</span> <span class='word'>insert</span><span class='ignore'>/</span><span class='word'>delete</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>The</span> <span class='word'>effect</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>undo</span> <span class='word'>insert</span> <span class='word'>packet</span> <span class='word'>on</span> <span class='word'>CRDT</span> <span class='word'>node</span> <span class='mathgroup'>$</span><span class='math'>L</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>to</span> <span class='word'>set</span> <span class='mathgroup'>$</span><span class='math'>L.v</span> <span class='math'>=</span> <span class='math'>false</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>while</span> <span class='word'>a</span> <span class='word'>redo</span> <span class='word'>insert</span> <span class='word'>packet</span> <span class='word'>sets</span> <span class='mathgroup'>$</span><span class='math'>L.v</span> <span class='math'>=</span> <span class='math'>true</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <span class='word'>When</span> <span class='word'>the</span> <span class='word'>string</span> <span class='word'>is</span> <span class='word'>queried</span> <span class='word'>from</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='ignore'>(</span><span class='word'>i.e</span><span class='ignore'>.</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='ignore'>`</span><span class='word'>read</span><span class='ignore'>(</span><span class='ignore'>)</span><span class='ignore'>'</span> <span class='word'>method</span> <span class='word'>is</span> <span class='word'>called</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>nodes</span> <span class='word'>which</span> <span class='word'>have</span> <span class='mathgroup'>$</span><span class='math'>v</span> <span class='math'>=</span> <span class='math'>false</span><span class='mathgroup'>$</span> <span class='word'>are</span> <span class='word'>ignored</span> <span class='word'>and</span> <span class='word'>not</span> <span class='word'>retrieved</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='word'>Normally</span><span class='ignore'>,</span> <span class='word'>operations</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>piece</span> <span class='word'>of</span> <span class='word'>data</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>CRDT</span> <span class='word'>need</span> <span class='word'>to</span> <span class='word'>commute</span><span class='ignore'>.</span> <span class='word'>However</span><span class='ignore'>,</span> <span class='word'>in</span> <span class='word'>this</span> <span class='word'>case</span><span class='ignore'>,</span> <span class='word'>only</span> <span class='word'>one</span> <span class='word'>client</span> <span class='word'>can</span> <span class='word'>generate</span> <span class='word'>the</span> <span class='word'>messages</span> <span class='word'>and</span> <span class='word'>so</span> <span class='word'>conflict</span> <span class='word'>from</span> <span class='word'>different</span> <span class='word'>clients</span> <span class='word'>cannot</span> <span class='word'>occur</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>also</span> <span class='word'>means</span> <span class='word'>the</span> <span class='word'>operations</span> <span class='word'>are</span> <span class='word'>all</span> <span class='word'>causally</span> <span class='word'>related</span> <span class='word'>by</span> <span class='mathgroup'>$</span><span class='mathcmd'>\rightarrow</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>since</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>layer</span> <span class='word'>guarantees</span> <span class='word'>causal</span> <span class='word'>delivery</span><span class='ignore'>,</span> <span class='word'>there</span> <span class='word'>is</span> <span class='word'>never</span> <span class='word'>conflict</span><span class='ignore'>.</span> <span class='word'>Thus</span><span class='ignore'>,</span> <span class='word'>no</span> <span class='word'>proof</span> <span class='word'>of</span> <span class='word'>commutativity</span> <span class='word'>is</span> <span class='word'>required</span><span class='ignore'>.</span><br>
&nbsp; <br>
	<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Delete</span><span class='ignore'>}</span><br>
		<span class='word'>Undoing</span> <span class='word'>a</span> <span class='word'>delete</span><span class='ignore'>,</span> <span class='word'>as</span> <span class='word'>mentioned</span> <span class='word'>before</span><span class='ignore'>,</span> <span class='word'>is</span> <span class='word'>tricker</span> <span class='word'>than</span> <span class='word'>an</span> <span class='word'>insert</span> <span class='word'>as</span> <span class='word'>multiple</span> <span class='word'>clients</span> <span class='word'>can</span> <span class='word'>perform</span> <span class='word'>and</span> <span class='word'>therefore</span> <span class='ignore'>`</span><span class='word'>own</span><span class='ignore'>'</span> <span class='word'>a</span> <span class='word'>delete</span> <span class='word'>at</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>time</span><span class='ignore'>.</span> <span class='word'>How</span> <span class='word'>this</span> <span class='word'>concurrency</span> <span class='word'>is</span> <span class='word'>handled</span> <span class='word'>determines</span> <span class='word'>system</span> <span class='word'>behavior</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>two</span> <span class='word'>possibilities</span> <span class='word'>are</span> <span class='word'>implementing</span> <span class='word'>the</span> <span class='word'>CCI</span> <span class='word'>consistency</span> <span class='word'>model</span> <span class='word'>and</span> <span class='word'>a</span> <span class='word'>variant</span> <span class='word'>I</span> <span class='word'>termed</span> <span class='ignore'>`</span><span class='ignore'>`</span><span class='word'>Immediate</span> <span class='word'>Undo</span><span class='ignore'>'</span><span class='ignore'>'</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; <span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>CCI</span> <span class='hword'>Undo</span><span class='ignore'>}</span><br>
		<span class='word'>According</span> <span class='word'>to</span> <span class='word'>CCI</span><span class='ignore'>,</span> <span class='word'>undoing</span> <span class='word'>an</span> <span class='word'>delete</span> <span class='word'>should</span> <span class='word'>lead</span> <span class='word'>the</span> <span class='word'>system</span> <span class='word'>to</span> <span class='word'>behave</span> <span class='word'>as</span> <span class='word'>if</span> <span class='word'>the</span> <span class='word'>delete</span> <span class='word'>never</span> <span class='word'>occurred</span><span class='ignore'>.</span> <span class='word'>So</span><span class='ignore'>,</span> <span class='word'>if</span> <span class='word'>users</span> <span class='word'>1</span> <span class='word'>and</span> <span class='word'>2</span> <span class='word'>concurrently</span> <span class='word'>delete</span> <span class='word'>a</span> <span class='word'>character</span><span class='ignore'>,</span> <span class='word'>then</span> <span class='word'>1</span> <span class='word'>undoes</span> <span class='word'>its</span> <span class='word'>removal</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>expected</span> <span class='word'>result</span> <span class='word'>is</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>system</span> <span class='word'>behaves</span> <span class='word'>as</span> <span class='word'>if</span> <span class='word'>only</span> <span class='word'>the</span> <span class='word'>2's</span> <span class='word'>delete</span> <span class='word'>happened</span><span class='ignore'>.</span> <span class='word'>While</span> <span class='word'>this</span> <span class='word'>sounds</span> <span class='word'>sensible</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>uncomfortable</span> <span class='word'>to</span> <span class='word'>user</span> <span class='word'>1</span><span class='ignore'>:</span> <span class='word'>they</span> <span class='word'>undid</span> <span class='word'>their</span> <span class='word'>deletion</span> <span class='word'>and</span> <span class='word'>expect</span> <span class='word'>the</span> <span class='word'>character</span> <span class='word'>to</span> <span class='word'>return</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>effect</span><span class='ignore'>,</span> <span class='word'>this</span> <span class='word'>consistency</span> <span class='word'>model</span> <span class='word'>requires</span> <span class='word'>full</span> <span class='word'>consensus</span> <span class='word'>between</span> <span class='mathgroup'>$</span><span class='math'>n</span><span class='mathgroup'>$</span> <span class='word'>clients</span> <span class='word'>that</span> <span class='word'>concurrently</span> <span class='word'>deleted</span> <span class='word'>a</span> <span class='word'>character</span> <span class='word'>to</span> <span class='word'>return</span> <span class='word'>it</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; 	<span class='cmd'>\paragraph</span><span class='ignore'>{</span><span class='hword'>Modified</span> <span class='hword'>Links</span><span class='ignore'>}</span><br>
			<span class='word'>While</span> <span class='word'>consensus</span> <span class='word'>is</span> <span class='word'>awkward</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>effectively</span> <span class='word'>implemented</span> <span class='word'>with</span> <span class='word'>counters</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>key</span> <span class='word'>change</span> <span class='word'>is</span> <span class='word'>to</span> <span class='word'>modify</span> <span class='word'>the</span> <span class='ignore'>`</span><span class='word'>deleted</span><span class='ignore'>'</span> <span class='word'>tag</span> <span class='word'>of</span> <span class='word'>links</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>from</span> <span class='word'>boolean</span> <span class='word'>to</span> <span class='word'>integer</span><span class='ignore'>.</span><br>
&nbsp; 	<br>
<span class='envir'>\begin</span><span class='envir'>{lstlisting}</span><span class='option'>[caption={New Type Signature of a Link in the CRDT}, mathescape=true]</span><br>
<span class='ignore'>export</span><span class='ignore'> </span><span class='ignore'>interface</span><span class='ignore'> </span><span class='ignore'>MapEntry</span><span class='ignore'> </span><span class='ignore'>{</span><br>
<span class='ignore'>	</span><span class='ignore'>c</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>string</span><span class='ignore'>,</span><span class='ignore'>&nbsp;  </span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'> </span><span class='ignore'>character</span><br>
<span class='ignore'>	</span><span class='ignore'>n</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>string</span><span class='ignore'>,</span><span class='ignore'>&nbsp;  </span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'> </span><span class='ignore'>next</span><span class='ignore'> </span><span class='ignore'>link</span><br>
<span class='ignore'>	</span><span class='ignore'>d</span><span class='ignore'>?</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>number</span><span class='ignore'>,</span><span class='ignore'>&nbsp; </span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'> </span><span class='ignore'>(</span><span class='ignore'>optional</span><span class='ignore'>)</span><span class='ignore'> </span><span class='ignore'>deleted</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>nonexistant</span><span class='ignore'> </span><span class='ignore'>$</span><span class='ignore'>\Rightarrow</span><span class='ignore'>$</span><span class='ignore'> </span><span class='ignore'>not</span><span class='ignore'> </span><span class='ignore'>deleted</span><br>
<span class='ignore'>	</span><span class='ignore'>v</span><span class='ignore'>?</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>boolean</span><span class='ignore'>&nbsp; </span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'> </span><span class='ignore'>(</span><span class='ignore'>optional</span><span class='ignore'>)</span><span class='ignore'> </span><span class='ignore'>visible</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>nonexistant</span><span class='ignore'> </span><span class='ignore'>$</span><span class='ignore'>\Rightarrow</span><span class='ignore'>$</span><span class='ignore'> </span><span class='ignore'>visible</span><br>
<span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'></span><span class='envir'>{lstlisting}</span><br>
<br>
&nbsp; 	<span class='cmd'>\paragraph</span><span class='ignore'>{</span><span class='hword'>Delete</span><span class='ignore'>,</span> <span class='hword'>Undo</span><span class='ignore'>,</span> <span class='hword'>Redo</span><span class='ignore'>}</span><br>
			<span class='word'>The</span> <span class='word'>first</span> <span class='word'>delete</span> <span class='word'>bundle</span> <span class='word'>can</span> <span class='word'>no</span> <span class='word'>longer</span> <span class='word'>have</span> <span class='word'>the</span> <span class='word'>effect</span> <span class='word'>of</span> <span class='word'>setting</span> <span class='word'>the</span> <span class='word'>boolean</span> <span class='ignore'>`</span><span class='word'>deleted</span><span class='ignore'>'</span> <span class='word'>flag</span><span class='ignore'>.</span> <span class='word'>Instead</span><span class='ignore'>,</span> <span class='word'>on</span> <span class='word'>each</span> <span class='word'>client</span> <span class='word'>it</span> <span class='word'>increments</span> <span class='word'>the</span> <span class='mathgroup'>$</span><span class='math'>d</span><span class='mathgroup'>$</span> <span class='word'>value</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>target</span> <span class='word'>link</span><span class='ignore'>.</span> <span class='word'>A</span> <span class='word'>redo</span> <span class='word'>delete</span> <span class='word'>operation</span> <span class='word'>will</span> <span class='word'>also</span> <span class='word'>increment</span> <span class='word'>the</span> <span class='ignore'>`</span><span class='word'>deleted</span><span class='ignore'>'</span> <span class='word'>value</span> <span class='word'>on</span> <span class='word'>every</span> <span class='word'>client</span><span class='ignore'>.</span><br>
&nbsp; 	<br>
&nbsp; 	<span class='word'>On</span> <span class='word'>the</span> <span class='word'>other</span> <span class='word'>hand</span><span class='ignore'>,</span> <span class='word'>an</span> <span class='word'>undo</span> <span class='word'>delete</span> <span class='word'>operation</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>bundle</span> <span class='word'>containing</span> <span class='word'>only</span> <span class='word'>the</span> <span class='word'>target</span> <span class='word'>ID</span> <span class='word'>to</span> <span class='word'>undo</span> <span class='word'>the</span> <span class='word'>deletion</span> <span class='word'>of</span><span class='ignore'>.</span> <span class='word'>Its</span> <span class='word'>effect</span> <span class='word'>on</span> <span class='word'>any</span> <span class='word'>client</span> <span class='word'>is</span> <span class='word'>to</span> <span class='word'>decrement</span> <span class='word'>the</span> <span class='ignore'>`</span><span class='word'>deleted</span><span class='ignore'>'</span> <span class='word'>value</span><span class='ignore'>.</span><br>
&nbsp; 	<br>
&nbsp; 	<span class='word'>Now</span><span class='ignore'>,</span> <span class='word'>when</span> <span class='word'>the</span> <span class='mathgroup'>$</span><span class='math'>read</span><span class='math'>(</span><span class='math'>)</span><span class='mathgroup'>$</span> <span class='word'>method</span> <span class='word'>is</span> <span class='word'>called</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>CRDT</span><span class='ignore'>,</span> <span class='word'>we</span> <span class='word'>only</span> <span class='word'>retrieve</span> <span class='word'>links</span> <span class='word'>that</span> <span class='word'>satisfy</span><br>
&nbsp; 	<br>
&nbsp; &nbsp; <span class='mathgroup'>\[</span><span class='mathcmd'>\forall</span> <span class='math'>Links</span><span class='mathcmd'>\ </span><span class='math'>l</span><span class='math'>.</span><span class='mathcmd'>\ </span> <span class='math'>(</span><span class='mathcmd'>\lnot</span><span class='mathcmd'>\exists</span> <span class='math'>l.v</span> <span class='mathcmd'>\lor</span> <span class='math'>l.v</span> <span class='math'>=</span> <span class='math'>true</span><span class='math'>)</span> <span class='mathcmd'>\land</span> <span class='math'>(</span><span class='mathcmd'>\lnot</span><span class='mathcmd'>\exists</span> <span class='math'>l.d</span> <span class='mathcmd'>\lor</span> <span class='math'>l.d</span> <span class='math'>=</span> <span class='math'>0</span> <span class='math'>)</span> <span class='mathgroup'>\]</span> <br>
&nbsp; 	<br>
&nbsp; 	<span class='cmd'>\paragraph</span><span class='ignore'>{</span><span class='hword'>Proof</span> <span class='hword'>of</span> <span class='hword'>Commutativity</span> <span class='hword'>of</span> <span class='hword'>Delete</span><span class='ignore'>,</span> <span class='hword'>Undo</span><span class='ignore'>,</span> <span class='hword'>Redo</span><span class='ignore'>}</span><br>
			<span class='word'>We</span> <span class='word'>only</span> <span class='word'>need</span> <span class='word'>to</span> <span class='word'>consider</span> <span class='word'>commutativity</span> <span class='word'>with</span> <span class='word'>other</span> <span class='word'>operations</span> <span class='word'>that</span> <span class='word'>may</span> <span class='word'>operate</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>data</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>and</span> <span class='word'>therefore</span> <span class='word'>conflict</span><span class='ignore'>.</span> <span class='word'>Since</span> <span class='word'>any</span> <span class='word'>given</span> <span class='word'>delete</span><span class='ignore'>,</span> <span class='word'>undo</span><span class='ignore'>,</span> <span class='word'>or</span> <span class='word'>redo</span> <span class='word'>operation</span> <span class='mathgroup'>$</span><span class='math'>op</span><span class='mathgroup'>$</span> <span class='word'>only</span> <span class='word'>affects</span> <span class='word'>the</span> <span class='word'>specific</span> <span class='word'>node</span> <span class='mathgroup'>$</span><span class='math'>node</span><span class='mathgroup'>$</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>linked</span> <span class='word'>list</span> <span class='word'>identified</span> <span class='word'>by</span> <span class='mathgroup'>$</span><span class='math'>op.deleteId</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>only</span> <span class='word'>conflicting</span> <span class='word'>operations</span> <span class='word'>might</span> <span class='word'>be</span> <span class='word'>other</span> <span class='word'>delete</span><span class='ignore'>,</span> <span class='word'>undo</span> <span class='word'>delete</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>redo</span> <span class='word'>delete</span> <span class='word'>operations</span><span class='ignore'>.</span><br>
&nbsp; 	<br>
&nbsp; 	<span class='envir'>\begin</span><span class='envir'>{proof}</span><br>
				<span class='word'>We</span> <span class='word'>treat</span> <span class='word'>delete</span> <span class='word'>and</span> <span class='word'>redo</span> <span class='word'>delete</span> <span class='word'>operations</span> <span class='word'>identically</span><span class='ignore'>,</span> <span class='word'>that</span> <span class='word'>is</span> <span class='word'>having</span> <span class='word'>the</span> <span class='word'>effect</span> <span class='word'>of</span> <span class='word'>incrementing</span> <span class='mathgroup'>$</span><span class='math'>node.d</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <span class='word'>An</span> <span class='word'>undo</span> <span class='word'>delete</span> <span class='word'>has</span> <span class='word'>the</span> <span class='word'>effect</span> <span class='word'>of</span> <span class='word'>decrementing</span> <span class='mathgroup'>$</span><span class='math'>node.d</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <span class='word'>Any</span> <span class='word'>set</span> <span class='word'>of</span> <span class='word'>these</span> <span class='word'>operations</span> <span class='word'>applies</span> <span class='word'>a</span> <span class='word'>sequence</span> <span class='word'>of</span> <span class='mathgroup'>$</span><span class='math'>+</span><span class='math'>1</span><span class='mathgroup'>$</span> <span class='word'>and</span> <span class='mathgroup'>$</span><span class='math'>-</span><span class='math'>1</span><span class='mathgroup'>$</span> <span class='word'>to</span> <span class='mathgroup'>$</span><span class='math'>node.d</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <span class='word'>By</span> <span class='word'>the</span> <span class='word'>commutativity</span> <span class='word'>of</span> <span class='word'>addition</span> <span class='word'>and</span> <span class='word'>subtraction</span><span class='ignore'>,</span> <span class='word'>these</span> <span class='word'>arithmetic</span> <span class='word'>operations</span> <span class='word'>can</span> <span class='word'>occur</span> <span class='word'>in</span> <span class='word'>any</span> <span class='word'>order</span><span class='ignore'>,</span> <span class='word'>so</span> <span class='word'>the</span> <span class='word'>delete</span><span class='ignore'>,</span> <span class='word'>undo</span> <span class='word'>and</span> <span class='word'>redo</span> <span class='word'>operations</span> <span class='word'>can</span> <span class='word'>occur</span> <span class='word'>in</span> <span class='word'>any</span> <span class='word'>order</span><span class='ignore'>.</span><br>
&nbsp; 	<span class='envir'>\end</span><span class='envir'>{proof}</span><br>
&nbsp; 	<br>
&nbsp; 	<span class='cmd'>\paragraph</span><span class='ignore'>{</span><span class='hword'>Cost</span> <span class='hword'>and</span> <span class='hword'>Causality</span><span class='ignore'>}</span><br>
			<span class='word'>TODO</span><br>
&nbsp; 	<span class='word'>talk</span> <span class='word'>about</span> <span class='word'>cost</span> <span class='ignore'>(</span><span class='word'>minimal</span><span class='ignore'>)</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>fact</span> <span class='word'>that</span> <span class='word'>an</span> <span class='word'>undo</span> <span class='word'>that</span> <span class='word'>happened</span> <span class='word'>a</span> <span class='word'>long</span> <span class='word'>time</span> <span class='word'>ago</span> <span class='word'>and</span> <span class='word'>is</span> <span class='word'>no</span> <span class='word'>longer</span> <span class='word'>on</span> <span class='word'>an</span> <span class='word'>operation</span> <span class='word'>stack</span> <span class='word'>has</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>weight</span> <span class='word'>as</span> <span class='word'>one</span> <span class='word'>that</span> <span class='word'>happened</span> <span class='word'>more</span> <span class='word'>recently</span> <span class='word'>and</span> <span class='word'>is</span> <span class='word'>still</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>stack</span><span class='ignore'>(</span><span class='word'>by</span> <span class='mathgroup'>$</span><span class='mathcmd'>\rightarrow</span><span class='mathgroup'>$</span><span class='ignore'>)</span> <span class='ignore'>?</span><span class='ignore'>?</span><span class='ignore'>?</span> <br>
&nbsp; 	<br>
&nbsp; <span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Immediate</span> <span class='hword'>Undo</span><span class='ignore'>}</span><br>
		<span class='word'>The</span> <span class='word'>CCI</span> <span class='word'>Undo</span> <span class='word'>is</span> <span class='word'>awkward</span> <span class='word'>in</span> <span class='word'>that</span> <span class='word'>it</span> <span class='word'>requires</span> <span class='word'>consensus</span> <span class='word'>to</span> <span class='word'>make</span> <span class='word'>concurrently</span> <span class='word'>deleted</span> <span class='word'>characters</span> <span class='word'>reappear</span><span class='ignore'>.</span> <span class='word'>It</span> <span class='word'>would</span> <span class='word'>be</span> <span class='word'>preferable</span> <span class='word'>for</span> <span class='word'>any</span> <span class='word'>user</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>able</span> <span class='word'>to</span> <span class='word'>immediately</span> <span class='word'>undo</span> <span class='word'>a</span> <span class='word'>character</span> <span class='word'>they</span> <span class='word'>may</span> <span class='word'>or</span> <span class='word'>may</span> <span class='word'>not</span> <span class='word'>have</span> <span class='word'>deleted</span> <span class='word'>concurrently</span> <span class='word'>with</span> <span class='word'>another</span> <span class='word'>user</span><span class='ignore'>.</span><br>
&nbsp; <br>
&nbsp; 	<span class='cmd'>\paragraph</span><span class='ignore'>{</span><span class='hword'>Semantics</span><span class='ignore'>}</span><br>
			<span class='word'>To</span> <span class='word'>this</span> <span class='word'>end</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>following</span> <span class='word'>describes</span> <span class='word'>the</span> <span class='word'>desired</span> <span class='word'>semantics</span><span class='ignore'>:</span><br>
&nbsp; 	<br>
&nbsp; 	<span class='word'>In</span> <span class='word'>the</span> <span class='word'>case</span> <span class='word'>of</span> <span class='word'>conflicting</span> <span class='word'>concurrent</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>make-invisible</span><span class='ignore'>}</span> <span class='word'>operations</span> <span class='ignore'>(</span><span class='word'>such</span> <span class='word'>as</span> <span class='word'>delete</span> <span class='word'>or</span> <span class='word'>redo</span> <span class='word'>delete</span><span class='ignore'>)</span> <span class='word'>and</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>make-visible</span><span class='ignore'>}</span> <span class='word'>operations</span> <span class='ignore'>(</span><span class='word'>such</span> <span class='word'>as</span> <span class='word'>undo</span> <span class='word'>delete</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>make-visible</span><span class='ignore'>}</span> <span class='word'>operation</span> <span class='word'>will</span> <span class='word'>take</span> <span class='word'>effect</span><span class='ignore'>.</span><br>
&nbsp; 	<br>
&nbsp; 	<span class='word'>The</span> <span class='word'>follows</span> <span class='word'>the</span> <span class='word'>idea</span> <span class='word'>that</span> <span class='word'>a</span> <span class='word'>user</span> <span class='word'>recalling</span> <span class='word'>a</span> <span class='word'>prior</span> <span class='word'>character</span> <span class='word'>likely</span> <span class='word'>wishes</span> <span class='word'>to</span> <span class='word'>utilize</span> <span class='word'>it</span><span class='ignore'>,</span> <span class='word'>while</span> <span class='word'>a</span> <span class='word'>user</span> <span class='word'>wishing</span> <span class='word'>to</span> <span class='word'>remove</span> <span class='word'>a</span> <span class='word'>character</span> <span class='word'>does</span> <span class='word'>not</span> <span class='word'>care</span> <span class='word'>about</span> <span class='word'>its</span> <span class='word'>presence</span> <span class='word'>or</span> <span class='word'>absence</span><span class='ignore'>.</span> <span class='word'>Note</span> <span class='word'>that</span> <span class='word'>this</span> <span class='word'>effectively</span> <span class='word'>inverts</span> <span class='word'>the</span> <span class='word'>consensus</span> <span class='word'>of</span> <span class='word'>CCI</span> <span class='word'>Undo</span> <span class='word'>to</span> <span class='word'>require</span> <span class='word'>full</span> <span class='word'>concurrent</span> <span class='word'>agreement</span> <span class='word'>to</span> <span class='word'>remove</span> <span class='word'>a</span> <span class='word'>character</span><span class='ignore'>.</span>&nbsp; <span class='ignore'>[</span><span class='word'>talk</span> <span class='word'>about</span> <span class='word'>no</span> <span class='word'>longer</span> <span class='word'>having</span> <span class='word'>the</span> <span class='word'>pitfall</span> <span class='word'>of</span> <span class='word'>losing</span> <span class='word'>an</span> <span class='word'>undo</span><span class='ignore'>/</span><span class='word'>redo</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>op</span> <span class='word'>stack</span> <span class='word'>when</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>overwritten</span><span class='ignore'>]</span><br>
&nbsp; 	<br>
&nbsp; 	<span class='cmd'>\paragraph</span><span class='ignore'>{</span><span class='hword'>Implementation</span><span class='ignore'>}</span><br>
			<span class='word'>In</span> <span class='word'>order</span> <span class='word'>to</span> <span class='word'>support</span> <span class='word'>an</span> <span class='word'>immediate</span> <span class='word'>undo</span> <span class='word'>effectively</span><span class='ignore'>,</span> <span class='word'>we</span> <span class='word'>need</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>able</span> <span class='word'>to</span> <span class='word'>compare</span> <span class='word'>the</span> <span class='ignore'>`</span><span class='ignore'>`</span><span class='word'>time</span><span class='ignore'>'</span><span class='ignore'>'</span> <span class='word'>at</span> <span class='word'>which</span> <span class='word'>a</span> <span class='word'>deletion</span><span class='ignore'>,</span> <span class='word'>undo</span><span class='ignore'>,</span> <span class='word'>or</span> <span class='word'>redo</span> <span class='word'>occurred</span> <span class='word'>in</span> <span class='word'>order</span> <span class='word'>to</span> <span class='word'>detect</span> <span class='word'>concurrency</span><span class='ignore'>.</span> <span class='word'>Vector</span> <span class='word'>clocks</span> <span class='word'>allow</span> <span class='word'>exactly</span> <span class='word'>this</span><span class='ignore'>.</span> <span class='word'>Thus</span><span class='ignore'>,</span> <span class='word'>every</span> <span class='word'>such</span> <span class='word'>operation</span> <span class='word'>needs</span> <span class='word'>to</span> <span class='word'>tag</span> <span class='word'>the</span> <span class='word'>data</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>vector</span> <span class='word'>clock</span> <span class='word'>value</span> <span class='word'>it</span> <span class='word'>occurred</span> <span class='word'>at</span><span class='ignore'>.</span> <span class='word'>Then</span><span class='ignore'>,</span> <span class='word'>when</span> <span class='word'>other</span> <span class='word'>operations</span> <span class='word'>arrive</span> <span class='word'>which</span> <span class='word'>affect</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>data</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>packet's</span> <span class='word'>vector</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>vector</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>compared</span> <span class='word'>and</span> <span class='word'>acted</span> <span class='word'>upon</span><span class='ignore'>.</span><br>
&nbsp; 	<br>
&nbsp; 	<span class='word'>The</span> <span class='word'>required</span> <span class='word'>modification</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>is</span> <span class='word'>that</span> <span class='word'>the</span> <span class='ignore'>`</span><span class='word'>deleted</span><span class='ignore'>'</span> <span class='word'>tag</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>link</span> <span class='mathgroup'>$</span><span class='math'>l.d</span><span class='mathgroup'>$</span> <span class='word'>now</span> <span class='word'>represents</span> <span class='word'>a</span> <span class='word'>pair</span> <span class='ignore'>(</span><span class='mathgroup'>$</span><span class='math'>true</span><span class='math'>/</span><span class='math'>false</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='mathgroup'>$</span><span class='math'>vector</span><span class='mathgroup'>$</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>first</span> <span class='word'>value</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>boolean</span> <span class='word'>for</span> <span class='word'>whether</span> <span class='word'>or</span> <span class='word'>not</span> <span class='word'>the</span> <span class='word'>character</span> <span class='word'>is</span> <span class='word'>deleted</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>second</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>vector</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>packet</span> <span class='word'>that</span> <span class='word'>delivered</span> <span class='word'>the</span> <span class='word'>operation</span> <span class='ignore'>(</span><span class='word'>this</span> <span class='word'>cheats</span> <span class='word'>a</span> <span class='word'>little</span> <span class='word'>and</span> <span class='word'>reaches</span> <span class='word'>across</span> <span class='word'>network</span> <span class='word'>layers</span> <span class='word'>into</span> <span class='word'>the</span> <span class='word'>causal</span> <span class='word'>delivery</span> <span class='word'>mechanism</span> <span class='word'>to</span> <span class='word'>obtain</span> <span class='word'>a</span> <span class='word'>copy</span><span class='ignore'>,</span> <span class='word'>but</span> <span class='word'>is</span> <span class='word'>more</span> <span class='word'>efficient</span> <span class='word'>than</span> <span class='word'>redundantly</span> <span class='word'>sending</span> <span class='word'>the</span> <span class='word'>vector</span> <span class='word'>both</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>bundle</span> <span class='word'>and</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>packet</span> <span class='word'>containing</span> <span class='word'>the</span> <span class='word'>bundle</span><span class='ignore'>)</span><span class='ignore'>.</span><br>
&nbsp; 	<br>
&nbsp; 	<span class='word'>As</span> <span class='word'>before</span><span class='ignore'>,</span> <span class='word'>delete</span><span class='ignore'>,</span> <span class='word'>undo</span> <span class='word'>delete</span> <span class='word'>and</span> <span class='word'>redo</span> <span class='word'>delete</span> <span class='word'>bundles</span> <span class='word'>contain</span> <span class='word'>only</span> <span class='word'>the</span> <span class='word'>identifier</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>link</span> <span class='mathgroup'>$</span><span class='math'>l</span><span class='mathgroup'>$</span> <span class='word'>to</span> <span class='word'>act</span> <span class='word'>upon</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>non-concurrent</span> <span class='word'>cases</span><span class='ignore'>,</span> <span class='word'>that</span> <span class='word'>is</span><span class='ignore'>,</span> <span class='word'>operations</span> <span class='word'>are</span> <span class='word'>causally</span> <span class='word'>dependent</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>latest</span> <span class='word'>operation</span> <span class='word'>is</span> <span class='word'>applied</span> <span class='word'>to</span> <span class='mathgroup'>$</span><span class='math'>l</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <br>
&nbsp; 	<br>
&nbsp; 	<span class='word'>If</span> <span class='word'>a</span> <span class='word'>remote</span> <span class='word'>delete</span> <span class='word'>or</span> <span class='word'>redo</span> <span class='word'>delete</span> <span class='word'>operation</span> <span class='word'>is</span> <span class='word'>concurrent</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>vector</span> <span class='word'>stored</span> <span class='word'>in</span> <span class='mathgroup'>$</span><span class='math'>l.d</span><span class='math'>[</span><span class='math'>1</span><span class='math'>]</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>do</span> <span class='word'>nothing</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>ensures</span> <span class='word'>that</span> <span class='word'>a</span> <span class='word'>local</span> <span class='word'>make-visible</span> <span class='word'>operation</span> <span class='word'>retains</span> <span class='word'>its</span> <span class='word'>effect</span> <span class='ignore'>(</span><span class='word'>e.g</span><span class='ignore'>.</span> <span class='word'>a</span> <span class='word'>undo</span> <span class='word'>delete</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>Otherwise</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>make-invisible</span> <span class='word'>operation</span> <span class='word'>is</span> <span class='word'>already</span> <span class='word'>in</span> <span class='word'>effect</span> <span class='word'>and</span> <span class='mathgroup'>$</span><span class='math'>l.d</span><span class='math'>[</span><span class='math'>0</span><span class='math'>]</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>already</span> <span class='mathgroup'>$</span><span class='math'>true</span><span class='mathgroup'>$</span><span class='ignore'>.</span><br>
&nbsp; 	<br>
&nbsp; 	<span class='word'>Similarly</span><span class='ignore'>,</span> <span class='word'>if</span> <span class='word'>a</span> <span class='word'>remote</span> <span class='word'>undo</span> <span class='word'>delete</span> <span class='word'>operation</span> <span class='word'>is</span> <span class='word'>concurrent</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>vector</span> <span class='word'>stored</span> <span class='word'>in</span> <span class='mathgroup'>$</span><span class='math'>l.d</span><span class='math'>[</span><span class='math'>1</span><span class='math'>]</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>always</span> <span class='word'>set</span> <span class='mathgroup'>$</span><span class='math'>l.d</span><span class='mathgroup'>$</span> <span class='word'>to</span> <span class='mathgroup'>$</span><span class='math'>false</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>so</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>make-visible</span> <span class='word'>operation</span> <span class='word'>takes</span> <span class='word'>effect</span><span class='ignore'>.</span><br>
&nbsp; 	<br>
&nbsp; 	<span class='word'>In</span> <span class='word'>any</span> <span class='word'>case</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>vector</span> <span class='word'>stored</span> <span class='word'>at</span> <span class='mathgroup'>$</span><span class='math'>l.d</span><span class='math'>[</span><span class='math'>1</span><span class='math'>]</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>updated</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>current</span> <span class='word'>client</span> <span class='word'>vector</span> <span class='word'>clock</span><span class='ignore'>.</span><br>
&nbsp; 	<br>
&nbsp; 	<span class='word'>When</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='mathgroup'>$</span><span class='math'>read</span><span class='math'>(</span><span class='math'>)</span><span class='mathgroup'>$</span> <span class='word'>method</span> <span class='word'>is</span> <span class='word'>called</span><span class='ignore'>,</span> <span class='word'>we</span> <span class='word'>only</span> <span class='word'>retrieve</span> <span class='word'>links</span> <span class='word'>that</span> <span class='word'>satisfy</span><br>
&nbsp; 	<br>
&nbsp; &nbsp; 	<span class='mathgroup'>\[</span><span class='mathcmd'>\forall</span> <span class='math'>Links</span><span class='mathcmd'>\ </span><span class='math'>l</span><span class='math'>.</span><span class='mathcmd'>\ </span> <span class='math'>(</span><span class='mathcmd'>\lnot</span><span class='mathcmd'>\exists</span> <span class='math'>l.v</span> <span class='mathcmd'>\lor</span> <span class='math'>l.v</span> <span class='math'>=</span> <span class='math'>true</span><span class='math'>)</span> <span class='mathcmd'>\land</span> <span class='math'>(</span><span class='mathcmd'>\lnot</span><span class='mathcmd'>\exists</span> <span class='math'>l.d</span> <span class='mathcmd'>\lor</span> <span class='mathcmd'>\lnot</span> <span class='math'>l.d</span><span class='math'>[</span><span class='math'>0</span><span class='math'>]</span><span class='math'>)</span> <span class='mathgroup'>\]</span> <br>
&nbsp; &nbsp; &nbsp; <br>
&nbsp; 	<br>
&nbsp; 	<span class='cmd'>\paragraph</span><span class='ignore'>{</span><span class='hword'>Proof</span> <span class='hword'>of</span> <span class='hword'>Commutativity</span><span class='ignore'>}</span><br>
			<br>
&nbsp; 	<span class='word'>We</span> <span class='word'>only</span> <span class='word'>need</span> <span class='word'>to</span> <span class='word'>consider</span> <span class='word'>commutativity</span> <span class='word'>with</span> <span class='word'>other</span> <span class='word'>operations</span> <span class='word'>that</span> <span class='word'>may</span> <span class='word'>operate</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>data</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>and</span> <span class='word'>therefore</span> <span class='word'>conflict</span><span class='ignore'>.</span> <span class='word'>Since</span> <span class='word'>any</span> <span class='word'>given</span> <span class='word'>delete</span><span class='ignore'>,</span> <span class='word'>undo</span><span class='ignore'>,</span> <span class='word'>or</span> <span class='word'>redo</span> <span class='word'>operation</span> <span class='mathgroup'>$</span><span class='math'>op</span><span class='mathgroup'>$</span> <span class='word'>only</span> <span class='word'>affects</span> <span class='word'>the</span> <span class='word'>specific</span> <span class='word'>node</span> <span class='mathgroup'>$</span><span class='math'>node</span><span class='mathgroup'>$</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>linked</span> <span class='word'>list</span> <span class='word'>identified</span> <span class='word'>by</span> <span class='mathgroup'>$</span><span class='math'>op.deleteId</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>only</span> <span class='word'>conflicting</span> <span class='word'>operations</span> <span class='word'>might</span> <span class='word'>be</span> <span class='word'>other</span> <span class='word'>delete</span><span class='ignore'>,</span> <span class='word'>undo</span> <span class='word'>delete</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>redo</span> <span class='word'>delete</span> <span class='word'>operations</span><span class='ignore'>.</span><br>
&nbsp; &nbsp; &nbsp; <br>
&nbsp; 	<span class='envir'>\begin</span><span class='envir'>{proof}</span><br>
				<span class='word'>We</span> <span class='word'>treat</span> <span class='word'>delete</span> <span class='word'>and</span> <span class='word'>redo</span> <span class='word'>delete</span> <span class='word'>operations</span> <span class='word'>identically</span><span class='ignore'>.</span> <span class='word'>Any</span> <span class='word'>non-concurrent</span> <span class='word'>modifications</span> <span class='word'>are</span> <span class='word'>not</span> <span class='word'>considered</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>latest</span> <span class='word'>causally</span> <span class='word'>dependent</span> <span class='word'>operation</span> <span class='word'>is</span> <span class='word'>defined</span> <span class='word'>to</span> <span class='word'>take</span> <span class='word'>effect</span><span class='ignore'>.</span><br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <span class='word'>Take</span> <span class='word'>a</span> <span class='word'>system</span> <span class='word'>which</span> <span class='word'>begins</span> <span class='word'>in</span> <span class='word'>quiescence</span><span class='ignore'>,</span> <span class='word'>submits</span> <span class='word'>concurrent</span> <span class='word'>operations</span> <span class='word'>and</span> <span class='word'>returns</span> <span class='word'>to</span> <span class='word'>quiescence</span><span class='ignore'>.</span> <span class='word'>There</span> <span class='word'>are</span> <span class='word'>three</span> <span class='word'>possible</span> <span class='word'>cases</span><span class='ignore'>:</span> <span class='word'>delete-delete</span><span class='ignore'>,</span> <span class='word'>delete</span> <span class='word'>and</span> <span class='word'>delete-undo</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>undo-undo</span><span class='ignore'>.</span><br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <span class='word'>In</span> <span class='word'>the</span> <span class='word'>delete-delete</span> <span class='word'>scenario</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>operations</span> <span class='word'>are</span> <span class='word'>idempotent</span><span class='ignore'>:</span> <span class='word'>both</span> <span class='word'>set</span> <span class='mathgroup'>$</span><span class='math'>node.d</span><span class='math'>[</span><span class='math'>0</span><span class='math'>]</span><span class='mathgroup'>$</span> <span class='word'>to</span> <span class='mathgroup'>$</span><span class='math'>true</span><span class='mathgroup'>$</span> <span class='word'>and</span> <span class='mathgroup'>$</span><span class='math'>node.d</span><span class='math'>[</span><span class='math'>1</span><span class='math'>]</span><span class='mathgroup'>$</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>merged</span> <span class='word'>vectors</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>two</span> <span class='word'>operations</span><span class='ignore'>.</span> <span class='word'>Thus</span> <span class='word'>on</span> <span class='word'>any</span> <span class='word'>client</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>target</span> <span class='word'>node</span> <span class='word'>is</span> <span class='word'>no</span> <span class='word'>longer</span> <span class='word'>visible</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>undo-undo</span> <span class='word'>case</span> <span class='word'>is</span> <span class='word'>exactly</span> <span class='word'>analogous</span> <span class='word'>except</span> <span class='mathgroup'>$</span><span class='math'>node.d</span><span class='math'>[</span><span class='math'>0</span><span class='math'>]</span> <span class='math'>=</span> <span class='math'>false</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <span class='word'>In</span> <span class='word'>the</span> <span class='word'>delete</span><span class='ignore'>,</span> <span class='word'>delete-undo</span> <span class='word'>case</span> <span class='ignore'>(</span><span class='word'>which</span> <span class='word'>is</span> <span class='word'>one</span> <span class='word'>client</span> <span class='word'>deletes</span> <span class='word'>while</span> <span class='word'>another</span> <span class='word'>deletes</span> <span class='word'>then</span> <span class='word'>undoes</span> <span class='word'>immediately</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>any</span> <span class='word'>client</span> <span class='word'>receiving</span> <span class='word'>a</span> <span class='word'>single</span> <span class='word'>delete</span> <span class='mathgroup'>$</span><span class='math'>op</span><span class='math'>_</span><span class='ignore'>{</span><span class='math'>d</span><span class='math'>_</span><span class='math'>1</span><span class='ignore'>}</span><span class='mathgroup'>$</span> <span class='word'>first</span> <span class='word'>will</span> <span class='word'>set</span> <span class='mathgroup'>$</span><span class='math'>node.d</span><span class='math'>[</span><span class='math'>0</span><span class='math'>]</span> <span class='math'>=</span> <span class='math'>true</span><span class='mathgroup'>$</span> <span class='word'>and</span> <span class='word'>record</span> <span class='word'>the</span> <span class='word'>current</span> <span class='word'>vector</span> <span class='word'>in</span> <span class='mathgroup'>$</span><span class='math'>node.d</span><span class='math'>[</span><span class='math'>1</span><span class='math'>]</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <span class='word'>On</span> <span class='word'>delivery</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>concurrent</span> <span class='word'>delete</span> <span class='mathgroup'>$</span><span class='math'>op</span><span class='math'>_</span><span class='ignore'>{</span><span class='math'>d</span><span class='math'>_</span><span class='math'>2</span><span class='ignore'>}</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>only</span> <span class='word'>the</span> <span class='word'>vector</span> <span class='word'>at</span> <span class='mathgroup'>$</span><span class='math'>node.d</span><span class='math'>[</span><span class='math'>1</span><span class='math'>]</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>updated</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>node</span> <span class='word'>is</span> <span class='word'>already</span> <span class='word'>marked</span> <span class='word'>as</span> <span class='word'>deleted</span><span class='ignore'>.</span> <span class='word'>Then</span><span class='ignore'>,</span> <span class='word'>undo</span> <span class='mathgroup'>$</span><span class='math'>op</span><span class='math'>_</span><span class='ignore'>{</span><span class='math'>undo</span><span class='math'>_</span><span class='math'>2</span><span class='ignore'>}</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>since</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>a</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>make-visible</span><span class='ignore'>}</span> <span class='word'>operation</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>determined</span> <span class='word'>to</span> <span class='word'>concurrent</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>merged</span> <span class='word'>vector</span> <span class='word'>stored</span> <span class='word'>at</span> <span class='mathgroup'>$</span><span class='math'>node.d</span><span class='math'>[</span><span class='math'>1</span><span class='math'>]</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>takes</span> <span class='word'>effect</span> <span class='word'>and</span> <span class='mathgroup'>$</span><span class='math'>node.d</span><span class='math'>[</span><span class='math'>0</span><span class='math'>]</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>set</span> <span class='word'>to</span> <span class='mathgroup'>$</span><span class='math'>false</span><span class='mathgroup'>$</span><span class='ignore'>.</span> <span class='word'>If</span> <span class='mathgroup'>$</span><span class='math'>op</span><span class='math'>_</span><span class='ignore'>{</span><span class='math'>d</span><span class='math'>_</span><span class='math'>2</span><span class='ignore'>}</span><span class='mathgroup'>$</span> <span class='word'>were</span> <span class='word'>delivered</span> <span class='word'>before</span> <span class='mathgroup'>$</span><span class='math'>op</span><span class='math'>_</span><span class='ignore'>{</span><span class='math'>d</span><span class='math'>_</span><span class='math'>1</span><span class='ignore'>}</span><span class='mathgroup'>$</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>would</span> <span class='word'>occur</span><span class='ignore'>.</span> <span class='word'>Lastly</span><span class='ignore'>,</span> <span class='word'>if</span> <span class='word'>the</span> <span class='word'>first</span> <span class='word'>arrivals</span> <span class='word'>are</span> <span class='mathgroup'>$</span><span class='math'>op</span><span class='math'>_</span><span class='ignore'>{</span><span class='math'>d</span><span class='math'>_</span><span class='math'>2</span><span class='ignore'>}</span><span class='mathgroup'>$</span> <span class='word'>followed</span> <span class='word'>by</span> <span class='mathgroup'>$</span><span class='math'>undo</span><span class='math'>_</span><span class='ignore'>{</span><span class='math'>d</span><span class='math'>_</span><span class='math'>2</span><span class='ignore'>}</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>undo</span> <span class='word'>takes</span> <span class='word'>effect</span> <span class='word'>and</span> <span class='mathgroup'>$</span><span class='math'>node.d</span><span class='math'>[</span><span class='math'>0</span><span class='math'>]</span> <span class='math'>=</span> <span class='math'>false</span><span class='mathgroup'>$</span> <span class='word'>and</span> <span class='mathgroup'>$</span><span class='math'>node.d</span><span class='math'>[</span><span class='math'>1</span><span class='math'>]</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>set</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>merged</span> <span class='word'>vector</span><span class='ignore'>.</span> <span class='word'>On</span> <span class='word'>arrival</span> <span class='word'>of</span> <span class='mathgroup'>$</span><span class='math'>op</span><span class='math'>_</span><span class='ignore'>{</span><span class='math'>d</span><span class='math'>_</span><span class='math'>1</span><span class='ignore'>}</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>since</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>concurrent</span> <span class='word'>with</span> <span class='mathgroup'>$</span><span class='math'>node.d</span><span class='math'>[</span><span class='math'>1</span><span class='math'>]</span><span class='mathgroup'>$</span> <span class='word'>and</span> <span class='word'>a</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>make-invisible</span><span class='ignore'>}</span> <span class='word'>operation</span> <span class='word'>taking</span> <span class='word'>effect</span> <span class='word'>against</span> <span class='word'>a</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>make-visible</span><span class='ignore'>}</span> <span class='word'>operation</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>ignored</span><span class='ignore'>.</span> <span class='word'>Thus</span><span class='ignore'>,</span> <span class='word'>in</span> <span class='word'>any</span> <span class='word'>case</span> <span class='word'>the</span> <span class='word'>clients</span> <span class='word'>resolve</span> <span class='mathgroup'>$</span><span class='math'>node.d</span><span class='math'>[</span><span class='math'>0</span><span class='math'>]</span> <span class='math'>=</span> <span class='math'>false</span><span class='mathgroup'>$</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>node</span> <span class='word'>is</span> <span class='word'>visible</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>stored</span> <span class='word'>vector</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>result</span> <span class='word'>of</span> <span class='word'>merging</span> <span class='word'>the</span> <span class='word'>vectors</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>three</span> <span class='word'>operations</span> <span class='word'>which</span> <span class='word'>may</span> <span class='word'>be</span> <span class='word'>done</span> <span class='word'>in</span> <span class='word'>any</span> <span class='word'>order</span><span class='ignore'>,</span> <span class='word'>thus</span> <span class='word'>equivalent</span> <span class='word'>in</span> <span class='word'>any</span> <span class='word'>case</span><span class='ignore'>.</span><br>
&nbsp; &nbsp; <br>
&nbsp; 	<span class='envir'>\end</span><span class='envir'>{proof}</span><br>
&nbsp; 	<br>
&nbsp; 	<span class='cmd'>\paragraph</span><span class='ignore'>{</span><span class='hword'>Cost</span><span class='ignore'>}</span><br>
			<span class='word'>Storing</span> <span class='word'>a</span> <span class='word'>vector</span> <span class='word'>with</span> <span class='word'>every</span> <span class='word'>character</span> <span class='word'>that</span> <span class='word'>at</span> <span class='word'>one</span> <span class='word'>point</span> <span class='word'>was</span> <span class='word'>deleted</span> <span class='word'>can</span> <span class='word'>become</span> <span class='word'>quite</span> <span class='word'>expensive</span><span class='ignore'>.</span> <span class='word'>Vector</span> <span class='word'>clocks</span> <span class='word'>are</span> <span class='mathgroup'>$</span><span class='math'>O</span><span class='math'>(</span><span class='math'>n</span><span class='math'>*</span><span class='math'>log</span><span class='math'>(</span><span class='math'>k</span><span class='math'>)</span><span class='math'>)</span><span class='mathgroup'>$</span><span class='ignore'>,</span> <span class='word'>where</span> <span class='mathgroup'>$</span><span class='math'>n</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>clients</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>and</span> <span class='mathgroup'>$</span><span class='math'>k</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>decimal</span> <span class='word'>length</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>longest</span> <span class='word'>sequence</span> <span class='word'>number</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>vector</span><span class='ignore'>.</span><br>
&nbsp; 	<span class='ignore'>[</span><span class='word'>TODO</span> <span class='word'>is</span> <span class='word'>this</span> <span class='mathgroup'>$</span><span class='math'>\Theta</span><span class='mathgroup'>$</span> <span class='word'>instead</span> <span class='word'>of</span> <span class='mathgroup'>$</span><span class='math'>O</span><span class='mathgroup'>$</span><span class='ignore'>?</span> <span class='word'>Problem</span> <span class='word'>is</span> <span class='mathgroup'>$</span><span class='math'>k</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>an</span> <span class='word'>upper</span> <span class='word'>bound</span><span class='ignore'>!</span><span class='ignore'>]</span><br>
&nbsp; 	<br>
&nbsp; 	<span class='word'>The</span> <span class='word'>worst</span> <span class='word'>case</span> <span class='word'>space</span> <span class='word'>complexity</span> <span class='word'>of</span> <span class='word'>implementing</span> <span class='word'>Immediate</span> <span class='word'>Undo</span> <span class='word'>is</span> <span class='word'>thus</span> <span class='mathgroup'>$</span><span class='math'>O</span><span class='math'>(</span><span class='math'>m</span><span class='math'>*</span><span class='math'>n</span><span class='math'>*</span><span class='math'>log</span><span class='math'>(</span><span class='math'>k</span><span class='math'>)</span><span class='math'>*</span><span class='math'>log</span><span class='math'>(</span><span class='math'>m</span><span class='math'>)</span><span class='math'>)</span><span class='mathgroup'>$</span> <span class='word'>where</span> <span class='mathgroup'>$</span><span class='math'>m</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>characters</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>and</span> <span class='word'>the</span> <span class='mathgroup'>$</span><span class='math'>log</span><span class='math'>(</span><span class='math'>m</span><span class='math'>)</span><span class='mathgroup'>$</span> <span class='word'>term</span> <span class='word'>represents</span> <span class='word'>the</span> <span class='word'>cost</span> <span class='word'>of</span> <span class='word'>character</span> <span class='word'>identifiers</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>could</span> <span class='word'>in</span> <span class='word'>some</span> <span class='word'>cases</span> <span class='word'>become</span> <span class='word'>prohibitive</span><span class='ignore'>.</span><br>
&nbsp; 	<br>
&nbsp; 	<span class='ignore'>[</span><span class='word'>EXPERIMENT</span> <span class='word'>NEEDED</span><span class='ignore'>]</span><br>
&nbsp; 	<br>
&nbsp; 	<br>
&nbsp; 	<br>
&nbsp; 	<br>
&nbsp; <br>
<br>
<br>
<span class='cmd'>\chapter</span><span class='ignore'>{</span><span class='hword'>Evaluation</span><span class='ignore'>}</span><br>
	<span class='word'>This</span> <span class='word'>chapter</span> <span class='word'>aims</span> <span class='word'>to</span> <span class='word'>analyze</span> <span class='word'>the</span> <span class='word'>project's</span> <span class='word'>success</span> <span class='word'>in</span> <span class='word'>terms</span> <span class='word'>of</span> <span class='word'>meeting</span> <span class='word'>the</span> <span class='word'>proposed</span> <span class='word'>goals</span><span class='ignore'>.</span> <span class='word'>First</span><br>
<br>
	<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Overall</span> <span class='hword'>Results</span><span class='ignore'>}</span><br>
	<br>
	<span class='word'>The</span> <span class='word'>project</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>described</span> <span class='word'>as</span> <span class='word'>successful</span> <span class='word'>if</span> <span class='word'>the</span> <span class='word'>objectives</span> <span class='word'>stated</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>proposal</span> <span class='word'>are</span> <span class='word'>met</span><span class='ignore'>.</span> <span class='word'>These</span> <span class='word'>are</span> <span class='word'>described</span> <span class='word'>below</span> <span class='word'>along</span> <span class='word'>with</span> <span class='word'>brief</span> <span class='word'>summaries</span> <span class='word'>and</span> <span class='word'>references</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>work</span> <span class='word'>taken</span> <span class='word'>to</span> <span class='word'>complete</span> <span class='word'>them</span><span class='ignore'>.</span><br>
	<br>
	<span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Success</span> <span class='word'>Criterion</span> <span class='word'>1</span><span class='ignore'>:</span><span class='ignore'>}</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>Implement</span> <span class='word'>a</span> <span class='word'>concurrent</span><span class='ignore'>,</span> <span class='word'>distributed</span> <span class='word'>text</span> <span class='word'>editor</span> <span class='word'>based</span> <span class='word'>on</span> <span class='word'>CRDTs</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
	<br>
	<span class='word'>I</span> <span class='word'>can</span> <span class='word'>qualitatively</span> <span class='word'>assert</span> <span class='word'>that</span> <span class='word'>this</span> <span class='word'>first</span> <span class='word'>goal</span> <span class='word'>has</span> <span class='word'>been</span> <span class='word'>completed</span><span class='ignore'>.</span> <span class='word'>Section</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span> <span class='word'>outlines</span> <span class='word'>the</span> <span class='word'>components</span> <span class='word'>needed</span> <span class='word'>and</span> <span class='word'>steps</span> <span class='word'>taken</span> <span class='word'>to</span> <span class='word'>create</span> <span class='word'>a</span> <span class='word'>distributed</span> <span class='word'>text</span> <span class='word'>editor</span> <span class='word'>based</span> <span class='word'>on</span> <span class='word'>CRDTs</span> <span class='word'>and</span> <span class='word'>connected</span> <span class='word'>by</span> <span class='word'>a</span> <span class='word'>network</span> <span class='word'>simulation</span><span class='ignore'>.</span> <span class='word'>Though</span> <span class='word'>the</span> <span class='word'>primary</span> <span class='word'>use</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>editor</span> <span class='word'>is</span> <span class='word'>to</span> <span class='word'>gather</span> <span class='word'>data</span> <span class='word'>via</span> <span class='word'>programmatically</span> <span class='word'>predefined</span> <span class='word'>experiments</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>can</span> <span class='word'>also</span> <span class='word'>be</span> <span class='word'>used</span> <span class='word'>manually</span> <span class='word'>via</span> <span class='word'>the</span> <span class='word'>user</span> <span class='word'>interface</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>feature</span> <span class='word'>is</span> <span class='word'>counted</span> <span class='word'>towards</span> <span class='word'>fulfilling</span> <span class='word'>success</span> <span class='word'>criterion</span> <span class='word'>1</span><span class='ignore'>.</span><br>
	<br>
	<span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Success</span> <span class='word'>Criterion</span> <span class='word'>2</span><span class='ignore'>:</span><span class='ignore'>}</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>Pass</span> <span class='word'>correctness</span> <span class='word'>tests</span> <span class='word'>for</span> <span class='word'>this</span> <span class='word'>CRDT</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
	<br>
	<span class='word'>The</span> <span class='word'>key</span> <span class='word'>property</span> <span class='word'>of</span> <span class='word'>concurrent</span><span class='ignore'>,</span> <span class='word'>distributed</span> <span class='word'>text</span> <span class='word'>editing</span> <span class='word'>is</span> <span class='word'>eventual</span> <span class='word'>convergence</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>data</span><span class='ignore'>.</span> <span class='word'>To</span> <span class='word'>this</span> <span class='word'>end</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>second</span> <span class='word'>success</span> <span class='word'>criterion</span> <span class='word'>aims</span> <span class='word'>to</span> <span class='word'>ensure</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>implementation</span> <span class='word'>provides</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>guarantees</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>theory</span><span class='ignore'>.</span> <span class='word'>Unit</span> <span class='word'>testing</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>helped</span> <span class='word'>find</span> <span class='word'>and</span> <span class='word'>eliminate</span> <span class='word'>bugs</span> <span class='word'>that</span> <span class='word'>broke</span> <span class='word'>these</span> <span class='word'>guarantees</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>testing</span> <span class='word'>results</span> <span class='word'>are</span> <span class='word'>described</span> <span class='word'>more</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>following</span> <span class='word'>section</span><span class='ignore'>.</span><br>
	<br>
<br>
	<span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Success</span> <span class='word'>Criterion</span> <span class='word'>3</span><span class='ignore'>:</span><span class='ignore'>}</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>Obtain</span> <span class='word'>and</span> <span class='word'>compare</span> <span class='word'>quantitative</span> <span class='word'>results</span> <span class='word'>from</span> <span class='word'>ShareJS</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>based</span> <span class='word'>systems</span><span class='ignore'>}</span><br>
	<br>
	<span class='word'>This</span> <span class='word'>criterion</span> <span class='word'>was</span> <span class='word'>intentionally</span> <span class='word'>vague</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>proposal</span> <span class='word'>to</span> <span class='word'>allow</span> <span class='word'>maximum</span> <span class='word'>flexibility</span> <span class='word'>during</span> <span class='word'>analysis</span><span class='ignore'>.</span> <span class='word'>Beyond</span> <span class='word'>the</span> <span class='word'>basic</span> <span class='word'>implementation</span> <span class='word'>that</span> <span class='word'>will</span> <span class='word'>be</span> <span class='word'>analyzed</span><span class='ignore'>,</span> <span class='word'>various</span> <span class='word'>optimization</span> <span class='word'>possibilities</span> <span class='ignore'>(</span><span class='word'>see</span> <span class='word'>sections</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span> <span class='word'>and</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span><span class='ignore'>]</span><span class='ignore'>)</span> <span class='word'>were</span> <span class='word'>revealed</span> <span class='word'>while</span> <span class='word'>implementing</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>simulation</span> <span class='word'>underlying</span> <span class='word'>it</span><span class='ignore'>.</span> <span class='word'>These</span> <span class='word'>were</span> <span class='word'>not</span> <span class='word'>known</span> <span class='word'>during</span> <span class='word'>the</span> <span class='word'>proposal</span> <span class='word'>stages</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>project</span> <span class='word'>but</span> <span class='word'>fall</span> <span class='word'>under</span> <span class='word'>the</span> <span class='word'>umbrella</span> <span class='word'>of</span> <span class='word'>criterion</span> <span class='word'>three</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>bulk</span> <span class='word'>of</span> <span class='word'>this</span> <span class='word'>chapter</span> <span class='word'>will</span> <span class='word'>focus</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>results</span> <span class='word'>obtained</span> <span class='word'>by</span> <span class='word'>experimenting</span> <span class='word'>on</span> <span class='word'>both</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>and</span> <span class='word'>ShareJS</span> <span class='word'>based</span> <span class='word'>systems</span><span class='ignore'>,</span> <span class='word'>with</span> <span class='word'>and</span> <span class='word'>without</span> <span class='word'>optimizations</span><span class='ignore'>.</span><br>
	<span class='ignore'>[</span><span class='word'>this</span> <span class='word'>doesn't</span> <span class='word'>flow</span> <span class='word'>very</span> <span class='word'>well</span><span class='ignore'>.</span><span class='ignore'>.</span><span class='ignore'>.</span><span class='ignore'>]</span><br>
	<br>
	<br>
	<br>
	<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Testing</span> <span class='hword'>the</span> <span class='hword'>CRDT</span><span class='ignore'>}</span><br>
	<br>
	<span class='word'>The</span> <span class='word'>testing</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>core</span> <span class='word'>CRDT</span> <span class='word'>used</span> <span class='word'>a</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>black-box</span> <span class='word'>testing</span><span class='ignore'>}</span> <span class='word'>approach</span><span class='ignore'>~</span><span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>Patton</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>Unit</span> <span class='word'>tests</span> <span class='word'>were</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>interface</span> <span class='word'>provided</span> <span class='word'>by</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>without</span> <span class='word'>need</span> <span class='word'>for</span> <span class='word'>knowledge</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>internals</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>meant</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>itself</span> <span class='word'>could</span> <span class='word'>be</span> <span class='word'>implemented</span> <span class='word'>using</span> <span class='word'>a</span> <span class='word'>linked</span> <span class='word'>list</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>linked</span> <span class='word'>list</span> <span class='word'>within</span> <span class='word'>a</span> <span class='word'>hash</span> <span class='word'>table</span><span class='ignore'>,</span> <span class='word'>or</span> <span class='word'>in</span> <span class='word'>fact</span> <span class='word'>a</span> <span class='word'>completely</span> <span class='word'>different</span> <span class='word'>CRDT</span> <span class='word'>providing</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>interface</span> <span class='word'>described</span> <span class='word'>in</span> <span class='ignore'>[</span><span class='word'>section</span> <span class='word'>ref</span> <span class='word'>TODO</span><span class='ignore'>]</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>general</span><span class='ignore'>,</span> <span class='word'>insert</span> <span class='word'>and</span> <span class='word'>delete</span> <span class='word'>operations</span> <span class='word'>were</span> <span class='word'>applied</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>CRDT</span> <span class='word'>in</span> <span class='word'>different</span> <span class='word'>orders</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>every</span> <span class='word'>order</span> <span class='word'>needed</span> <span class='word'>to</span> <span class='word'>produce</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>resulting</span> <span class='word'>string</span> <span class='word'>from</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>CRDT.read</span><span class='ignore'>(</span><span class='ignore'>)</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
	<br>
	<span class='word'>The</span> <span class='word'>Typescript</span> <span class='word'>unit</span> <span class='word'>testing</span> <span class='word'>library</span> <span class='word'>tsUnit</span><span class='ignore'>~</span><span class='cmd'>\footnote</span><span class='ignore'>{</span><span class='oword'>\url</span><span class='ignore'>{</span><span class='ignore'>https</span><span class='ignore'>:</span><span class='ignore'>/</span><span class='ignore'>/</span><span class='ignore'>github.com</span><span class='ignore'>/</span><span class='ignore'>Steve-Fenton</span><span class='ignore'>/</span><span class='ignore'>tsUnit</span><span class='ignore'>}</span><span class='ignore'>}</span> <span class='word'>provided</span> <span class='word'>the</span> <span class='word'>framework</span> <span class='word'>used</span> <span class='word'>in</span> <span class='word'>this</span> <span class='word'>process</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>testing</span> <span class='word'>output</span> <span class='word'>is</span> <span class='word'>shown</span> <span class='word'>below</span> <span class='word'>in</span> <span class='word'>Figure</span><span class='ignore'>~</span><span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>unittests</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
<br>
	<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[htb]</span><br>
	<span class='exclcmd'>\centering</span><br>
	<span class='exclcmd'>\includegraphics</span><span class='ignore'>{</span><span class='ignore'>figs</span><span class='ignore'>/</span><span class='ignore'>unittests.png</span><span class='ignore'>}</span><br>
	<span class='cmd'>\caption</span><span class='option'>[]</span><span class='ignore'>{</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>unittests</span><span class='ignore'>}</span><br>
	<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
	<br>
	<br>
	<br>
	<br>
	<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Quantitative</span> <span class='hword'>Analysis</span><span class='ignore'>}</span><br>
	<br>
&nbsp; <span class='word'>Begin</span> <span class='word'>by</span> <span class='word'>empirically</span> <span class='word'>confirming</span> <span class='word'>the</span> <span class='word'>predictions</span> <span class='word'>made</span> <span class='word'>before</span><span class='ignore'>.</span><span class='ignore'>.</span><span class='ignore'>.</span> <br>
&nbsp; <br>
&nbsp; <span class='word'>Axes</span> <span class='word'>of</span> <span class='word'>comparison</span><span class='ignore'>:</span> <span class='word'>memory</span><span class='ignore'>,</span> <span class='word'>CPU</span><span class='ignore'>,</span> <span class='word'>network</span><span class='ignore'>,</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>users</span><span class='ignore'>,</span> <span class='word'>concurrency</span><br>
&nbsp; 	<span class='word'>Network</span><span class='ignore'>:</span> <span class='word'>Latency</span><span class='ignore'>,</span> <span class='word'>packet</span> <span class='word'>size</span><span class='ignore'>,</span> <span class='word'>packet</span> <span class='word'>quantity</span><span class='ignore'>,</span> <span class='word'>cost</span> <span class='word'>of</span> <span class='word'>state</span> <span class='word'>replay</span><br>
&nbsp; 	<span class='word'>CPU</span><span class='ignore'>:</span> <span class='word'>Cost</span> <span class='word'>of</span> <span class='word'>integrating</span> <span class='word'>remote</span> <span class='word'>changes</span> <span class='word'>and</span> <span class='word'>cost</span> <span class='word'>of</span> <span class='word'>generating</span> <span class='word'>local</span> <span class='word'>changes</span> <span class='word'>and</span> <span class='word'>sending</span> <span class='word'>them</span><span class='ignore'>.</span><span class='ignore'>.</span><span class='ignore'>.</span> <span class='word'>how</span> <span class='word'>to</span> <span class='word'>deal</span> <span class='word'>with</span> <span class='word'>server</span><br>
&nbsp; 	<br>
&nbsp; <br>
&nbsp; 	<br>
&nbsp; <span class='word'>Lastly</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>real</span> <span class='word'>world</span> <span class='word'>simulation</span> <span class='word'>based</span> <span class='word'>on</span> <span class='word'>user</span> <span class='word'>interactions</span> <span class='word'>with</span> <span class='word'>wikipedia</span><br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <span class='word'>Experiments</span><br>
&nbsp; 	<span class='word'>ShareJS</span><span class='ignore'>:</span> <span class='word'>Confirm</span> <span class='word'>O</span><span class='ignore'>(</span><span class='word'>n</span><span class='ignore'>)</span> <span class='word'>memory</span> <span class='word'>usage</span> <span class='word'>for</span> <span class='word'>document</span> <span class='word'>string</span> <span class='ignore'>+</span> <span class='word'>past</span> <span class='word'>operations</span> <span class='cmd'>\\</span><br>
			<span class='word'>ShareJS</span><span class='ignore'>:</span> <span class='word'>Confirm</span> <span class='word'>O</span><span class='ignore'>(</span><span class='word'>n</span><span class='ignore'>)</span> <span class='word'>memory</span> <span class='word'>usage</span> <span class='word'>on</span> <span class='word'>server</span> <span class='word'>for</span> <span class='word'>stored</span> <span class='word'>ops</span><span class='cmd'>\\</span><br>
			<span class='word'>ShareJS</span><span class='ignore'>:</span> <span class='word'>Confirm</span> <span class='ignore'>-</span> <span class='word'>one</span> <span class='word'>packet</span> <span class='word'>in</span> <span class='word'>flight</span> <span class='ignore'>=</span><span class='ignore'>&gt;</span> <span class='word'>packet</span> <span class='word'>size</span> <span class='word'>and</span> <span class='word'>quantity</span> <span class='word'>change</span> <span class='word'>as</span> <span class='word'>network</span> <span class='word'>latency</span> <span class='word'>grows</span><span class='ignore'>.</span> <span class='cmd'>\\</span><br>
						<span class='word'>Also</span><span class='ignore'>:</span> <span class='word'>Clients</span> <span class='word'>must</span> <span class='word'>be</span> <span class='word'>able</span> <span class='word'>to</span> <span class='word'>undo</span> <span class='word'>operations</span> <span class='word'>in</span> <span class='word'>case</span> <span class='word'>of</span> <span class='word'>reject</span><span class='ignore'>,</span> <span class='word'>as</span> <span class='word'>well</span> <span class='word'>as</span> <span class='word'>transform</span> <span class='word'>any</span> <span class='word'>subsequent</span> <span class='word'>operations</span> <span class='word'>that</span> <span class='word'>have</span> <span class='word'>occurred</span> <span class='word'>against</span> <span class='word'>the</span> <span class='word'>inverse</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>rejected</span> <span class='word'>one</span> <span class='ignore'>=</span><span class='ignore'>&gt;</span> <span class='word'>So</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>clients</span> <span class='word'>must</span> <span class='word'>each</span> <span class='word'>also</span> <span class='word'>have</span> <span class='word'>a</span> <span class='word'>list</span> <span class='word'>of</span> <span class='word'>past</span> <span class='word'>operations</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>also</span> <span class='word'>affects</span> <span class='word'>memory</span> <span class='word'>use</span><span class='ignore'>.</span><br>
&nbsp; &nbsp; &nbsp; <br>
&nbsp; 	<span class='word'>CRDT</span><span class='ignore'>:</span>&nbsp; <span class='word'>Confirm</span> <span class='word'>O</span><span class='ignore'>(</span><span class='word'>nlogn</span><span class='ignore'>)</span> <span class='word'>memory</span> <span class='word'>growth</span> <span class='word'>per</span> <span class='word'>client</span><span class='cmd'>\\</span><br>
			<br>
&nbsp; 	<span class='word'>ShareJS</span><span class='ignore'>:</span> <span class='word'>something</span> <span class='word'>with</span> <span class='word'>latency</span><span class='ignore'>.</span><span class='ignore'>.</span><span class='ignore'>.</span><span class='ignore'>?</span> <span class='word'>maybe</span> <span class='word'>just</span> <span class='word'>a</span> <span class='word'>distribution</span> <span class='word'>of</span> <span class='word'>latencies</span> <span class='word'>given</span> <span class='word'>local</span> <span class='word'>hosting</span><span class='cmd'>\\</span><br>
			<span class='word'>ShareJS</span><span class='ignore'>:</span> <span class='word'>sending</span> <span class='word'>N</span> <span class='word'>words</span> <span class='word'>of</span> <span class='word'>average</span> <span class='word'>length</span> <span class='word'>k</span> <span class='ignore'>=</span><span class='ignore'>&gt;</span> <span class='word'>total</span> <span class='word'>packet</span> <span class='word'>size</span> <span class='ignore'>(</span><span class='word'>grows</span> <span class='word'>with</span> <span class='word'>version</span> <span class='word'>number</span><span class='ignore'>)</span><span class='cmd'>\\</span><br>
			<span class='word'>CRDT</span><span class='ignore'>:</span>&nbsp;  <span class='word'>Given</span> <span class='word'>average</span> <span class='word'>latency</span> <span class='word'>of</span> <span class='word'>ShareJS</span><span class='ignore'>,</span> <span class='word'>show</span> <span class='word'>how</span> <span class='word'>latency</span> <span class='word'>scales</span> <span class='word'>with</span> <span class='word'>connectivity</span> <span class='word'>in</span> <span class='word'>simulation</span> <span class='word'>versus</span> <span class='word'>2</span><span class='ignore'>*</span><span class='word'>RTT</span> <span class='word'>for</span> <span class='word'>ShareJS</span><span class='cmd'>\\</span><br>
			<span class='word'>CRDT</span><span class='ignore'>:</span>&nbsp; <span class='word'>sending</span> <span class='word'>N</span> <span class='word'>words</span> <span class='word'>of</span> <span class='word'>average</span> <span class='word'>length</span> <span class='word'>k</span> <span class='ignore'>=</span><span class='ignore'>&gt;</span> <span class='word'>packet</span> <span class='word'>size</span> <span class='word'>growth</span> <span class='ignore'>.</span><span class='ignore'>.</span><span class='ignore'>.</span> <span class='word'>cf</span> <span class='word'>above</span><span class='ignore'>.</span> <span class='word'>Perhaps</span> <span class='word'>same</span> <span class='word'>plot</span><span class='ignore'>?</span><span class='cmd'>\\</span><br>
			<span class='word'>CRDT</span><span class='ignore'>:</span>&nbsp;  <span class='word'>Flooding</span> <span class='word'>as</span> <span class='word'>a</span> <span class='word'>function</span> <span class='word'>as</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>clients</span> <span class='word'>at</span> <span class='word'>one</span> <span class='word'>or</span> <span class='word'>two</span> <span class='word'>topologies</span> <span class='ignore'>(</span><span class='word'>fully</span> <span class='word'>connected</span> <span class='word'>and</span> <span class='word'>star</span><span class='ignore'>)</span><span class='cmd'>\\</span><br>
			<br>
&nbsp; 	<span class='word'>If</span> <span class='word'>have</span> <span class='word'>time</span><span class='ignore'>:</span> <span class='word'>Implement</span> <span class='word'>lpbcast</span> <span class='word'>and</span> <span class='word'>anti-entropy</span> <span class='word'>and</span> <span class='word'>show</span> <span class='word'>latency</span> <span class='word'>and</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>packets</span> <span class='word'>vs</span> <span class='word'>infection</span> <span class='word'>rate</span><span class='cmd'>\\</span><br>
			<br>
&nbsp; 	<span class='word'>ShareJS</span><span class='ignore'>,</span> <span class='word'>CRDT</span><span class='ignore'>:</span> <span class='word'>Network</span> <span class='word'>cost</span> <span class='word'>of</span> <span class='word'>State</span> <span class='word'>Replay</span><span class='ignore'>,</span> <span class='word'>especially</span> <span class='word'>growth</span> <span class='word'>over</span> <span class='word'>size</span> <span class='word'>of</span> <span class='word'>document</span><span class='cmd'>\\</span><br>
							<span class='word'>Make</span> <span class='word'>note</span> <span class='word'>about</span> <span class='word'>protocol</span> <span class='word'>buffers</span> <span class='word'>here</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>potential</span> <span class='word'>of</span> <span class='word'>saving</span> <span class='word'>multiples</span> <span class='word'>of</span> <span class='word'>space</span> <span class='word'>size</span><span class='ignore'>.</span> <span class='word'>Focus</span> <span class='word'>on</span> <span class='word'>growth</span>	<span class='cmd'>\\</span><br>
							<span class='word'>Perhaps</span> <span class='word'>manually</span> <span class='word'>convert</span> <span class='word'>a</span> <span class='word'>few</span> <span class='word'>into</span> <span class='word'>proto</span> <span class='word'>buffers</span> <span class='word'>as</span> <span class='word'>a</span> <span class='word'>demonstration</span><span class='cmd'>\\</span><br>
			<br>
&nbsp; 	<br>
&nbsp; 	<span class='word'>CRDT</span><span class='ignore'>:</span>&nbsp;  <span class='word'>CPU</span> <span class='word'>cost</span> <span class='word'>of</span> <span class='word'>inserting</span> <span class='ignore'>~</span><span class='word'>10000</span> <span class='word'>words</span> <span class='word'>of</span> <span class='word'>length</span> <span class='word'>K</span> <span class='word'>into</span> <span class='word'>CRDT</span> <span class='ignore'>(</span><span class='word'>easy</span> <span class='word'>enough</span> <span class='word'>to</span> <span class='word'>measure</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>Perhaps</span> <span class='word'>up</span> <span class='word'>to</span> <span class='word'>but</span> <span class='word'>not</span> <span class='word'>including</span> <span class='word'>sending</span> <span class='word'>into</span> <span class='word'>network</span><span class='cmd'>\\</span><br>
			<span class='word'>ShareJS</span><span class='ignore'>:</span> <span class='word'>CPU</span> <span class='word'>cost</span> <span class='word'>of</span> <span class='word'>inserting</span> <span class='word'>same</span> <span class='word'>10000</span> <span class='word'>words</span> <span class='word'>into</span> <span class='word'>document</span><span class='ignore'>.</span><span class='ignore'>.</span><span class='ignore'>.</span> <span class='word'>how</span> <span class='word'>to</span> <span class='word'>measure</span><span class='ignore'>?</span><span class='ignore'>?</span> <span class='word'>How</span> <span class='word'>to</span> <span class='word'>measure</span> <span class='word'>server</span> <span class='word'>as</span> <span class='word'>well</span><span class='ignore'>.</span><span class='ignore'>.</span><span class='ignore'>.</span><span class='cmd'>\\</span><br>
							<span class='word'>Perhaps</span> <span class='word'>up</span> <span class='word'>to</span> <span class='word'>but</span> <span class='word'>not</span> <span class='word'>including</span> <span class='word'>sending</span> <span class='word'>op</span> <span class='word'>into</span> <span class='word'>network</span><span class='cmd'>\\</span><br>
			<br>
&nbsp; 	<span class='word'>Vector</span> <span class='word'>clocks</span><span class='ignore'>:</span><span class='cmd'>\\</span><br>
				<span class='word'>CRDT</span><span class='ignore'>:</span> <span class='word'>Network</span> <span class='word'>Cost</span> <span class='word'>of</span> <span class='word'>using</span> <span class='word'>vector</span> <span class='word'>clocks</span> <span class='word'>to</span> <span class='word'>ensure</span> <span class='word'>causal</span> <span class='word'>delivery</span><span class='ignore'>.</span> <span class='word'>Discuss</span> <span class='word'>how</span> <span class='word'>we</span> <span class='word'>can't</span> <span class='word'>really</span> <span class='word'>do</span> <span class='word'>what</span> <span class='word'>ShareJS</span> <span class='word'>does</span> <span class='word'>since</span> <span class='word'>we</span> <span class='word'>don't</span> <span class='word'>know</span> <span class='ignore'>(</span><span class='word'>1</span> <span class='word'>packet</span> <span class='word'>in</span> <span class='word'>flight</span> <span class='word'>only</span><span class='ignore'>)</span> <span class='word'>since</span> <span class='word'>we</span> <span class='word'>don't</span> <span class='word'>know</span> <span class='word'>when</span> <span class='word'>a</span> <span class='word'>packet</span> <span class='word'>has</span> <span class='word'>reached</span> <span class='word'>the</span> <span class='word'>final</span> <span class='word'>client</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>network</span><br>
&nbsp; &nbsp; &nbsp; 	<br>
&nbsp; 	<span class='word'>Undo</span><span class='ignore'>:</span><span class='cmd'>\\</span><br>
				<span class='word'>CRDT</span><span class='ignore'>:</span> <span class='word'>Show</span> <span class='word'>cost</span> <span class='word'>of</span> <span class='word'>Undo</span> <span class='word'>with</span> <span class='word'>graph</span> <span class='word'>of</span> <span class='word'>no</span> <span class='word'>undo</span><span class='ignore'>,</span> <span class='word'>CCI</span> <span class='word'>Undo</span><span class='ignore'>,</span> <span class='word'>Immediate</span> <span class='word'>undo</span><br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; 	<br>
&nbsp; &nbsp; &nbsp; 	<br>
&nbsp; 	<br>
&nbsp; 	<br>
&nbsp; 	<br>
	<br>
&nbsp; <span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>ShareJS</span> <span class='hword'>Performance</span><span class='ignore'>}</span><br>
		<br>
&nbsp; 	<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='ignore'>}</span><br>
		<br>
&nbsp; <span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Core</span> <span class='hword'>CRDT</span> <span class='hword'>Performance</span><span class='ignore'>}</span><br>
		<br>
&nbsp; <span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>ShareJS</span> <span class='hword'>vs</span> <span class='hword'>CRDT</span> <span class='hword'>for</span> <span class='hword'>Text</span> <span class='hword'>Editing</span><span class='ignore'>}</span><br>
		<br>
&nbsp; <span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Network</span><span class='ignore'>}</span><br>
		<br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
<br>
<br>
<span class='cmd'>\chapter</span><span class='ignore'>{</span><span class='hword'>Conclusion</span><span class='ignore'>}</span><br>
<br>
<br>
<br>
<span class='comment'>%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span><br>
<span class='comment'>% the bibliography</span><br>
<span class='cmd'>\addcontentsline</span><span class='ignore'>{</span><span class='ignore'>toc</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>chapter</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>Bibliography</span><span class='ignore'>}</span><br>
<span class='cmd'>\printbibliography</span><br>
<br>
<span class='comment'>%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span><br>
<span class='comment'>% the appendices</span><br>
<span class='cmd'>\appendix</span><br>
<br>
<span class='cmd'>\chapter</span><span class='ignore'>{</span><span class='hword'>Vector</span> <span class='hword'>Clocks</span><span class='ignore'>}</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Formal</span> <span class='hword'>Definition</span><span class='ignore'>}</span><br>
<span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>appendix</span><span class='ignore'>:</span><span class='ignore'>vectorclocks</span><span class='ignore'>}</span><br>
<span class='word'>TODO</span><br>
<br>
<br>
<span class='cmd'>\chapter</span><span class='ignore'>{</span><span class='hword'>Simple</span> <span class='hword'>Experiment</span><span class='ignore'>}</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Summary</span> <span class='hword'>of</span> <span class='hword'>Logs</span> <span class='hword'>of</span> <span class='hword'>Simple</span> <span class='hword'>Experiment</span><span class='ignore'>}</span><br>
<span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>appendix</span><span class='ignore'>:</span><span class='ignore'>simplelogsummary</span><span class='ignore'>}</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{verbatim}</span><br>
<span class='ignore'>-</span><span class='ignore'>-</span><span class='ignore'>-</span><span class='ignore'>fully-connected</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>nonoptimized</span><span class='ignore'>-</span><span class='ignore'>-</span><span class='ignore'>-</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>simulation</span><span class='ignore'> </span><span class='ignore'>duration</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>848.547219206</span><br>
<span class='ignore'>	</span><span class='ignore'>Optimizations</span><span class='ignore'> </span><span class='ignore'>enabled</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>False</span><br>
<span class='ignore'>	</span><span class='ignore'>All</span><span class='ignore'> </span><span class='ignore'>clients</span><span class='ignore'> </span><span class='ignore'>converged</span><span class='ignore'> </span><span class='ignore'>to</span><span class='ignore'> </span><span class='ignore'>same</span><span class='ignore'> </span><span class='ignore'>result</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>True</span><br>
<span class='ignore'>	</span><span class='ignore'>Converged</span><span class='ignore'> </span><span class='ignore'>string</span><span class='ignore'> </span><span class='ignore'>(</span><span class='ignore'>if</span><span class='ignore'> </span><span class='ignore'>all</span><span class='ignore'> </span><span class='ignore'>match</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>else</span><span class='ignore'> </span><span class='ignore'>first</span><span class='ignore'> </span><span class='ignore'>logged</span><span class='ignore'> </span><span class='ignore'>string</span><span class='ignore'>)</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>None</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>insert</span><span class='ignore'> </span><span class='ignore'>events</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>27</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>delete</span><span class='ignore'> </span><span class='ignore'>events</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>insert</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>125</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>size</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>insert</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>11995</span><br>
<span class='ignore'>	</span><span class='ignore'>Average</span><span class='ignore'> </span><span class='ignore'>insert</span><span class='ignore'> </span><span class='ignore'>packet</span><span class='ignore'> </span><span class='ignore'>size</span><span class='ignore'> </span><span class='ignore'>(</span><span class='ignore'>incl</span><span class='ignore'> </span><span class='ignore'>vector</span><span class='ignore'> </span><span class='ignore'>clock</span><span class='ignore'> </span><span class='ignore'>etc</span><span class='ignore'>.</span><span class='ignore'>)</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>95.96</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>delete</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>size</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>delete</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>	</span><span class='ignore'>Average</span><span class='ignore'> </span><span class='ignore'>delete</span><span class='ignore'> </span><span class='ignore'>packet</span><span class='ignore'> </span><span class='ignore'>size</span><span class='ignore'> </span><span class='ignore'>(</span><span class='ignore'>incl</span><span class='ignore'> </span><span class='ignore'>vector</span><span class='ignore'> </span><span class='ignore'>clock</span><span class='ignore'> </span><span class='ignore'>etc</span><span class='ignore'>.</span><span class='ignore'>)</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>	</span><span class='ignore'>Expected</span><span class='ignore'> </span><span class='ignore'>number</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'> </span><span class='ignore'>-</span><span class='ignore'> </span><span class='ignore'>given</span><span class='ignore'> </span><span class='ignore'>naiive</span><span class='ignore'> </span><span class='ignore'>broadcast</span><span class='ignore'> </span><span class='ignore'>in</span><span class='ignore'> </span><span class='ignore'>a</span><span class='ignore'> </span><span class='ignore'>p2p</span><span class='ignore'> </span><span class='ignore'>network</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>162</span><br>
<span class='ignore'>	</span><span class='ignore'>Expected</span><span class='ignore'> </span><span class='ignore'>number</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'> </span><span class='ignore'>-</span><span class='ignore'> </span><span class='ignore'>given</span><span class='ignore'> </span><span class='ignore'>optimal</span><span class='ignore'> </span><span class='ignore'>p2p</span><span class='ignore'> </span><span class='ignore'>network</span><span class='ignore'> </span><span class='ignore'>with</span><span class='ignore'> </span><span class='ignore'>everyone</span><span class='ignore'> </span><span class='ignore'>joining</span><span class='ignore'> </span><span class='ignore'>at</span><span class='ignore'> </span><span class='ignore'>start</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>54</span><br>
<span class='ignore'>	</span><span class='ignore'>Latency</span><span class='ignore'>/</span><span class='ignore'>wait</span><span class='ignore'> </span><span class='ignore'>time</span><span class='ignore'> </span><span class='ignore'>per</span><span class='ignore'> </span><span class='ignore'>client</span><span class='ignore'> </span><span class='ignore'>when</span><span class='ignore'> </span><span class='ignore'>requesting</span><span class='ignore'> </span><span class='ignore'>CRDT</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>[</span><span class='ignore'>0</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>416.77360960314616</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>319.07862277720614</span><span class='ignore'>]</span><br>
<span class='ignore'>	</span><span class='ignore'>From</span><span class='ignore'> </span><span class='ignore'>whom</span><span class='ignore'> </span><span class='ignore'>each</span><span class='ignore'> </span><span class='ignore'>client</span><span class='ignore'> </span><span class='ignore'>request</span><span class='ignore'> </span><span class='ignore'>CRDT</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>[</span><span class='ignore'>-</span><span class='ignore'>1</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>0</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>0</span><span class='ignore'>]</span><br>
<span class='ignore'>	</span><span class='ignore'>Length</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>stringified</span><span class='ignore'> </span><span class='ignore'>document</span><span class='ignore'>/</span><span class='ignore'>crdt</span><span class='ignore'> </span><span class='ignore'>during</span><span class='ignore'> </span><span class='ignore'>state</span><span class='ignore'> </span><span class='ignore'>replay</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>on</span><span class='ignore'> </span><span class='ignore'>average</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>171</span><br>
<span class='ignore'>	</span><span class='ignore'>pre-experiment</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>	</span><span class='ignore'>post-topology-init</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>68752</span><br>
<span class='ignore'>	</span><span class='ignore'>post-graph-init</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>633464</span><br>
<span class='ignore'>	</span><span class='ignore'>post-clients-init</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>651976</span><br>
<span class='ignore'>	</span><span class='ignore'>post-experiment</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>1256448</span><br>
<br>
<span class='ignore'>-</span><span class='ignore'>-</span><span class='ignore'>-</span><span class='ignore'>fully-connected</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>optimized</span><span class='ignore'>-</span><span class='ignore'>-</span><span class='ignore'>-</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>simulation</span><span class='ignore'> </span><span class='ignore'>duration</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>848.547219206</span><br>
<span class='ignore'>	</span><span class='ignore'>Optimizations</span><span class='ignore'> </span><span class='ignore'>enabled</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>True</span><br>
<span class='ignore'>	</span><span class='ignore'>All</span><span class='ignore'> </span><span class='ignore'>clients</span><span class='ignore'> </span><span class='ignore'>converged</span><span class='ignore'> </span><span class='ignore'>to</span><span class='ignore'> </span><span class='ignore'>same</span><span class='ignore'> </span><span class='ignore'>result</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>True</span><br>
<span class='ignore'>	</span><span class='ignore'>Converged</span><span class='ignore'> </span><span class='ignore'>string</span><span class='ignore'> </span><span class='ignore'>(</span><span class='ignore'>if</span><span class='ignore'> </span><span class='ignore'>all</span><span class='ignore'> </span><span class='ignore'>match</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>else</span><span class='ignore'> </span><span class='ignore'>first</span><span class='ignore'> </span><span class='ignore'>logged</span><span class='ignore'> </span><span class='ignore'>string</span><span class='ignore'>)</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>None</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>insert</span><span class='ignore'> </span><span class='ignore'>events</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>3</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>delete</span><span class='ignore'> </span><span class='ignore'>events</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>insert</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>13</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>size</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>insert</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>1329</span><br>
<span class='ignore'>	</span><span class='ignore'>Average</span><span class='ignore'> </span><span class='ignore'>insert</span><span class='ignore'> </span><span class='ignore'>packet</span><span class='ignore'> </span><span class='ignore'>size</span><span class='ignore'> </span><span class='ignore'>(</span><span class='ignore'>incl</span><span class='ignore'> </span><span class='ignore'>vector</span><span class='ignore'> </span><span class='ignore'>clock</span><span class='ignore'> </span><span class='ignore'>etc</span><span class='ignore'>.</span><span class='ignore'>)</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>102.230769231</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>delete</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>size</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>delete</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>	</span><span class='ignore'>Average</span><span class='ignore'> </span><span class='ignore'>delete</span><span class='ignore'> </span><span class='ignore'>packet</span><span class='ignore'> </span><span class='ignore'>size</span><span class='ignore'> </span><span class='ignore'>(</span><span class='ignore'>incl</span><span class='ignore'> </span><span class='ignore'>vector</span><span class='ignore'> </span><span class='ignore'>clock</span><span class='ignore'> </span><span class='ignore'>etc</span><span class='ignore'>.</span><span class='ignore'>)</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>	</span><span class='ignore'>Expected</span><span class='ignore'> </span><span class='ignore'>number</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'> </span><span class='ignore'>-</span><span class='ignore'> </span><span class='ignore'>given</span><span class='ignore'> </span><span class='ignore'>naiive</span><span class='ignore'> </span><span class='ignore'>broadcast</span><span class='ignore'> </span><span class='ignore'>in</span><span class='ignore'> </span><span class='ignore'>a</span><span class='ignore'> </span><span class='ignore'>p2p</span><span class='ignore'> </span><span class='ignore'>network</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>18</span><br>
<span class='ignore'>	</span><span class='ignore'>Expected</span><span class='ignore'> </span><span class='ignore'>number</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'> </span><span class='ignore'>-</span><span class='ignore'> </span><span class='ignore'>given</span><span class='ignore'> </span><span class='ignore'>optimal</span><span class='ignore'> </span><span class='ignore'>p2p</span><span class='ignore'> </span><span class='ignore'>network</span><span class='ignore'> </span><span class='ignore'>with</span><span class='ignore'> </span><span class='ignore'>everyone</span><span class='ignore'> </span><span class='ignore'>joining</span><span class='ignore'> </span><span class='ignore'>at</span><span class='ignore'> </span><span class='ignore'>start</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>6</span><br>
<span class='ignore'>	</span><span class='ignore'>Latency</span><span class='ignore'>/</span><span class='ignore'>wait</span><span class='ignore'> </span><span class='ignore'>time</span><span class='ignore'> </span><span class='ignore'>per</span><span class='ignore'> </span><span class='ignore'>client</span><span class='ignore'> </span><span class='ignore'>when</span><span class='ignore'> </span><span class='ignore'>requesting</span><span class='ignore'> </span><span class='ignore'>CRDT</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>[</span><span class='ignore'>0</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>416.77360960314616</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>319.07862277720614</span><span class='ignore'>]</span><br>
<span class='ignore'>	</span><span class='ignore'>From</span><span class='ignore'> </span><span class='ignore'>whom</span><span class='ignore'> </span><span class='ignore'>each</span><span class='ignore'> </span><span class='ignore'>client</span><span class='ignore'> </span><span class='ignore'>request</span><span class='ignore'> </span><span class='ignore'>CRDT</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>[</span><span class='ignore'>-</span><span class='ignore'>1</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>0</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>0</span><span class='ignore'>]</span><br>
<span class='ignore'>	</span><span class='ignore'>Length</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>stringified</span><span class='ignore'> </span><span class='ignore'>document</span><span class='ignore'>/</span><span class='ignore'>crdt</span><span class='ignore'> </span><span class='ignore'>during</span><span class='ignore'> </span><span class='ignore'>state</span><span class='ignore'> </span><span class='ignore'>replay</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>on</span><span class='ignore'> </span><span class='ignore'>average</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>171</span><br>
<span class='ignore'>	</span><span class='ignore'>pre-experiment</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>	</span><span class='ignore'>post-topology-init</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>149136</span><br>
<span class='ignore'>	</span><span class='ignore'>post-graph-init</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>1114064</span><br>
<span class='ignore'>	</span><span class='ignore'>post-clients-init</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>1125632</span><br>
<span class='ignore'>	</span><span class='ignore'>post-experiment</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>-</span><span class='ignore'>1833488</span><br>
<br>
<span class='ignore'>-</span><span class='ignore'>-</span><span class='ignore'>-</span><span class='ignore'>star</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>nonoptimized</span><span class='ignore'>-</span><span class='ignore'>-</span><span class='ignore'>-</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>simulation</span><span class='ignore'> </span><span class='ignore'>duration</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>959.239037182</span><br>
<span class='ignore'>	</span><span class='ignore'>Optimizations</span><span class='ignore'> </span><span class='ignore'>enabled</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>False</span><br>
<span class='ignore'>	</span><span class='ignore'>All</span><span class='ignore'> </span><span class='ignore'>clients</span><span class='ignore'> </span><span class='ignore'>converged</span><span class='ignore'> </span><span class='ignore'>to</span><span class='ignore'> </span><span class='ignore'>same</span><span class='ignore'> </span><span class='ignore'>result</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>True</span><br>
<span class='ignore'>	</span><span class='ignore'>Converged</span><span class='ignore'> </span><span class='ignore'>string</span><span class='ignore'> </span><span class='ignore'>(</span><span class='ignore'>if</span><span class='ignore'> </span><span class='ignore'>all</span><span class='ignore'> </span><span class='ignore'>match</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>else</span><span class='ignore'> </span><span class='ignore'>first</span><span class='ignore'> </span><span class='ignore'>logged</span><span class='ignore'> </span><span class='ignore'>string</span><span class='ignore'>)</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>None</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>insert</span><span class='ignore'> </span><span class='ignore'>events</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>27</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>delete</span><span class='ignore'> </span><span class='ignore'>events</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>insert</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>89</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>size</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>insert</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>8489</span><br>
<span class='ignore'>	</span><span class='ignore'>Average</span><span class='ignore'> </span><span class='ignore'>insert</span><span class='ignore'> </span><span class='ignore'>packet</span><span class='ignore'> </span><span class='ignore'>size</span><span class='ignore'> </span><span class='ignore'>(</span><span class='ignore'>incl</span><span class='ignore'> </span><span class='ignore'>vector</span><span class='ignore'> </span><span class='ignore'>clock</span><span class='ignore'> </span><span class='ignore'>etc</span><span class='ignore'>.</span><span class='ignore'>)</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>95.3820224719</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>delete</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>size</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>delete</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>	</span><span class='ignore'>Average</span><span class='ignore'> </span><span class='ignore'>delete</span><span class='ignore'> </span><span class='ignore'>packet</span><span class='ignore'> </span><span class='ignore'>size</span><span class='ignore'> </span><span class='ignore'>(</span><span class='ignore'>incl</span><span class='ignore'> </span><span class='ignore'>vector</span><span class='ignore'> </span><span class='ignore'>clock</span><span class='ignore'> </span><span class='ignore'>etc</span><span class='ignore'>.</span><span class='ignore'>)</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>	</span><span class='ignore'>Expected</span><span class='ignore'> </span><span class='ignore'>number</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'> </span><span class='ignore'>-</span><span class='ignore'> </span><span class='ignore'>given</span><span class='ignore'> </span><span class='ignore'>naiive</span><span class='ignore'> </span><span class='ignore'>broadcast</span><span class='ignore'> </span><span class='ignore'>in</span><span class='ignore'> </span><span class='ignore'>a</span><span class='ignore'> </span><span class='ignore'>p2p</span><span class='ignore'> </span><span class='ignore'>network</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>108</span><br>
<span class='ignore'>	</span><span class='ignore'>Expected</span><span class='ignore'> </span><span class='ignore'>number</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'> </span><span class='ignore'>-</span><span class='ignore'> </span><span class='ignore'>given</span><span class='ignore'> </span><span class='ignore'>optimal</span><span class='ignore'> </span><span class='ignore'>p2p</span><span class='ignore'> </span><span class='ignore'>network</span><span class='ignore'> </span><span class='ignore'>with</span><span class='ignore'> </span><span class='ignore'>everyone</span><span class='ignore'> </span><span class='ignore'>joining</span><span class='ignore'> </span><span class='ignore'>at</span><span class='ignore'> </span><span class='ignore'>start</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>54</span><br>
<span class='ignore'>	</span><span class='ignore'>Latency</span><span class='ignore'>/</span><span class='ignore'>wait</span><span class='ignore'> </span><span class='ignore'>time</span><span class='ignore'> </span><span class='ignore'>per</span><span class='ignore'> </span><span class='ignore'>client</span><span class='ignore'> </span><span class='ignore'>when</span><span class='ignore'> </span><span class='ignore'>requesting</span><span class='ignore'> </span><span class='ignore'>CRDT</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>[</span><span class='ignore'>0</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>416.77360960314616</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>319.07862277720614</span><span class='ignore'>]</span><br>
<span class='ignore'>	</span><span class='ignore'>From</span><span class='ignore'> </span><span class='ignore'>whom</span><span class='ignore'> </span><span class='ignore'>each</span><span class='ignore'> </span><span class='ignore'>client</span><span class='ignore'> </span><span class='ignore'>request</span><span class='ignore'> </span><span class='ignore'>CRDT</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>[</span><span class='ignore'>-</span><span class='ignore'>1</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>0</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>0</span><span class='ignore'>]</span><br>
<span class='ignore'>	</span><span class='ignore'>Length</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>stringified</span><span class='ignore'> </span><span class='ignore'>document</span><span class='ignore'>/</span><span class='ignore'>crdt</span><span class='ignore'> </span><span class='ignore'>during</span><span class='ignore'> </span><span class='ignore'>state</span><span class='ignore'> </span><span class='ignore'>replay</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>on</span><span class='ignore'> </span><span class='ignore'>average</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>171</span><br>
<span class='ignore'>	</span><span class='ignore'>pre-experiment</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>	</span><span class='ignore'>post-topology-init</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>71056</span><br>
<span class='ignore'>	</span><span class='ignore'>post-graph-init</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>2482896</span><br>
<span class='ignore'>	</span><span class='ignore'>post-clients-init</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>2491528</span><br>
<span class='ignore'>	</span><span class='ignore'>post-experiment</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>-</span><span class='ignore'>2005448</span><br>
<br>
<span class='ignore'>-</span><span class='ignore'>-</span><span class='ignore'>-</span><span class='ignore'>star</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>optimized</span><span class='ignore'>-</span><span class='ignore'>-</span><span class='ignore'>-</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>simulation</span><span class='ignore'> </span><span class='ignore'>duration</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>959.239037182</span><br>
<span class='ignore'>	</span><span class='ignore'>Optimizations</span><span class='ignore'> </span><span class='ignore'>enabled</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>True</span><br>
<span class='ignore'>	</span><span class='ignore'>All</span><span class='ignore'> </span><span class='ignore'>clients</span><span class='ignore'> </span><span class='ignore'>converged</span><span class='ignore'> </span><span class='ignore'>to</span><span class='ignore'> </span><span class='ignore'>same</span><span class='ignore'> </span><span class='ignore'>result</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>True</span><br>
<span class='ignore'>	</span><span class='ignore'>Converged</span><span class='ignore'> </span><span class='ignore'>string</span><span class='ignore'> </span><span class='ignore'>(</span><span class='ignore'>if</span><span class='ignore'> </span><span class='ignore'>all</span><span class='ignore'> </span><span class='ignore'>match</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>else</span><span class='ignore'> </span><span class='ignore'>first</span><span class='ignore'> </span><span class='ignore'>logged</span><span class='ignore'> </span><span class='ignore'>string</span><span class='ignore'>)</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>None</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>insert</span><span class='ignore'> </span><span class='ignore'>events</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>3</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>delete</span><span class='ignore'> </span><span class='ignore'>events</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>insert</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>9</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>size</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>insert</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>917</span><br>
<span class='ignore'>	</span><span class='ignore'>Average</span><span class='ignore'> </span><span class='ignore'>insert</span><span class='ignore'> </span><span class='ignore'>packet</span><span class='ignore'> </span><span class='ignore'>size</span><span class='ignore'> </span><span class='ignore'>(</span><span class='ignore'>incl</span><span class='ignore'> </span><span class='ignore'>vector</span><span class='ignore'> </span><span class='ignore'>clock</span><span class='ignore'> </span><span class='ignore'>etc</span><span class='ignore'>.</span><span class='ignore'>)</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>101.888888889</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>delete</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>size</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>delete</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>	</span><span class='ignore'>Average</span><span class='ignore'> </span><span class='ignore'>delete</span><span class='ignore'> </span><span class='ignore'>packet</span><span class='ignore'> </span><span class='ignore'>size</span><span class='ignore'> </span><span class='ignore'>(</span><span class='ignore'>incl</span><span class='ignore'> </span><span class='ignore'>vector</span><span class='ignore'> </span><span class='ignore'>clock</span><span class='ignore'> </span><span class='ignore'>etc</span><span class='ignore'>.</span><span class='ignore'>)</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>	</span><span class='ignore'>Expected</span><span class='ignore'> </span><span class='ignore'>number</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'> </span><span class='ignore'>-</span><span class='ignore'> </span><span class='ignore'>given</span><span class='ignore'> </span><span class='ignore'>naiive</span><span class='ignore'> </span><span class='ignore'>broadcast</span><span class='ignore'> </span><span class='ignore'>in</span><span class='ignore'> </span><span class='ignore'>a</span><span class='ignore'> </span><span class='ignore'>p2p</span><span class='ignore'> </span><span class='ignore'>network</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>12</span><br>
<span class='ignore'>	</span><span class='ignore'>Expected</span><span class='ignore'> </span><span class='ignore'>number</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'> </span><span class='ignore'>-</span><span class='ignore'> </span><span class='ignore'>given</span><span class='ignore'> </span><span class='ignore'>optimal</span><span class='ignore'> </span><span class='ignore'>p2p</span><span class='ignore'> </span><span class='ignore'>network</span><span class='ignore'> </span><span class='ignore'>with</span><span class='ignore'> </span><span class='ignore'>everyone</span><span class='ignore'> </span><span class='ignore'>joining</span><span class='ignore'> </span><span class='ignore'>at</span><span class='ignore'> </span><span class='ignore'>start</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>6</span><br>
<span class='ignore'>	</span><span class='ignore'>Latency</span><span class='ignore'>/</span><span class='ignore'>wait</span><span class='ignore'> </span><span class='ignore'>time</span><span class='ignore'> </span><span class='ignore'>per</span><span class='ignore'> </span><span class='ignore'>client</span><span class='ignore'> </span><span class='ignore'>when</span><span class='ignore'> </span><span class='ignore'>requesting</span><span class='ignore'> </span><span class='ignore'>CRDT</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>[</span><span class='ignore'>0</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>416.77360960314616</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>319.07862277720614</span><span class='ignore'>]</span><br>
<span class='ignore'>	</span><span class='ignore'>From</span><span class='ignore'> </span><span class='ignore'>whom</span><span class='ignore'> </span><span class='ignore'>each</span><span class='ignore'> </span><span class='ignore'>client</span><span class='ignore'> </span><span class='ignore'>request</span><span class='ignore'> </span><span class='ignore'>CRDT</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>[</span><span class='ignore'>-</span><span class='ignore'>1</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>0</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>0</span><span class='ignore'>]</span><br>
<span class='ignore'>	</span><span class='ignore'>Length</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>stringified</span><span class='ignore'> </span><span class='ignore'>document</span><span class='ignore'>/</span><span class='ignore'>crdt</span><span class='ignore'> </span><span class='ignore'>during</span><span class='ignore'> </span><span class='ignore'>state</span><span class='ignore'> </span><span class='ignore'>replay</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>on</span><span class='ignore'> </span><span class='ignore'>average</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>171</span><br>
<span class='ignore'>	</span><span class='ignore'>pre-experiment</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>	</span><span class='ignore'>post-topology-init</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>73776</span><br>
<span class='ignore'>	</span><span class='ignore'>post-graph-init</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>1485920</span><br>
<span class='ignore'>	</span><span class='ignore'>post-clients-init</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>1493768</span><br>
<span class='ignore'>	</span><span class='ignore'>post-experiment</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>1192544</span><br>
<br>
<span class='ignore'>-</span><span class='ignore'>-</span><span class='ignore'>-</span><span class='ignore'>experiment</span><span class='ignore'>_</span><span class='ignore'>1</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>ot</span><span class='ignore'>-</span><span class='ignore'>-</span><span class='ignore'>-</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>simulation</span><span class='ignore'> </span><span class='ignore'>duration</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>2100.0</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>insert</span><span class='ignore'> </span><span class='ignore'>events</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>3</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>delete</span><span class='ignore'> </span><span class='ignore'>events</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>18</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>size</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>1398</span><br>
<span class='ignore'>	</span><span class='ignore'>Average</span><span class='ignore'> </span><span class='ignore'>packet</span><span class='ignore'> </span><span class='ignore'>payload</span><span class='ignore'> </span><span class='ignore'>size</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>77.6666666667</span><br>
<span class='ignore'>	</span><span class='ignore'>Total</span><span class='ignore'> </span><span class='ignore'>size</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>if</span><span class='ignore'> </span><span class='ignore'>there</span><span class='ignore'> </span><span class='ignore'>were</span><span class='ignore'> </span><span class='ignore'>no</span><span class='ignore'> </span><span class='ignore'>meta-information</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>264</span><br>
<span class='ignore'>	</span><span class='ignore'>Average</span><span class='ignore'> </span><span class='ignore'>packet</span><span class='ignore'> </span><span class='ignore'>payload</span><span class='ignore'> </span><span class='ignore'>size</span><span class='ignore'> </span><span class='ignore'>without</span><span class='ignore'> </span><span class='ignore'>meta-information</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>14.6666666667</span><br>
<span class='ignore'>	</span><span class='ignore'>Expected</span><span class='ignore'> </span><span class='ignore'>number</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>packets</span><span class='ignore'> </span><span class='ignore'>sent</span><span class='ignore'> </span><span class='ignore'>-</span><span class='ignore'> </span><span class='ignore'>give</span><span class='ignore'> </span><span class='ignore'>optimal</span><span class='ignore'> </span><span class='ignore'>client-server</span><span class='ignore'> </span><span class='ignore'>network</span><span class='ignore'> </span><span class='ignore'>with</span><span class='ignore'> </span><span class='ignore'>everyone</span><span class='ignore'> </span><span class='ignore'>joining</span><span class='ignore'> </span><span class='ignore'>at</span><span class='ignore'> </span><span class='ignore'>start</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>18</span><br>
<span class='ignore'>	</span><span class='ignore'>Latency</span><span class='ignore'>/</span><span class='ignore'>wait</span><span class='ignore'> </span><span class='ignore'>time</span><span class='ignore'> </span><span class='ignore'>per</span><span class='ignore'> </span><span class='ignore'>client</span><span class='ignore'> </span><span class='ignore'>when</span><span class='ignore'> </span><span class='ignore'>requesting</span><span class='ignore'> </span><span class='ignore'>CRDT</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>[</span><span class='ignore'>43.0</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>18.0</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>19.0</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>0</span><span class='ignore'>]</span><br>
<span class='ignore'>	</span><span class='ignore'>From</span><span class='ignore'> </span><span class='ignore'>whom</span><span class='ignore'> </span><span class='ignore'>each</span><span class='ignore'> </span><span class='ignore'>client</span><span class='ignore'> </span><span class='ignore'>request</span><span class='ignore'> </span><span class='ignore'>CRDT</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>[</span><span class='ignore'>-</span><span class='ignore'>1</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>-</span><span class='ignore'>1</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>-</span><span class='ignore'>1</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>-</span><span class='ignore'>1</span><span class='ignore'>]</span><br>
<span class='ignore'>	</span><span class='ignore'>Length</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>stringified</span><span class='ignore'> </span><span class='ignore'>document</span><span class='ignore'>/</span><span class='ignore'>crdt</span><span class='ignore'> </span><span class='ignore'>during</span><span class='ignore'> </span><span class='ignore'>state</span><span class='ignore'> </span><span class='ignore'>replay</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>on</span><span class='ignore'> </span><span class='ignore'>average</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>	</span><span class='ignore'>pre-experiment</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>0</span><br>
<span class='ignore'>	</span><span class='ignore'>post-clients-create</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>2170512</span><br>
<span class='ignore'>	</span><span class='ignore'>post-clients-init</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>716032</span><br>
<span class='ignore'>	</span><span class='ignore'>post-experiment</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>1101280</span><br>
<br>
<span class='envir'>\end</span><span class='envir'></span><span class='envir'>{verbatim}</span><br>
<br>
<span class='cmd'>\chapter</span><span class='ignore'>{</span><span class='hword'>Project</span> <span class='hword'>Proposal</span><span class='ignore'>}</span><br>
<br>
<span class='cmd'>\input</span><span class='fileinc'>{proposal}</span><br>
<br>
<span class='envir'>\end</span><span class='envir'>{document}</span><br>
</p></div>
<div class='count'>
<ul class='count'>
<li class='header'>File: diss.tex</li>
<li>Encoding: utf8</li>
<li>Words in text: 12552</li>
<li>Words in headers: 196</li>
<li>Words outside text (captions, etc.): 650</li>
<li>Number of headers: 97</li>
<li>Number of floats/tables/figures: 14</li>
<li>Number of math inlines: 222</li>
<li>Number of math displayed: 7</li>
<li>Subcounts:</li>
<span class='subcount'>
<li class='fielddesc'>&nbsp; text+headers+captions (#headers/#floats/#inlines/#displayed)</li>
  <li>16+0+0 (0/0/0/0) _top_</li>
  <li>0+1+14 (1/0/1/0) Chapter: Proforma</li>
  <li>1+5+11 (1/0/0/0) Section: Original Aims of the Project</li>
  <li>1+2+0 (1/0/0/0) Section: Work Completed</li>
  <li>1+2+0 (1/0/0/0) Section: Special Difficulties</li>
  <li>72+1+0 (1/0/0/0) Section: Declaration</li>
  <li>1+1+0 (1/0/0/0) Section: Acknowledgements</li>
  <li>85+1+0 (1/0/0/0) Chapter: Introduction</li>
  <li>274+1+2 (1/0/0/0) Section: Motivation</li>
  <li>252+1+0 (1/0/0/0) Section: Overview</li>
  <li>126+2+0 (1/0/0/0) Section: Related Work</li>
  <li>247+1+80 (1/1/0/0) Subsection: Treedoc</li>
  <li>174+1+0 (1/0/0/0) Subsection: Logoot</li>
  <li>203+1+0 (1/0/2/0) Subsection: Logoot-Undo</li>
  <li>0+1+0 (1/0/0/0) Chapter: Preparation</li>
  <li>0+2+0 (1/0/0/0) Section: Consistency Models</li>
  <li>253+4+69 (1/1/0/0) Subsection: What is ``Conflict Free''</li>
  <li>166+3+0 (1/0/0/0) Subsection: CCI Consistency Model</li>
  <li>51+3+0 (1/0/0/0) Section: Achieving Eventual Consistency</li>
  <li>36+2+237 (1/3/0/0) Subsection: Operational Transformations</li>
  <li>264+4+48 (1/1/1/0) Subsection: Convergent Replicated Data Types</li>
  <li>404+1+1 (1/0/0/0) Subsection: ShareJS</li>
  <li>0+1+0 (1/0/0/0) Section: Analysis</li>
  <li>129+1+0 (1/0/5/0) Subsection: Memory</li>
  <li>177+1+0 (1/0/6/0) Subsection: Network</li>
  <li>105+2+0 (1/0/0/0) Subsection: Processor Load</li>
  <li>221+5+1 (1/0/0/0) Subsection: Client-Server versus Peer to Peer</li>
  <li>149+2+0 (1/0/0/0) Section: Starting Point</li>
  <li>70+2+5 (1/1/0/0) Section: Requirements Analysis</li>
  <li>0+2+0 (1/0/0/0) Section: Software Engineering</li>
  <li>99+1+2 (1/0/0/0) Subsection: Libraries</li>
  <li>85+1+2 (1/0/0/0) Subsection: Languages</li>
  <li>284+1+3 (1/0/0/0) Subsection: Tooling</li>
  <li>93+5+1 (1/0/0/0) Subsection: Backup Strategy and Development Machine</li>
  <li>51+3+0 (1/0/0/0) Section: Early Design Decisions</li>
  <li>269+2+0 (1/0/2/0) Subsection: Network Simulation</li>
  <li>177+4+0 (1/0/0/0) Subsection: Data Collection and Logging</li>
  <li>49+1+0 (1/0/0/0) Chapter: Implementation</li>
  <li>0+2+0 (1/0/0/0) Section: CRDT-based system</li>
  <li>256+1+46 (1/1/0/0) Subsection: Overview</li>
  <li>1224+8+69 (6/2/47/1) Subsection: CRDT</li>
  <li>216+1+0 (1/0/0/0) Subsection: Tombstones</li>
  <li>300+1+0 (1/0/19/0) Subsection: Optimizations</li>
  <li>2310+22+58 (12/2/69/4) Subsection: Network simulation</li>
  <li>343+5+0 (3/0/0/0) Section: ShareJS Comparative Environment</li>
  <li>46+4+0 (1/0/0/0) Section: Experiment Creation and Use</li>
  <li>126+2+0 (1/1/0/0) Subsection: Work Flow</li>
  <li>203+2+0 (1/0/0/0) Subsection: Experiment Design</li>
  <li>176+3+0 (1/0/0/0) Subsection: Separation of Concerns</li>
  <li>88+3+0 (1/0/0/0) Section: Extension: Local Undo</li>
  <li>151+1+0 (1/0/0/0) Subsection: Overview</li>
  <li>461+6+0 (3/0/11/0) Subsection: Insert</li>
  <li>1242+26+0 (11/0/59/2) Subsection: Delete</li>
  <li>16+1+0 (1/0/0/0) Chapter: Evaluation</li>
  <li>290+2+0 (1/0/0/0) Section: Overall Results</li>
  <li>112+3+1 (1/1/0/0) Section: Testing the CRDT</li>
  <li>406+2+0 (1/0/0/0) Section: Quantitative Analysis</li>
  <li>0+2+0 (2/0/0/0) Subsection: ShareJS Performance</li>
  <li>0+3+0 (1/0/0/0) Subsection: Core CRDT Performance</li>
  <li>0+6+0 (1/0/0/0) Subsection: ShareJS vs CRDT for Text Editing</li>
  <li>0+1+0 (1/0/0/0) Subsection: Network</li>
  <li>0+1+0 (1/0/0/0) Chapter: Conclusion</li>
  <li>0+2+0 (1/0/0/0) Chapter: Vector Clocks</li>
  <li>1+2+0 (1/0/0/0) Section: Formal Definition</li>
  <li>0+2+0 (1/0/0/0) Chapter: Simple Experiment</li>
  <li>0+6+0 (1/0/0/0) Section: Summary of Logs of Simple Experiment</li>
  <li>0+2+0 (1/0/0/0) Chapter: Project Proposal</li>
</span>
</ul>
</div>
</div>

</body>

</html>
